<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>ChilliCream GraphQL Platform</title>
        <link>https://chillicream.com</link>
        <description>We're building the ultimate GraphQL platform</description>
        <lastBuildDate>Sun, 22 Nov 2020 22:08:17 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>ChilliCream</generator>
        <language>en</language>
        <image>
            <title>ChilliCream GraphQL Platform</title>
            <url>https://chillicream.com/favicon-32x32.png</url>
            <link>https://chillicream.com</link>
        </image>
        <copyright>All rights reserved 2020, ChilliCream</copyright>
        <atom:link href="https://chillicream.com/rss.xml" rel="self" type="application/rss+xml"/>
        <item>
            <title><![CDATA[The new Filtering API]]></title>
            <link>https://chillicream.com/blog/2020/11/18/new-filtering-api</link>
            <guid>/blog/2020/11/18/new-filtering-api</guid>
            <pubDate>Wed, 18 Nov 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[With version 11, we release a complete rewrite of filtering, sorting, and selections. With our initial release a few versions back, we…]]></description>
            <content:encoded><![CDATA[<p>With version 11, we release a complete rewrite of filtering, sorting, and selections. With our initial release a few versions back, we decided to use a similar syntax as Prisma did. Initially, this looked like a very intuitive way of declaring filters. We already shipped some extensions in preview releases of version 11, like object filters, list filters, etc.</p>
<p>We started investigating into opening up the API for users who want to provide their filters or write their database providers for Hot Chocolate. Quickly we realized that the API was not good enough for a public release and, even worse, the underlying GraphQL syntax was not ideal to use.</p>
<p>This was a huge setback for us, but we still went back to the drawing board and made a complete redesign of it. We looked at many different implementations of similar features, and combined with the experience we made; we settled on a similar approach to Hasura or Postgraphile.</p>
<p>The main issue with the filters released with version 10 is the strict binding of field and operation. The discussion and a detailed description of the problem we faced can be followed in this <a href="https://github.com/ChilliCream/hotchocolate/issues/2044">Issue on GitHub</a></p>
<p>Here is a quick summary:</p>
<p>This approach works great with scalar filters.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="4424814849354819000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`where: {
    foo_contains: “bar”
}`, `4424814849354819000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token attr-name">where</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token attr-name">foo_contains</span><span class="token punctuation">:</span> “bar”
<span class="token punctuation">}</span></code></pre></div>
<p>We bundled the field and the operation together into an easy to understand and straight forward GraphQL field.</p>
<p>Object filters would add another level of nesting:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="56179851536252220000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`where: {
    foo: {
        bar_contains:”bar”
    }
}`, `56179851536252220000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token attr-name">where</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token attr-name">foo</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token attr-name">bar_contains</span><span class="token punctuation">:</span>”bar”
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>For array filters, we came up with a mixture of nesting and bundling. With list filters, the problems already begin to start. It is already required to have helper (<code class="language-text">el_XXX</code>) syntax to access the elements of a list:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="93693559400457360000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`where: {
    foo_some: {
        el_gt:4
    }
}`, `93693559400457360000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token attr-name">where</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token attr-name">foo_some</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token attr-name">el_gt</span><span class="token punctuation">:</span><span class="token number">4</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>As soon as we dived deeper into possible extensions, the problems became more severe, and the API became more inconsistent. A good example of this issue is when we want to filter by the length of a string. We could filter by <code class="language-text">foo_length_gt:4</code> or <code class="language-text">foo_length: { is_gt: 4}</code> or even <code class="language-text">foo: { length: { is_gt:4 } }</code>. All of these approaches would follow the style guide. The first would be like we define filters for the field, the second similar to the list filters, and the last one would be like the object filters.</p>
<h1 id="the-new-filtering" style="position:relative;"><a href="#the-new-filtering" aria-label="the new filtering permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>The New Filtering</h1>
<p>With the new filtering API, there is a fundamental change. Operations and fields are no longer bundled together into one GraphQL field.</p>
<p>Here is a quick overview of the examples listed above:</p>
<p>Scalar filters:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="55757164149729170000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`where: {
    foo: {
        contains: “bar”
    }
}`, `55757164149729170000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token attr-name">where</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token attr-name">foo</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token attr-name">contains</span><span class="token punctuation">:</span> “bar”
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Object filters:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">where: {
    foo: {
        bar {
            contains: “bar”
        }
    }
}</code></pre></div>
<p>List filters:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="38905513426140880000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`where: {
    foo: {
        some: {
            gt: 4
        }
    }
}`, `38905513426140880000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token attr-name">where</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token attr-name">foo</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token attr-name">some</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token attr-name">gt</span><span class="token punctuation">:</span> <span class="token number">4</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>As the API now is based on nesting, every combination of field and operation feels a lot more natural. When you like to filter by the length of a string, the resulting API looks seamless:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="23739657638804300000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`where: {
    foo: {
        length: {
            gt: 4
        }
    }
}`, `23739657638804300000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token attr-name">where</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token attr-name">foo</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token attr-name">length</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token attr-name">gt</span><span class="token punctuation">:</span> <span class="token number">4</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h1 id="this-is-breaking-my-api" style="position:relative;"><a href="#this-is-breaking-my-api" aria-label="this is breaking my api permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>THIS IS BREAKING MY API!</h1>
<p>We know. We had a long discussion about this. We feel confident that this new approach is the right way to go, and it is designed to stay. The 10.X.X filters are still available in version 11. They will be deprecated, though, and will be removed in version 12.</p>
<h1 id="the-data-package" style="position:relative;"><a href="#the-data-package" aria-label="the data package permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>The Data Package</h1>
<p>With version 11, we introduce a new package for Hot Chocolate. We created a new package called <code class="language-text">HotChocolate.Data</code>. This package contains <code class="language-text">HotChocolate.Data.Filtering</code>, <code class="language-text">HotChocolate.Data.Sorting</code> and <code class="language-text">HotChocolate.Data.Projections</code>.</p>
<h1 id="migrating-from-10-to-11" style="position:relative;"><a href="#migrating-from-10-to-11" aria-label="migrating from 10 to 11 permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Migrating from 10 to 11</h1>
<p>We could not avoid conflicts in type names between the old and the new filtering. You can use static imports or fully qualified type names to have the old and the new filtering API in the same file.</p>
<p>If you have full control over the front end, the easiest way to migrate is to replace the old filtering with the new one and make the necessary changes.</p>
<p>If this is not an option for you, you will have to declare new fields and deprecate the old ones once they are no longer used. You may even use the filters on the same fields, but you will end up with conflicting argument names.</p>
<h1 id="getting-started" style="position:relative;"><a href="#getting-started" aria-label="getting started permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Getting started</h1>
<p>You first need to add the new <code class="language-text">HotChocolate.Data</code> package to the project.</p>
<p>It is also required to register filtering on the schema builder:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="38869026157408710000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void ConfigureServcies(IServiceCollection services) {
    services.AddGraphQLServer()
        .AddQueryType<Query>()
        .AddFiltering();
}`, `38869026157408710000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServcies</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    services<span class="token punctuation">.</span><span class="token function">AddGraphQLServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">AddFiltering</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>You are now all set and ready to use the filters. For a pure code first approach, you can use the attribute <code class="language-text">[UseFiltering]</code>, and for code first, you can use the <code class="language-text">UseFiltering()</code> extension method.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="30452049649113810000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`// pure code first
public class Query {
    [UseFiltering]
    public IQueryable<Foo> Foos([Service]DbContext context) => context.Foos;
}

//code first
public class Query : ObjectType {
    protected override void Configure(IObjectTypeDescriptor descriptor) {
        descriptor
            .Field<Resolver>(x => x.Foos(default!))
            .UseFiltering();
    }

    public class Resolver {
        public IQueryable<Foo> Foos([Service]DbContext context) => context.Foos;
    }
}`, `30452049649113810000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// pure code first</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseFiltering</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IQueryable<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span> <span class="token function">Foos</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">DbContext</span> context<span class="token punctuation">)</span> <span class="token operator">=></span> context<span class="token punctuation">.</span>Foos<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//code first</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IObjectTypeDescriptor</span> descriptor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        descriptor
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Field</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Resolver<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span><span class="token function">Foos</span><span class="token punctuation">(</span><span class="token keyword">default</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">UseFiltering</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Resolver</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IQueryable<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span> <span class="token function">Foos</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">DbContext</span> context<span class="token punctuation">)</span> <span class="token operator">=></span> context<span class="token punctuation">.</span>Foos<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h1 id="how-does-it-work" style="position:relative;"><a href="#how-does-it-work" aria-label="how does it work permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>How does it work?</h1>
<p>The old filtering was bundling a field and operation together. With the new filtering, this is now separated. The concept of field and operation still exists, though a little different. A field is always used for navigation. You can think of it as a selector. In code first, a field represents a property of a class. An operation is always an action in the context of a field. Semantically you can look at it as a function. This is often a compare operation, like equals or greater than, but it can also be more arbitrary. In spatial data, many functions can be translated to database queries, like <code class="language-text">ConvexHull()</code> or <code class="language-text">Distance(Geometry g)</code>. Filtering on spatial data is something we plan to support soon. Operations are identified by an integer, which is called the operation ID.</p>
<p>In most cases, a filter type either only contains fields or only operations, but it is in no way restricted to that. A filter type can contain both. This can be useful to provide the necessary metadata. Let's continue the example <code class="language-text">Distance(Geometry g)</code> from above. This function has a parameter <code class="language-text">g</code>. To calculate the distance between two points, the consumer needs to provide one point. The function then returns the distance between these two points. In GraphQL, this now can be combined into one input type:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="86400997050063620000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`input HouseFilterInput {
    position: PointFilterInput
}

input PointFilterInput {
    distanceTo: DistanceToFilterInput;
}

input DistanceToFilterInput {
    &quot;&quot;&quot;The other point where the distance is calculated to&quot;&quot;&quot;
    other: GeometryFilterInput!
    eq: Float
    neq: Float
    gt: Float
    ....
}`, `86400997050063620000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">input</span> HouseFilterInput <span class="token punctuation">{</span>
    <span class="token attr-name">position</span><span class="token punctuation">:</span> PointFilterInput
<span class="token punctuation">}</span>

<span class="token keyword">input</span> PointFilterInput <span class="token punctuation">{</span>
    <span class="token attr-name">distanceTo</span><span class="token punctuation">:</span> DistanceToFilterInput;
<span class="token punctuation">}</span>

<span class="token keyword">input</span> DistanceToFilterInput <span class="token punctuation">{</span>
    <span class="token description string">"""<span class="token language-markdown">The other point where the distance is calculated to</span>"""</span>
    <span class="token attr-name">other</span><span class="token punctuation">:</span> GeometryFilterInput<span class="token operator">!</span>
    <span class="token attr-name">eq</span><span class="token punctuation">:</span> Float
    <span class="token attr-name">neq</span><span class="token punctuation">:</span> Float
    <span class="token attr-name">gt</span><span class="token punctuation">:</span> Float
    <span class="token operator">...</span>.
<span class="token punctuation">}</span></code></pre></div>
<p>The new version of filtering does not only have a new look and feel at the API level but also comes with lots of changes to the Hot Chocolate core. The data package is now completely separated from the core, and no internal APIs are used. Like most of the things in Hot Chocolate, filtering can roughly be broken down into two parts. Schema building and execution. Something we focused on is the new conventions. The goal was to make it easier for users to extend the capabilities of filtering. It is now a lot easier to create custom filters and providers to add new functionality. Both schema building and execution are configurable with conventions.</p>
<h1 id="schema-building" style="position:relative;"><a href="#schema-building" aria-label="schema building permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Schema Building</h1>
<p>Filtering has dedicated input types. <code class="language-text">FilterInputType</code> and <code class="language-text">FilterInputType&lt;T&gt;</code> are extensions of the normal <code class="language-text">InputObjectType</code>. Both filter input types have a similar interface to the normal input type. In addition to <code class="language-text">Name</code>, <code class="language-text">Description</code>, <code class="language-text">Directive</code>, there are a couple of specific descriptors to describe filter capabilities. You can specify fields and operations. There is also <code class="language-text">AllowOr</code> and <code class="language-text">AllowAnd</code>. These two add the special fields needed for these operations. The <code class="language-text">FilterInputType</code> uses the convention for naming and inference of properties. Like the scalar registration on the schema builder, operation types can be bound on the filter convention.</p>
<h1 id="execution" style="position:relative;"><a href="#execution" aria-label="execution permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Execution</h1>
<p>To map an incoming GraphQL filter query to the database, Hot Chocolate needs to know how to handle fields and operations. We initially started by having a lookup table. The filter middleware would access this lookup table and search for a matching handler. Since we did a lot of unnecessary work on runtime, we redesigned this to do more of this work at configuration time. During schema initialization, we annotate the matching handler directly from the convention onto the field. For this, we use a new concept call type interceptors. This comes with a few benefits. Firstly, we know during schema creation if all required handlers are registered. In case we do not find a matching handler, we can now fail early and tell the developer what is missing. Secondly, we do not have to do runtime lookups. All handlers are now directly stored on the fields and are available on visitation. We introduced a new concept called type scoping to use more than one filter convention, e.g., MongoDB and SqlServer.</p>
<h2 id="type-interceptor" style="position:relative;"><a href="#type-interceptor" aria-label="type interceptor permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Type Interceptor</h2>
<p>Type interceptors are one of the new shiny features of version 11. To create an interceptor, you have to extend the class <code class="language-text">TypeInterceptor</code> and register it on the schema builder. You can hook into the schema initialization process and make changes across all types or even introduce new once while rewriting the schema. Countless new possibilities come with these new type interceptors. As an example, use-case, we looked at feature flags. Feature flags can be useful in services that are tenant-based. You may want to hide parts of an API for a specific tenant.</p>
<p>The simplest example might be the following one:</p>
<blockquote>
<p>You have an API with two endpoints. One endpoint is for all users of the website (/graphql). The other endpoint is only accessible by administrators (/admin/graphql). The structure of the APIs is the same, the administrators just have access to more fields and mutations.</p>
</blockquote>
<p>In previous versions, you would have to create two separate type hierarchies with different types. One for normal users and one for administrators. This would bloat the codebase a lot. With type interceptors and <a href="https://chillicream.github.io/hotchocolate/blog/2020/07/16/version-11#configuration-api">the new schema creation api</a> this is a lot cleaner.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="58856651377597350000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void ConfigureServices(IServiceCollection services)
{
    services
        .AddGraphQLServer()
            .AddQueryType<Query>()
            .AddTypeInterceptor<RemoveAdminFieldInterceptor>()
        .AddGraphQLServer(&quot;admin&quot;)
            .AddQueryType<Query>();
}`, `58856651377597350000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services
        <span class="token punctuation">.</span><span class="token function">AddGraphQLServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddTypeInterceptor</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>RemoveAdminFieldInterceptor<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">AddGraphQLServer</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<div
              class="gatsby-code-button-container"
              data-toaster-id="68550544216027910000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class RemoveAdminFieldInterceptor : TypeInterceptor
{
    public override void OnAfterInitialize(
        ITypeDiscoveryContext discoveryContext,
        DefinitionBase definition,
        IDictionary<string, object> contextData)
    {

        if (definition is ObjectTypeDefinition def)
        {
            var fields = (IList<ObjectFieldDefinition>)def.Fields;
            for (var i = fields.Count; i > 0; i--)
            {
                if (fields[i].ContextData.ContainsKey(&quot;admin&quot;))
                {
                    fields.RemoveAt(i);
                }
            }
        }
    }
}

public static class ObjectFieldDescriptorExtensions
{
    public static IObjectFieldDescriptor IsAdmin(this IObjectFieldDescriptor descriptor)
    {
        descriptor.Directive(&quot;IsAdmin&quot;);
        return descriptor;
    }
}

public class ExampleObjectType : ObjectType<Foo> {
    protected override void Configure(IObjectTypeDescriptor<Foo> descriptor){
        descriptor.Field(x => x.AvaiableForAll);
        descriptor.Field(x => x.OnlyForAdmins).IsAdmin();
    }
}`, `68550544216027910000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RemoveAdminFieldInterceptor</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">TypeInterceptor</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnAfterInitialize</span><span class="token punctuation">(</span>
        <span class="token class-name">ITypeDiscoveryContext</span> discoveryContext<span class="token punctuation">,</span>
        <span class="token class-name">DefinitionBase</span> definition<span class="token punctuation">,</span>
        <span class="token class-name">IDictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token punctuation">></span></span> contextData<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>definition <span class="token keyword">is</span> <span class="token class-name">ObjectTypeDefinition</span> def<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> fields <span class="token operator">=</span> <span class="token punctuation">(</span>IList<span class="token operator">&lt;</span>ObjectFieldDefinition<span class="token operator">></span><span class="token punctuation">)</span>def<span class="token punctuation">.</span>Fields<span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> i <span class="token operator">=</span> fields<span class="token punctuation">.</span>Count<span class="token punctuation">;</span> i <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>fields<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>ContextData<span class="token punctuation">.</span><span class="token function">ContainsKey</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    fields<span class="token punctuation">.</span><span class="token function">RemoveAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ObjectFieldDescriptorExtensions</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">IObjectFieldDescriptor</span> <span class="token function">IsAdmin</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IObjectFieldDescriptor</span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Directive</span><span class="token punctuation">(</span><span class="token string">"IsAdmin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> descriptor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleObjectType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span></span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IObjectTypeDescriptor<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span><span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>AvaiableForAll<span class="token punctuation">)</span><span class="token punctuation">;</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>OnlyForAdmins<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">IsAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="scoping" style="position:relative;"><a href="#scoping" aria-label="scoping permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Scoping</h2>
<p>With this release, we introduce a concept called schema scoping. As we write handlers from the convention directly on to the fields, we would limit filtering to just one convention. In case we need two conventions we need two fields and therefore two different types. Schema scoping makes it possible to branch of a type hierarchy and create multiple types from the same definition and then later even join the two branches back together. This feature works on the type reference level. Type references now have a scope that can change the type reference identity.
Scoping only really makes sense in combination with a type interceptor. This interceptor picks up a scoped type and then scopes all its dependencies. The type interceptor also has to rename scoped types to avoid name collisions.
Filtering does the same. In case there is only one filter convention registered, you will not see a difference. As soon as you have multiple conventions registered the name of the convention is added to the type name.</p>
<h2 id="conventions" style="position:relative;"><a href="#conventions" aria-label="conventions permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Conventions</h2>
<p>Conventions will be the configuration interface for extensions on top of the Hot Chocolate core. In version 11 the convention API has been extended. We introduce the named conventions in this release. This way multiple conventions of the same type can be registered on the Schema.
You may have a filter convention for MongoDB and a filter convention for SqlServer.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="81761239870334810000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void ConfigureServices(IServiceCollection services)
{
    services
        .AddGraphQLServer()
            .AddQueryType<Query>()
            // this will be the default convention as no name is specified
            .AddConvention<IFilterConvention, MongoFilterConvention>()
            .AddConvention<IFilterConvention, FilterConvention>(&quot;SqlServer&quot;)
            .AddFiltering();
}`, `81761239870334810000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services
        <span class="token punctuation">.</span><span class="token function">AddGraphQLServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment">// this will be the default convention as no name is specified</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddConvention</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFilterConvention<span class="token punctuation">,</span> MongoFilterConvention<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddConvention</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFilterConvention<span class="token punctuation">,</span> FilterConvention<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"SqlServer"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">AddFiltering</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>You can configure the convention when you declare filtering.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="69978687776761970000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`// pure code first
public class Query {
    [UseFiltering(&quot;SqlServer&quot;)]
    public IQueryable<Foo> Foos([Service]DbContext context) => context.Foos;
}

//code first
public class Query : ObjectType {
    protected override void Configure(IObjectTypeDescriptor descriptor) {
        descriptor
            .Field<Resolver>(x => x.Foos(default!))
            .UseFiltering(&quot;SqlServer&quot;);
    }

    public class Resolver {
        public IQueryable<Foo> Foos([Service]DbContext context) => context.Foos;
    }
}`, `69978687776761970000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// pure code first</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseFiltering</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"SqlServer"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IQueryable<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span> <span class="token function">Foos</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">DbContext</span> context<span class="token punctuation">)</span> <span class="token operator">=></span> context<span class="token punctuation">.</span>Foos<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//code first</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IObjectTypeDescriptor</span> descriptor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        descriptor
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Field</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Resolver<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span><span class="token function">Foos</span><span class="token punctuation">(</span><span class="token keyword">default</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">UseFiltering</span><span class="token punctuation">(</span><span class="token string">"SqlServer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Resolver</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IQueryable<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span> <span class="token function">Foos</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">DbContext</span> context<span class="token punctuation">)</span> <span class="token operator">=></span> context<span class="token punctuation">.</span>Foos<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="whats-next" style="position:relative;"><a href="#whats-next" aria-label="whats next permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>What's next?</h2>
<p>The data package is designed for extensibility. There are a few extensions that we will work on. e.g. filtering for spatial data and a MongoDB provider.
We will as well invest time into documentation and have examples on how to create your own extensions.
There are too many databases to create providers for all of them out of the box. We encourage you, the community, to contribute the extensions you need.
If you are interested, reach out to us in slack in the #contributors channel. We will help you along!</p>]]></content:encoded>
            <enclosure url="https://chillicream.com/static/39a524bbbf103f3e3a84229084ca4eda/ee604/banner-new-filtering-api.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[What is up with 11]]></title>
            <link>https://chillicream.com/blog/2020/07/16/version-11</link>
            <guid>/blog/2020/07/16/version-11</guid>
            <pubDate>Thu, 16 Jul 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[When we at ChilliCream talked the other day, we reflected on the progress on version 11, where we are at this point, and how we got there…]]></description>
            <content:encoded><![CDATA[<p>When we at ChilliCream talked the other day, we reflected on the progress on version 11, where we are at this point, and how we got there. We are now working for almost one year on version 11 and will probably need a couple more months to polish it and get all the features in. When talked about this, we reflected that the actual version 11 was perhaps the 10.3 release when all the pure code-first goodness came.</p>
<p>With version 11, we are re-envisioning what we want Hot Chocolate to be. How we want the API to feel and how extensibility works. We have looked at the things that are difficult for users to understand and made these better accessible. We also looked at how we can take things to the next level with a new execution engine that will support execution plans.</p>
<h2 id="developer-preview" style="position:relative;"><a href="#developer-preview" aria-label="developer preview permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Developer Preview</h2>
<p>Today we are releasing a first developer preview of version 11 with our new configuration API. We call this a developer preview to make it clear that this should not be used in production. This preview is missing a lot of components included in version 10.x like filtering, schema stitching, and many others. As we go forward, we will slowly integrate these missing components and refine the new APIs further.</p>
<p>In order to get started with the developer preview first create a new ASP.NET Core project.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="84321030495380160000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet new web -n Demo`, `84321030495380160000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet new web -n Demo</code></pre></div>
<p>Next, add the ASP.NET Core server package.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="88347941954655830000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`cd Demo
dotnet add package HotChocolate.AspNetCore --version 11.0.0-dev.1`, `88347941954655830000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">cd</span> Demo
dotnet <span class="token function">add</span> package HotChocolate.AspNetCore --version <span class="token number">11.0</span>.0-dev.1</code></pre></div>
<p><a href="https://www.nuget.org/packages/HotChocolate.AspNetCore/11.0.0-dev.1">Hot Chocolate - 11.0.0-dev.1</a></p>
<h2 id="configuration-api" style="position:relative;"><a href="#configuration-api" aria-label="configuration api permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Configuration API</h2>
<p>OK, after all these disclaimers, let us get into some code and talk features.</p>
<p>The first feature that I want to walk you through is the one that everybody will have to use to set up their GraphQL server, and it is also the first breaking change compared to version 11. When setting up a GraphQL server, we start with an ASP.NET Core web project. Our main configuration is located in the <code class="language-text">Startup.cs</code>.</p>
<p>Before we look at how we do it, version 11, let us see how we usually would start in version 10.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="28684884151495530000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void ConfigureServices(IServiceCollection services)
{
    services.AddGraphQL(sp =>
        SchemaBuilder.New()
            .AddQueryType<Query>());
}`, `28684884151495530000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>sp <span class="token operator">=></span>
        SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The code looks nice and simple. Also, the schema builder is a great API that lets us chain configuration. The main issue that we found with this or where we saw that people had problems was when schema stitching came into play or when you wanted to configure request services or change the execution pipeline and so on. Whenever it got a little more complicated, and we had to add more services and integrate other things that were not available on the <code class="language-text">SchemaBuilder</code>, it got complicated. The pity here is also that the <code class="language-text">SchemaBuilder</code> is difficult to extend. This means that components like schema stitching cannot easily add an extension method that brings new configuration functionality to the <code class="language-text">SchemaBuilder</code>.</p>
<p>After long nights we came up with a new approach that brings everything together into one API that is very easy to extend.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="23105234670802145000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void ConfigureServices(IServiceCollection services)
{
    services
        .AddGraphQLServer()
            .AddQueryType<Query>();
}`, `23105234670802145000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services
        <span class="token punctuation">.</span><span class="token function">AddGraphQLServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This little example does not look so much different, but the new API can do a lot more.</p>
<p>First, when in a server context like ASP.NET Core or Azure Functions, we now have this new <code class="language-text">AddGraphQLServer()</code> method that sets up a new schema and executor with additional services the server needs. This API also does not allow just one schema but multiple.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="5064397992084957000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void ConfigureServices(IServiceCollection services)
{
    services
        .AddGraphQLServer()
            .AddQueryType<Query>()
        .AddGraphQLServer(&quot;internal&quot;)
            .AddQueryType<Query>()
            .AddTypeExtension<InternalQueryExtension>();
}`, `5064397992084957000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services
        <span class="token punctuation">.</span><span class="token function">AddGraphQLServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">AddGraphQLServer</span><span class="token punctuation">(</span><span class="token string">"internal"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddTypeExtension</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>InternalQueryExtension<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The above code sets up two schemas. One is our default schema and adds a <code class="language-text">Query</code> type. The other schema is called <code class="language-text">internal</code> and adds the same <code class="language-text">Query</code> type, and extends the <code class="language-text">Query</code> type with some internal queries.</p>
<p>I can put each of these schemas on a different route and for that, we also now support Microsoft`s new routing API.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="33052925919165645000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
{
    app.UseRouting();

    app.UseEndpoints(endpoints =>
    {
        endpoints.MapGraphQL();
        endpoints.MapGraphQL(&quot;/internal&quot;, schemaName: &quot;internal&quot;);
    });
}`, `33052925919165645000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">,</span> <span class="token class-name">IWebHostEnvironment</span> env<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    app<span class="token punctuation">.</span><span class="token function">UseRouting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    app<span class="token punctuation">.</span><span class="token function">UseEndpoints</span><span class="token punctuation">(</span>endpoints <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        endpoints<span class="token punctuation">.</span><span class="token function">MapGraphQL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        endpoints<span class="token punctuation">.</span><span class="token function">MapGraphQL</span><span class="token punctuation">(</span><span class="token string">"/internal"</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">schemaName</span><span class="token punctuation">:</span> <span class="token string">"internal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The new configuration API, in combination with Microsoft`s new routing, makes it easy to map various schemas to various routes and secure and limit them as one pleases.</p>
<p>But there is even more to that. Since we also have some new schema stitching features in mind that will use the unique capabilities of this API. The new configuration API allows to hot reload schema configurations. Meaning you can push schema configurations to a running server. We will have more on this with the next few previews.</p>
<p>Another part that I mentioned is that we can more seamlessly configure a schema. If we wanted, for instance, to add apollo tracing support to our internal schema but not the default schema we can do that now with one line of code.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="33365762839123650000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void ConfigureServices(IServiceCollection services)
{
    services
        .AddGraphQLServer()
            .AddQueryType<Query>()
        .AddGraphQLServer(&quot;internal&quot;)
            .AddQueryType<Query>()
            .AddTypeExtension<InternalQueryExtension>()
            .AddApolloTracing();
}`, `33365762839123650000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services
        <span class="token punctuation">.</span><span class="token function">AddGraphQLServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">AddGraphQLServer</span><span class="token punctuation">(</span><span class="token string">"internal"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddTypeExtension</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>InternalQueryExtension<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">AddApolloTracing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Having configuration bound to specific schemas also means that the performance impact from components like apollo tracing effects only the schema it is applied to. We could also add this globally by adding apollo tracing to the service collection instead of the request builder. In this case, apollo tracing would be applied to all schemas.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="28880349178507903000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void ConfigureServices(IServiceCollection services)
{
    services
        .AddApolloTracing()
        .AddGraphQLServer()
            .AddQueryType<Query>()
        .AddGraphQLServer(&quot;internal&quot;)
            .AddQueryType<Query>()
            .AddTypeExtension<InternalQueryExtension>();
}`, `28880349178507903000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services
        <span class="token punctuation">.</span><span class="token function">AddApolloTracing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">AddGraphQLServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">AddGraphQLServer</span><span class="token punctuation">(</span><span class="token string">"internal"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddTypeExtension</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>InternalQueryExtension<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We are still bringing more APIs over to the new configuration API, and it will take us some time to have everything in here.</p>
<h2 id="subscriptions" style="position:relative;"><a href="#subscriptions" aria-label="subscriptions permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Subscriptions</h2>
<p>Another area that is now super simple to set up is subscriptions. To use in-memory subscriptions, we configure our schema like the following.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="10028660537861933000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void ConfigureServices(IServiceCollection services)
{
    services
        .AddGraphQLServer()
            .AddQueryType<Query>()
            .AddMutationType<Mutation>()
            .AddSubscriptionType<Subscription>()
            .AddInMemorySubscriptions();
}`, `10028660537861933000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services
        <span class="token punctuation">.</span><span class="token function">AddGraphQLServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddMutationType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Mutation<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSubscriptionType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Subscription<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">AddInMemorySubscriptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Again, I can have in-memory subscriptions on one schema and Redis subscriptions on another.</p>
<p>Next, we need to define our <code class="language-text">Mutation</code> type to trigger subscriptions whenever something happens on our schema.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="63557552684209880000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Mutation
{
    public string SendMessage(
        string userId
        string message,
        [Service] ITopicEventSender eventSender)
    {
        eventSender.SendAsync(userId, message);
        return message;
    }
}`, `63557552684209880000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Mutation</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">SendMessage</span><span class="token punctuation">(</span>
        <span class="token keyword">string</span> userId
        <span class="token class-name"><span class="token keyword">string</span></span> message<span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span> <span class="token class-name">ITopicEventSender</span> eventSender<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        eventSender<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> message<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In our example, we have a mutation that can send a text message to a user represented by the user API. To send a message to our subscription bus, we use the <code class="language-text">userId</code> argument as a topic and the <code class="language-text">message</code> argument as the payload of our subscription event. We also injected <code class="language-text">ITopicEventSender</code>, which allows us to send events to our internal event stream. Events are topic-based, and a subscription can subscribe to a topic.</p>
<p>From a GraphQL standpoint, we would like to subscribe to a specific user to receive the messages for that user.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="7928081570312218000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`subscription onMessage {
  onMessage(userId: &quot;123&quot;);
}`, `7928081570312218000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">subscription</span> onMessage <span class="token punctuation">{</span>
  onMessage<span class="token punctuation">(</span><span class="token attr-name">userId</span><span class="token punctuation">:</span> <span class="token string">"123"</span><span class="token punctuation">)</span>;
<span class="token punctuation">}</span></code></pre></div>
<p>This subscription will then pass down to us the message text for user <code class="language-text">123</code> whenever the mutation is invoked with the userId <code class="language-text">123</code>.</p>
<p>Let us have a look at how we would create our subscription type for that.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="62951255955212490000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Subscription
{
    [Subscribe]
    public string OnMessage(
        [Topic] string userId,
        [EventMessage] string message) =>
        message;
}`, `62951255955212490000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Subscription</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Subscribe</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">OnMessage</span><span class="token punctuation">(</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Topic</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> userId<span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">EventMessage</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> message<span class="token punctuation">)</span> <span class="token operator">=></span>
        message<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>If you look at the code above you, do not see any specific code that subscribes to the event system itself. We added an argument <code class="language-text">userId</code> and annotated it to be our topic. The topic argument tells our system what events we would like to receive. Next, we added another argument <code class="language-text">message</code>, which we annotated as our event message or payload. The <code class="language-text">message</code> argument is where the system shall inject us the payload of the events whenever our subscription resolver is invoked.</p>
<p>There are many more variants with the new subscriptions, but I will cover that in a later blog post that only looks at subscriptions and what we can do with them.</p>
<h2 id="extensibility" style="position:relative;"><a href="#extensibility" aria-label="extensibility permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Extensibility</h2>
<p>One of our most significant investments was making the type system even more flexible to allow more complex features. We want to allow for very complex features to become fully transparent. Meaning, features like relay support should not dictate how you build your types. You should not need to handle id serialization or things like that. The system should understand your types and rewrite them into what you want them to be.</p>
<p>To this, there is an even better example. With version 11, we want to bring schema-first or SDL-first up to par with code-first. In SDL-first integrating paging is quite tedious at the moment, since you have to write all the paging and connection types and so forth. But if we could have a feature that can rewrite a schema, we could let people specify a schema like the following.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="7669909615438985000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  users: [User] @paging
}

type User {
  # removed for brevity
}`, `7669909615438985000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="sdl"><pre class="language-sdl"><code class="language-sdl"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">users</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>User<span class="token punctuation">]</span> <span class="token directive function">@paging</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token comment"># removed for brevity</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The configuration would take this initial schema and rewrite it to the following schema that includes all those types necessary for relay pagination.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="36001872210050556000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  users(first: Int, last: Int, after: String, before: String): [UserConnection]
}

type UserConnection {
  pageInfo: PageInfo
  edges: [User]
}

type PageInfo {
  # removed for brevity
}

type User {
  # removed for brevity
}`, `36001872210050556000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="sdl"><pre class="language-sdl"><code class="language-sdl"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">users</span><span class="token punctuation">(</span><span class="token attr-name">first</span><span class="token punctuation">:</span> Int<span class="token punctuation">,</span> <span class="token attr-name">last</span><span class="token punctuation">:</span> Int<span class="token punctuation">,</span> <span class="token attr-name">after</span><span class="token punctuation">:</span> String<span class="token punctuation">,</span> <span class="token attr-name">before</span><span class="token punctuation">:</span> String<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>UserConnection<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">UserConnection</span> <span class="token punctuation">{</span>
  <span class="token attr-name">pageInfo</span><span class="token punctuation">:</span> PageInfo
  <span class="token attr-name">edges</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>User<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">PageInfo</span> <span class="token punctuation">{</span>
  <span class="token comment"># removed for brevity</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token comment"># removed for brevity</span>
<span class="token punctuation">}</span></code></pre></div>
<p>To allow cross-cutting features like this, we are now allowing to intercept type configurations and rewrite them.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="80896395471204300000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void ConfigureServices(IServiceCollection services)
{
    services
        .AddGraphQLServer(&quot;hello&quot;)
            .AddQueryType(d => d
                .Name(&quot;Query&quot;)
                .Field(&quot;hello&quot;)
                .Resolver(&quot;world&quot;))
            .OnBeforeCompleteType<ObjectTypeDefinition>(
                (context, definition, contextData) =>
                {
                    if(definition.Name.Equals(&quot;Query&quot;))
                    {
                        ObjectTypeDescriptor.From(context.DescriptorContext, definition)
                            .Field(&quot;foo&quot;)
                            .Type<StringType>()
                            .Resolver(resolverContext => &quot;say hello&quot;);
                    }
                });
}`, `80896395471204300000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services
        <span class="token punctuation">.</span><span class="token function">AddGraphQLServer</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">AddQueryType</span><span class="token punctuation">(</span>d <span class="token operator">=></span> d
                <span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token string">"Query"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">Resolver</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">OnBeforeCompleteType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ObjectTypeDefinition<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>
                <span class="token punctuation">(</span>context<span class="token punctuation">,</span> definition<span class="token punctuation">,</span> contextData<span class="token punctuation">)</span> <span class="token operator">=></span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>definition<span class="token punctuation">.</span>Name<span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span><span class="token string">"Query"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">{</span>
                        ObjectTypeDescriptor<span class="token punctuation">.</span><span class="token function">From</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>DescriptorContext<span class="token punctuation">,</span> definition<span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Type</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>StringType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">Resolver</span><span class="token punctuation">(</span>resolverContext <span class="token operator">=></span> <span class="token string">"say hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In the above example, I am intercepting the configuration of the <code class="language-text">Query</code> type and add a simple foo field to it. This feature allows for so much more since you can write very sophisticated interceptors that scope types and branch them into separate type trees. We will rewrite and decouple a lot of our current features with this.</p>
<h2 id="execution-engine" style="position:relative;"><a href="#execution-engine" aria-label="execution engine permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Execution Engine</h2>
<p>With this first dev preview, we are bringing the first part of our new execution engine in. It does not yet contain the execution plan bits but has a lot of the memory optimizations built-in. The execution engine now also is much easier to extend with features. All of the execution configurations are as-well backed into our new configuration API.</p>
<p>If I, for instance, wanted to use the persisted queries execution flow, I could do so by using the following configuration.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="6547838633028702000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void ConfigureServices(IServiceCollection services)
{
    services
        .AddGraphQLServer(&quot;hello&quot;)
            .AddQueryType(d => d
                .Name(&quot;Query&quot;)
                .Field(&quot;hello&quot;)
                .Resolver(&quot;world&quot;))
            .UsePersistedQueryPipeline();
}`, `6547838633028702000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services
        <span class="token punctuation">.</span><span class="token function">AddGraphQLServer</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">AddQueryType</span><span class="token punctuation">(</span>d <span class="token operator">=></span> d
                <span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token string">"Query"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">Resolver</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">UsePersistedQueryPipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="summary" style="position:relative;"><a href="#summary" aria-label="summary permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Summary</h2>
<p>There are a ton more features in this preview, so many really that it is to much to go into every one of them. Also, we have just begun to bring our various bits together and hope to integrate those now more quickly. Over the next weeks, we will share with every new preview more new features with you and will drill down more specifically into those. This first post is meant to kick things off. Give us feedback on how you like the feel of the new configuration API.</p>]]></content:encoded>
            <enclosure url="https://chillicream.com/static/6dc866c3f6dd0a7231bad754f4c69551/ee604/banner-v11.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Get started with Hot Chocolate and Entity Framework]]></title>
            <link>https://chillicream.com/blog/2020/03/18/entity-framework</link>
            <guid>/blog/2020/03/18/entity-framework</guid>
            <pubDate>Wed, 18 Mar 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[In this post I will walk you through how to build a GraphQL Server using Hot Chocolate and Entity Framework. Entity Framework is an OR…]]></description>
            <content:encoded><![CDATA[<p>In this post I will walk you through how to build a GraphQL Server using <em>Hot Chocolate</em> and <em>Entity Framework</em>.</p>
<p><em>Entity Framework</em> is an OR-mapper from Microsoft that implements the unit-of-work pattern. This basically means that with <em>Entity Framework</em> we work against a <code class="language-text">DbContext</code> and once in a while commit changes aggregated on that context to the database by invoking <code class="language-text">SaveChanges</code>.</p>
<p>With <em>Entity Framework</em> we can write database queries with <em>LINQ</em> and do not have to deal with <em>SQL</em> directly. This means that we can compile our database queries and can detect query errors before we run our code.</p>
<h2 id="introduction" style="position:relative;"><a href="#introduction" aria-label="introduction permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Introduction</h2>
<p>This blog post is based on the Contoso University example application used by Microsoft to demonstrate the usage of <em>Entity Framework</em> with ASP.NET Core.</p>
<p>In this blog post we will take that example and build with it a simple GraphQL server for the university website. With it, we can query students, courses, and instructor information.</p>
<p>Before we get started let us setup our server project.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="80153114611944130000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`mkdir ContosoUniversity
dotnet new web`, `80153114611944130000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">mkdir</span> ContosoUniversity
dotnet new web</code></pre></div>
<p>Next wee need to add <em>Entity Framework</em> to our project.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="50603903380260370000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet add package Microsoft.EntityFrameworkCore`, `50603903380260370000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet <span class="token function">add</span> package Microsoft.EntityFrameworkCore</code></pre></div>
<p>Last but not least we are adding the SQLLite <em>Entity Framework</em> provided in order to have a lightweight database.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="71296918124403790000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet add package Microsoft.EntityFrameworkCore.Sqlite`, `71296918124403790000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet <span class="token function">add</span> package Microsoft.EntityFrameworkCore.Sqlite</code></pre></div>
<p>For our data we have three models representing the student, the enrollments and the courses.</p>
<p>The student entity has some basic data about the student like the first name, the last name or the date when the student first enrolled into the university.</p>
<p>The enrollment entity represents the enrollment of a student to a specific course. The enrollment entity not only represents the relationship between the student and the course but also holds the Grade that a student achieved in that course.</p>
<p>Last but not least we have the course to which many students are enrolled to. The course has a title and a property defining the credit that a student can achieve in that course.</p>
<p>Let’s copy our models into our project.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="89472387079587050000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace ContosoUniversity
{
    public class Student
    {
        [Key]
        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public int Id { get; set; }
        public string LastName { get; set; }
        public string FirstMidName { get; set; }
        public DateTime EnrollmentDate { get; set; }

        public virtual ICollection<Enrollment> Enrollments { get; set; }
    }

    public enum Grade
    {
        A, B, C, D, F
    }

    public class Enrollment
    {
        [Key]
        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public int EnrollmentId { get; set; }
        public int CourseId { get; set; }
        public int StudentId { get; set; }
        public Grade? Grade { get; set; }

        public virtual Course Course { get; set; }
        public virtual Student Student { get; set; }
    }

    public class Course
    {
        [Key]
        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public int CourseId { get; set; }
        public string Title { get; set; }
        public int Credits { get; set; }

        public virtual ICollection<Enrollment> Enrollments { get; set; }
    }
}`, `89472387079587050000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>ComponentModel<span class="token punctuation">.</span>DataAnnotations</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>ComponentModel<span class="token punctuation">.</span>DataAnnotations<span class="token punctuation">.</span>Schema</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">ContosoUniversity</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Key</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DatabaseGenerated</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DatabaseGeneratedOption<span class="token punctuation">.</span>Identity<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstMidName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> EnrollmentDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name">ICollection<span class="token punctuation">&lt;</span>Enrollment<span class="token punctuation">></span></span> Enrollments <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Grade</span>
    <span class="token punctuation">{</span>
        A<span class="token punctuation">,</span> B<span class="token punctuation">,</span> C<span class="token punctuation">,</span> D<span class="token punctuation">,</span> F
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Enrollment</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Key</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DatabaseGenerated</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DatabaseGeneratedOption<span class="token punctuation">.</span>Identity<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> EnrollmentId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> CourseId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> StudentId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Grade<span class="token punctuation">?</span></span> Grade <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name">Course</span> Course <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name">Student</span> Student <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Course</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Key</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DatabaseGenerated</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DatabaseGeneratedOption<span class="token punctuation">.</span>Identity<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> CourseId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Title <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Credits <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name">ICollection<span class="token punctuation">&lt;</span>Enrollment<span class="token punctuation">></span></span> Enrollments <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>For our models we do need a <code class="language-text">DbContext</code> against which we can interact with our database.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="42684057299083950000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`using Microsoft.EntityFrameworkCore;

namespace ContosoUniversity
{
    public class SchoolContext : DbContext
    {
        public DbSet<Student> Students { get; set; }
        public DbSet<Enrollment> Enrollments { get; set; }
        public DbSet<Course> Courses { get; set; }

        protected override void OnConfiguring(DbContextOptionsBuilder options)
        {
            options.UseSqlite(&quot;Data Source=uni.db&quot;);
        }

        protected override void OnModelCreating(ModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Student>()
                .HasMany(t => t.Enrollments)
                .WithOne(t => t.Student)
                .HasForeignKey(t => t.StudentId);

            modelBuilder.Entity<Enrollment>()
                .HasIndex(t => new { t.StudentId, t.CourseId })
                .IsUnique();

            modelBuilder.Entity<Course>()
                .HasMany(t => t.Enrollments)
                .WithOne(t => t.Course)
                .HasForeignKey(t => t.CourseId);
        }
    }
}`, `42684057299083950000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>EntityFrameworkCore</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">ContosoUniversity</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SchoolContext</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">DbContext</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">DbSet<span class="token punctuation">&lt;</span>Student<span class="token punctuation">></span></span> Students <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">DbSet<span class="token punctuation">&lt;</span>Enrollment<span class="token punctuation">></span></span> Enrollments <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">DbSet<span class="token punctuation">&lt;</span>Course<span class="token punctuation">></span></span> Courses <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnConfiguring</span><span class="token punctuation">(</span><span class="token class-name">DbContextOptionsBuilder</span> options<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            options<span class="token punctuation">.</span><span class="token function">UseSqlite</span><span class="token punctuation">(</span><span class="token string">"Data Source=uni.db"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnModelCreating</span><span class="token punctuation">(</span><span class="token class-name">ModelBuilder</span> modelBuilder<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            modelBuilder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Entity</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Student<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">HasMany</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Enrollments<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">WithOne</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Student<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">HasForeignKey</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>StudentId<span class="token punctuation">)</span><span class="token punctuation">;</span>

            modelBuilder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Entity</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Enrollment<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">HasIndex</span><span class="token punctuation">(</span>t <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span>StudentId<span class="token punctuation">,</span> t<span class="token punctuation">.</span>CourseId <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">IsUnique</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            modelBuilder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Entity</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Course<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">HasMany</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Enrollments<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">WithOne</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Course<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">HasForeignKey</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>CourseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The <code class="language-text">SchoolContext</code> exposes access to our entities through <code class="language-text">DbSet</code>. We can query a <code class="language-text">DbSet&lt;T&gt;</code> with <em>LINQ</em> or add new entities to it. Moreover, our <code class="language-text">ShoolContext</code> has some configuration that defines the relations between our entities.</p>
<p>Copy the context as well to our project.</p>
<p>Next, we need to register our <code class="language-text">SchoolContext</code> with the dependency injection so that our GraphQL server can request instances of it. For that lets open our <code class="language-text">Startup.cs</code> and replace the <code class="language-text">ConfigureServices</code> method with the following code.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="48963903871717230000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void ConfigureServices(IServiceCollection services)
{
    services.AddDbContext<SchoolContext>();
}`, `48963903871717230000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDbContext</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SchoolContext<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>There is one last thing to finish up our preparations with the database and to get into GraphQL.</p>
<p>We somehow need to create our database. Since we are in this post only exploring how we can query data with entity framework and GraphQL we will also need to seed some data.</p>
<p>Add the following method to the <code class="language-text">Startup.cs</code>:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="28056446826404024000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`private static void InitializeDatabase(IApplicationBuilder app)
{
    using (var serviceScope = app.ApplicationServices.GetService<IServiceScopeFactory>().CreateScope())
    {
        var context = serviceScope.ServiceProvider.GetRequiredService<SchoolContext>();
        if (context.Database.EnsureCreated())
        {
            var course = new Course { Credits = 10, Title = &quot;Object Oriented Programming 1&quot; };

            context.Enrollments.Add(new Enrollment
            {
                Course = course,
                Student = new Student { FirstMidName = &quot;Rafael&quot;, LastName = &quot;Foo&quot;, EnrollmentDate = DateTime.UtcNow }
            });
            context.Enrollments.Add(new Enrollment
            {
                Course = course,
                Student = new Student { FirstMidName = &quot;Pascal&quot;, LastName = &quot;Bar&quot;, EnrollmentDate = DateTime.UtcNow }
            });
            context.Enrollments.Add(new Enrollment
            {
                Course = course,
                Student = new Student { FirstMidName = &quot;Michael&quot;, LastName = &quot;Baz&quot;, EnrollmentDate = DateTime.UtcNow }
            });
            context.SaveChangesAsync();
        }
    }
}`, `28056446826404024000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">InitializeDatabase</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> serviceScope <span class="token operator">=</span> app<span class="token punctuation">.</span>ApplicationServices<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IServiceScopeFactory<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">CreateScope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> context <span class="token operator">=</span> serviceScope<span class="token punctuation">.</span>ServiceProvider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRequiredService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SchoolContext<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>Database<span class="token punctuation">.</span><span class="token function">EnsureCreated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> course <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Course</span> <span class="token punctuation">{</span> Credits <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> Title <span class="token operator">=</span> <span class="token string">"Object Oriented Programming 1"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

            context<span class="token punctuation">.</span>Enrollments<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Enrollment</span>
            <span class="token punctuation">{</span>
                Course <span class="token operator">=</span> course<span class="token punctuation">,</span>
                Student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Student</span> <span class="token punctuation">{</span> FirstMidName <span class="token operator">=</span> <span class="token string">"Rafael"</span><span class="token punctuation">,</span> LastName <span class="token operator">=</span> <span class="token string">"Foo"</span><span class="token punctuation">,</span> EnrollmentDate <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            context<span class="token punctuation">.</span>Enrollments<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Enrollment</span>
            <span class="token punctuation">{</span>
                Course <span class="token operator">=</span> course<span class="token punctuation">,</span>
                Student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Student</span> <span class="token punctuation">{</span> FirstMidName <span class="token operator">=</span> <span class="token string">"Pascal"</span><span class="token punctuation">,</span> LastName <span class="token operator">=</span> <span class="token string">"Bar"</span><span class="token punctuation">,</span> EnrollmentDate <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            context<span class="token punctuation">.</span>Enrollments<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Enrollment</span>
            <span class="token punctuation">{</span>
                Course <span class="token operator">=</span> course<span class="token punctuation">,</span>
                Student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Student</span> <span class="token punctuation">{</span> FirstMidName <span class="token operator">=</span> <span class="token string">"Michael"</span><span class="token punctuation">,</span> LastName <span class="token operator">=</span> <span class="token string">"Baz"</span><span class="token punctuation">,</span> EnrollmentDate <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            context<span class="token punctuation">.</span><span class="token function">SaveChangesAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">InitializeDatabase</code> ensures that our database is created and seeds some initial data so that we can do some queries.</p>
<p>Next call <code class="language-text">InitializeDatabase</code> in the first line of the <code class="language-text">Configure</code> method in the <code class="language-text">Startup.cs</code>. The updated <code class="language-text">Configure</code> method should look like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="73544425089112830000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
{
    InitializeDatabase(app);

    if (env.IsDevelopment())
    {
        app.UseDeveloperExceptionPage();
    }

    app.UseRouting();

    app.UseEndpoints(endpoints =>
    {
        endpoints.MapGet(&quot;/&quot;, async context =>
        {
            await context.Response.WriteAsync(&quot;Hello World!&quot;);
        });
    });
}`, `73544425089112830000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">,</span> <span class="token class-name">IWebHostEnvironment</span> env<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">InitializeDatabase</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token function">IsDevelopment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        app<span class="token punctuation">.</span><span class="token function">UseDeveloperExceptionPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    app<span class="token punctuation">.</span><span class="token function">UseRouting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    app<span class="token punctuation">.</span><span class="token function">UseEndpoints</span><span class="token punctuation">(</span>endpoints <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        endpoints<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> context <span class="token operator">=></span>
        <span class="token punctuation">{</span>
            <span class="token keyword">await</span> context<span class="token punctuation">.</span>Response<span class="token punctuation">.</span><span class="token function">WriteAsync</span><span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We are basically done with our preparations. So far, we have defined our models, created our <code class="language-text">ShoolContext</code> through which we can query the database. We also registered the <code class="language-text">ShoolContext</code> with the dependency injection container and added some initialization logic so that our database is created with some initial data. With that settled let us move on and talk about GraphQL.</p>
<h2 id="graphql-schema" style="position:relative;"><a href="#graphql-schema" aria-label="graphql schema permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>GraphQL Schema</h2>
<p>Everything in GraphQL resolves around a schema. The schema defines the types that are available and the data that our GraphQL server exposes.</p>
<p>In GraphQL we interact with the data through root types. In this post we will only query data which means that we only need to define the query root type.</p>
<p>The query root type exposes fields which are called root fields. The root fields define how we can query for data. For our university GraphQL server we want to be able to query the students and then drill deeper into what courses a student is enrolled to or what grade he/she has in a specific course.</p>
<p>Before we actually can put some GraphQL types in our project we again need to add some packages. This time we need to add the <code class="language-text">HotChocolate.AspNetCore</code> package to enable the core GraphQL server functionality. Also we need the <code class="language-text">HotChocolate.Types.Selections</code> package to be able to use <em>Entity Framework</em> projections.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="2924382542910364000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet add package HotChocolate.AspNetCore
dotnet add package HotChocolate.Types.Selections`, `2924382542910364000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet <span class="token function">add</span> package HotChocolate.AspNetCore
dotnet <span class="token function">add</span> package HotChocolate.Types.Selections</code></pre></div>
<p>With <em>Hot Chocolate</em> and the <em>pure code-first</em> approach the query root type is represented by a simple class. Public methods or public properties on that type are inferred as fields of our GraphQL type.</p>
<p>The following class:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="12359042679841626000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Query
{
    /// <summary>
    /// Gets all students.
    /// </summary>
    public IQueryable<Student> GetStudents() => throw new NotImplementedException();
}`, `12359042679841626000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
<span class="token punctuation">{</span>
    <span class="token comment">/// &lt;summary></span>
    <span class="token comment">/// Gets all students.</span>
    <span class="token comment">/// &lt;/summary></span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IQueryable<span class="token punctuation">&lt;</span>Student<span class="token punctuation">></span></span> <span class="token function">GetStudents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NotImplementedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Is translated to the following GraphQL type:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="37320319159545300000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  &quot;&quot;&quot;
  Gets all students
  &quot;&quot;&quot;
  students: [Student]
}`, `37320319159545300000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token description string">"""<span class="token language-markdown">
  Gets all students
  </span>"""</span>
  <span class="token attr-name">students</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Student<span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<blockquote>
<p><em>Hot Chocolate</em> will apply GraphQL conventions to inferred types which will remove the verb <code class="language-text">Get</code> for instance from the method or if it is an async method the postfix <code class="language-text">async</code> will be removed. These conventions can be configured.</p>
</blockquote>
<p>In GraphQL we call the method <code class="language-text">GetStudents</code> a resolver since it resolves for us some data. Resolvers are executed independent from one another and each resolver has dependencies on different resources. Everything that a resolver needs can be injected as a method parameter. Our <code class="language-text">GetStudents</code> resolver for instance needs the <code class="language-text">ShoolContext</code> to fetch some data. By using argument injection the execution engine can better optimize how to execute a query.</p>
<p>OK, with this knowledge lets implement our <code class="language-text">Query</code> class.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="89930029495925030000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Query
{
    /// <summary>
    /// Gets all students.
    /// </summary>
    public IQueryable<Student> GetStudents([Service]SchoolContext schoolContext) =>
        schoolContext.Students;
}`, `89930029495925030000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
<span class="token punctuation">{</span>
    <span class="token comment">/// &lt;summary></span>
    <span class="token comment">/// Gets all students.</span>
    <span class="token comment">/// &lt;/summary></span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IQueryable<span class="token punctuation">&lt;</span>Student<span class="token punctuation">></span></span> <span class="token function">GetStudents</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">SchoolContext</span> schoolContext<span class="token punctuation">)</span> <span class="token operator">=></span>
        schoolContext<span class="token punctuation">.</span>Students<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Our query class up there would already work. But only for the first level. It basically would resolve all students but we could not drill deeper. The enrollments would always be empty. In <em>Hot Chocolate</em> we have a concept of field middleware that can alter the execution pipeline of our field resolver.</p>
<p>The middleware order is important since multiple middleware form a field execution pipeline.</p>
<p>In our case we want <em>Entity Framework</em> projections to work so that we can drill into data in our GraphQL query. For this we can add the selection middleware. Middleware in <em>pure code-first</em> are represented by simple attributes. Since middleware order is important the order of these middleware attributes is important too. Middleware attributes always start with the verb <code class="language-text">Use</code>. So, for our selections middleware we add <code class="language-text">[UseSelection]</code>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="73949158424098830000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`using System.Linq;
using HotChocolate;
using HotChocolate.Types;

namespace ContosoUniversity
{
    public class Query
    {
        /// <summary>
        /// Gets all students.
        /// </summary>
        [UseSelection]
        public IQueryable<Student> GetStudents([Service]SchoolContext schoolContext) =>
            schoolContext.Students;
    }
}`, `73949158424098830000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Linq</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">HotChocolate</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">HotChocolate<span class="token punctuation">.</span>Types</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">ContosoUniversity</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
    <span class="token punctuation">{</span>
        <span class="token comment">/// &lt;summary></span>
        <span class="token comment">/// Gets all students.</span>
        <span class="token comment">/// &lt;/summary></span>
        <span class="token punctuation">[</span>UseSelection<span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IQueryable<span class="token punctuation">&lt;</span>Student<span class="token punctuation">></span></span> <span class="token function">GetStudents</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">SchoolContext</span> schoolContext<span class="token punctuation">)</span> <span class="token operator">=></span>
            schoolContext<span class="token punctuation">.</span>Students<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Let’s paste this file into our project.</p>
<p>I pointed out that in GraphQL everything resolves around a schema. In order to get our GraphQL server up and running we need to create and host a GraphQL schema in our server. In <em>Hot Chocolate</em> we define a schema with the <code class="language-text">SchemaBuilder</code>.</p>
<p>Open the <code class="language-text">Startup.cs</code> again and then let us add a simple schema with our <code class="language-text">Query</code> type.</p>
<p>For that replace the <code class="language-text">ConfigureServices</code> method with the following code.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="92485591382989950000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void ConfigureServices(IServiceCollection services)
{
    services.AddDbContext<SchoolContext>();

    services.AddGraphQL(
        SchemaBuilder.New()
            .AddQueryType<Query>()
            .Create(),
        new QueryExecutionOptions { ForceSerialExecution = true });
}`, `92485591382989950000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDbContext</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SchoolContext<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>
        SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">QueryExecutionOptions</span> <span class="token punctuation">{</span> ForceSerialExecution <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The above code registers a GraphQL schema with the dependency injection container.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="8663896081606781000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`SchemaBuilder.New()
    .AddQueryType<Query>()
    .Create()`, `8663896081606781000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p>The schema builder registers our <code class="language-text">Query</code> class as GraphQL <code class="language-text">Query</code> root type.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="21806261559718388000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`new QueryExecutionOptions { ForceSerialExecution = true }`, `21806261559718388000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">new</span> <span class="token constructor-invocation class-name">QueryExecutionOptions</span> <span class="token punctuation">{</span> ForceSerialExecution <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token punctuation">}</span></code></pre></div>
<p>Also, we are defining that the execution engine shall be forced to execute serially since <code class="language-text">DbContext</code> is not thread-safe.</p>
<blockquote>
<p>The upcoming version 11 of <em>Hot Chocolate</em> uses <code class="language-text">DbContext</code> pooling to use multiple <code class="language-text">DbContext</code> instances in one request. This allows version 11 to parallelize data fetching better with <em>Entity Framework</em>.</p>
</blockquote>
<p>In order to enable our ASP.NET Core server to process GraphQL requests we need to register the <em>Hot Chocolate</em> GraphQL middleware.</p>
<p>For that we need to replace the <code class="language-text">Configure</code> method of our <code class="language-text">Startup.cs</code> with the following code.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="5295612497425651000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
{
    InitializeDatabase(app);

    if (env.IsDevelopment())
    {
        app.UseDeveloperExceptionPage();
    }

    app.UseRouting();

    app.UseGraphQL();

    app.UseEndpoints(endpoints =>
    {
        endpoints.MapGet(&quot;/&quot;, async context =>
        {
            await context.Response.WriteAsync(&quot;Hello World!&quot;);
        });
    });
}`, `5295612497425651000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">,</span> <span class="token class-name">IWebHostEnvironment</span> env<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">InitializeDatabase</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token function">IsDevelopment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        app<span class="token punctuation">.</span><span class="token function">UseDeveloperExceptionPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    app<span class="token punctuation">.</span><span class="token function">UseRouting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    app<span class="token punctuation">.</span><span class="token function">UseGraphQL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    app<span class="token punctuation">.</span><span class="token function">UseEndpoints</span><span class="token punctuation">(</span>endpoints <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        endpoints<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> context <span class="token operator">=></span>
        <span class="token punctuation">{</span>
            <span class="token keyword">await</span> context<span class="token punctuation">.</span>Response<span class="token punctuation">.</span><span class="token function">WriteAsync</span><span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">app.UseGraphQL();</code> registers the GraphQL middleware with the server. Since we did not specify any path the middleware will run on the root of our server. Like with field middleware the order of ASP.NET Core middleware is important.</p>
<h2 id="testing-a-graphql-server" style="position:relative;"><a href="#testing-a-graphql-server" aria-label="testing a graphql server permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Testing a GraphQL Server</h2>
<p>In order to now query our GraphQL server we need a GraphQL IDE to formulate queries and explore the schema. If you want a deluxe GraphQL IDE as an application, you can get our very own Banana Cakepop which can be downloaded <a href="/docs/bananacakepop">here</a>.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://chillicream.com/static/83aff166a4b32131eb13063c3d9f7a17/21335/banana-cake-pop.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 61%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAC7UlEQVQoz2WS+0sUURTH58cIoh8CIfBPiH6zoDSkxMRHSq1ZSmS4km4Pi2Ih+0n6AyR31x0yKyiKgkCiKBIJsqRg87WgK/jY92tmZ3ceO8+793RmpCXqwpd75sy9n/O4h6lr6j7e2DP45MQ5z2RdhztY77oe7OwbYrsuDrAtZy+xHT39bOeFfvbqjTvso6nHrKvvCtvQfCZ4st3FNra62FPt54PNXb2Tbd2Xp0939R5lahoGbz98/QXCkU34ubIBS2tbEE3lYTuWgp3tGCQSKUgm01AsFsFenFCCaDIDsWgCNjZjsL6F+04KMlwJZt598DC1bd7hN7OLIPFZPZ1OmlJJsChQq6JrFtCKBWgj538Ry6qUVds2UbodLLK+NsDsPTLgmZ75BlwmSTa3tmk6nQZV18EkBCqVClQorYqiDNME1TDBKJfBVFWgGBF/EBu4vLLiZvYg8OnMd8in4mRtPUJj0SjIqgYCz4MmlkDTNZCNMpQNFXcFZK2MAQ0wFcUJ6AABdoHLy25m37Ehz7P3P6DIZ0ksnqDZbBYUBBLThOqyb1HqmBZmriHQ0jS0K7a/ClxdXXUz++uveZ5/DIGhSiSTzVGO4xxgSVZBx7IMQwON6NgyEwG2LPhnVYHhcNjNHGi85Xnx6RdoSomkM1nK5fNQkmRQZAUscxegGzromJGOvVVxlyQJVOyfjpmijxqG4QBDoZCbqWm663n5eelvIC1wAhVFiRJC7OhUlmWaRz+ODo1iW+KJJJUlyfHbUhQFO2TC/Py8mznYcs/zanYZyxPNTC5HChxHCoJIUtkcwcmwIxPMhvA8T6RikSzuRAknSsTQNcdvS9M0036ghYUFN1Pbev/m268RHAEZ+EIBSjjAHF+END6OU7JlgSiKkMvlQBAEiMdjzred0R/ZrcBqYG5uboipqes5POx9MDo9xXr9/oA3EAh4x8fH0fY7mpiY8Pp8Pkd+v88bwDPBIIsKOmJZ1rkzNjY2OjIycug35TkdbjqlVKMAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Hot Chocolate"
        title="Hot Chocolate"
        src="https://chillicream.com/static/83aff166a4b32131eb13063c3d9f7a17/5a190/banana-cake-pop.png"
        srcset="https://chillicream.com/static/83aff166a4b32131eb13063c3d9f7a17/772e8/banana-cake-pop.png 200w,
https://chillicream.com/static/83aff166a4b32131eb13063c3d9f7a17/e17e5/banana-cake-pop.png 400w,
https://chillicream.com/static/83aff166a4b32131eb13063c3d9f7a17/5a190/banana-cake-pop.png 800w,
https://chillicream.com/static/83aff166a4b32131eb13063c3d9f7a17/21335/banana-cake-pop.png 1082w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>But you can also opt for <em>Playground</em> and host a simple GraphQL IDE as a middleware with the server. If you want to use playground add the following package to the project:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="41713253435833250000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet add package HotChocolate.AspNetCore.Playground`, `41713253435833250000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet <span class="token function">add</span> package HotChocolate.AspNetCore.Playground</code></pre></div>
<p>After that we need to register the playground middleware. For that add <code class="language-text">app.UsePlayground();</code> after <code class="language-text">app.UseGraphQL()</code>. By default, playground is hosted on <code class="language-text">/playground</code> meaning in our case <code class="language-text">http://localhost:5000/playground</code>.</p>
<p>The <code class="language-text">Configure</code> method should now look like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="889162952297462000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
{
    InitializeDatabase(app);

    if (env.IsDevelopment())
    {
        app.UseDeveloperExceptionPage();
    }

    app.UseRouting();

    app.UseGraphQL();
    app.UsePlayground();

    app.UseEndpoints(endpoints =>
    {
        endpoints.MapGet(&quot;/&quot;, async context =>
        {
            await context.Response.WriteAsync(&quot;Hello World!&quot;);
        });
    });
}`, `889162952297462000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">,</span> <span class="token class-name">IWebHostEnvironment</span> env<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">InitializeDatabase</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token function">IsDevelopment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        app<span class="token punctuation">.</span><span class="token function">UseDeveloperExceptionPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    app<span class="token punctuation">.</span><span class="token function">UseRouting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    app<span class="token punctuation">.</span><span class="token function">UseGraphQL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token punctuation">.</span><span class="token function">UsePlayground</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    app<span class="token punctuation">.</span><span class="token function">UseEndpoints</span><span class="token punctuation">(</span>endpoints <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        endpoints<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> context <span class="token operator">=></span>
        <span class="token punctuation">{</span>
            <span class="token keyword">await</span> context<span class="token punctuation">.</span>Response<span class="token punctuation">.</span><span class="token function">WriteAsync</span><span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Let’s test our GraphQL server.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="61323213039481850000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet run --urls http://localhost:5000`, `61323213039481850000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet run --urls http://localhost:5000</code></pre></div>
<h3 id="testing-with-banana-cakepop" style="position:relative;"><a href="#testing-with-banana-cakepop" aria-label="testing with banana cakepop permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Testing with Banana Cakepop</h3>
<p>If you have chosen <em>Banana Cakepop</em> to test and explore the GraphQL Schema open it now.</p>
<p><em>Banana Cakepop</em> will open with an empty tab. In the address bar type in the URL of our GraphQL server <code class="language-text">http://localhost:5000</code> and hit <code class="language-text">enter</code>.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://chillicream.com/static/69e0f04fc210498531ec8707b5e18cd5/010c2/banana-cake-pop-address.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 38.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABKElEQVQoz6XQzU7CQBAH8H0i4SSgCYLGRDE+B9arYjjaD6IXn8BXAyEhJLYWS6Htbrvd/p0u5aCJJuokv8xkJrO7WWZaDkzLhmU7ZIT26SX2Gh20uj0cnlzg4LiHZucMrVL3HPXGEWr7bdR0rjS26s0O2NtyhVfPxzIIsY4S3D89wxg+4nr4AONuRBxcDSz0b030b0xdGwOb+vY272rNAROcI45jlBFFEYLgHeswRBiuUCiF3wYLaTkIAriuC9/3tdlspo3HYywWC20yecF0OqXeBPP5HJ7n6Z2vWJpl2MQJos0GKs8hpYQQHOXLOU+QpoKkVPNKQnOBjPYy6mfZZ0zSIbFIIWgoVUEUcspagapX1jvQM/kNltMBMlfg5a2U/4upP3z8T/EB5xMvQR0iOUAAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Hot Chocolate"
        title="Hot Chocolate"
        src="https://chillicream.com/static/69e0f04fc210498531ec8707b5e18cd5/5a190/banana-cake-pop-address.png"
        srcset="https://chillicream.com/static/69e0f04fc210498531ec8707b5e18cd5/772e8/banana-cake-pop-address.png 200w,
https://chillicream.com/static/69e0f04fc210498531ec8707b5e18cd5/e17e5/banana-cake-pop-address.png 400w,
https://chillicream.com/static/69e0f04fc210498531ec8707b5e18cd5/5a190/banana-cake-pop-address.png 800w,
https://chillicream.com/static/69e0f04fc210498531ec8707b5e18cd5/c1b63/banana-cake-pop-address.png 1200w,
https://chillicream.com/static/69e0f04fc210498531ec8707b5e18cd5/010c2/banana-cake-pop-address.png 1425w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Once our GraphQL IDE has fetched the schema we can start exploring it. On the left-hand side click on the <code class="language-text">Book</code> button. The left-hand side now shows us the root types and the root fields.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 681px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://chillicream.com/static/943d3b068d10d321830906928d7ac4ef/8ce52/banana-cake-pop-root-types.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC1ElEQVQ4y52Sa0uTYQCG318QRHTOznRwFWInwjC3KNym5iGziKDCojI1zKg1NzdLIiwLKk2KEC39Ulb/oQ8dcJs6N3eybTrdef9gV+/7LrWoUPpw83A/h4v7fp5HaDyqTrecOUR13YG0svogqnwVhwoKUCqV4qikQJmRSqVakARFYQ0K9eX0Fu0lNmkuka2tJbe8AUVRLTml19hZXM+O4jq2qq+yTVNLdpHoSxrYVdZITsVNcit17KnSs/eUkf2nTQirS8zpNcda2Fjeml6uNrLpeCva6y/ZcbqNSn0P5bpuym51s0xjZNFhHYuP6Fl8tIklhUaWakwsL77LqtJ7ZFW0sb7qEcL6EgP5F9rJv/iILRUmGh7009zxDsOzt5ifv6el6wPmzgGM4pzx2YzeyuuSJN/cMYCp8z3mro8IG0qbOVzzhH1n28g+cYcRh5uAdwyfx4XLacfjchCZniQqK/QPZdalfcLaEiOby81kFRtk4KevNpxOB2POMezDI4zY7Xi9PjweL26PZx55EdaJwKwiAyvUt1FU3eXbkJhoaorRwDhjwe+MyzAPgUCAiYmJf2pychK/3y/e4TEjedXtcmXFyVZsDi/xcBjndJBv4XFGhoaxWq0Eg0FSqRSxWIx4PE4ikZCVTCZlL81PiUHkyrln7nPg/EMZOOz0kUomiEWixB0BpidC+AN+fL5MUgksye12y3PSKHkJKKUU1mj1YmU9Kwp1bK9syQATcaajESJDPvwuHxabVU5ps9lwuVzinXplb7FYGBwclL2UUgbmnHvMwfpX7K95Qd6VDrGyR04YDovARIxYPDZbT9JMvV8rSz4ajRIKhRBUN3rRv/mCof8rWn0/Vrs7A4xEiIqKLFCzQGVjD7rXn2nq+4JG34d1dA44e0DcLB34G+QP4O4LTylo7CXvWjf5tV3YRucqR3+C5tNvQOkfrhU/9cqf/3DmUf4X+ANOzopF/wetGQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Hot Chocolate"
        title="Hot Chocolate"
        src="https://chillicream.com/static/943d3b068d10d321830906928d7ac4ef/8ce52/banana-cake-pop-root-types.png"
        srcset="https://chillicream.com/static/943d3b068d10d321830906928d7ac4ef/772e8/banana-cake-pop-root-types.png 200w,
https://chillicream.com/static/943d3b068d10d321830906928d7ac4ef/e17e5/banana-cake-pop-root-types.png 400w,
https://chillicream.com/static/943d3b068d10d321830906928d7ac4ef/8ce52/banana-cake-pop-root-types.png 681w"
        sizes="(max-width: 681px) 100vw, 681px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>In our current schema we can see that we have a single root field called <code class="language-text">students</code>. If we click on that the schema explorer opens and we can drill into our type. We can see what fields we can request from our <code class="language-text">Student</code> type. We also can see that we can drill in further and fetch the enrollments and from the enrollments the courses and so on.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://chillicream.com/static/b17c3abc623fa0a309a1081444f013f9/359cd/banana-cake-pop-expanded-schema.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 63.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAADGElEQVQ4y2WSS2gUSRjHWxAFQcwpBPHi+tpxUGdinNZo1I2rFy/qKHFRlvhAxQeexFsaUURwPXnYLHtY9qAsChohaFAjiQ9242MUDaLkMTHjzHRPV797erpqeurz6564gin48X1dXfy6+l8lbNu6Y7G4fc+5ZZv2dP3QurNrUVuHlGjfLa1I/STt6zwidXf/Lu3ed0BallwvxVvapMUrUtKSkJWitHTVOim2uk1a3rKpK55qv7CqddshoWH1Lx07z/wB13ofw1+3B+DPW4Nwp/85PHzyHF4PfwTPq0Dm7XvoufcI7vY/gd77g9D74DHWAaz1/m7/M3j6chhu9PSNCkK8Y9fJ324C8xzqOSbzPYdVy2XGXJd5JmEmURgPagwAGFQZAx4wCNz6MxLw6J2PgGNbL4TGLafSZ7v7QFNJrSgrvFAs8hJWU5a5RlRuOQ6vVCrcNEwuT05yTZW5rqncMAxOiMZVlXDbcYNqEEAul8sIwtJ0+lfpbzB0whVF4XJJgVKuAMWREZjM5UDTVDAtC2zDAmNiAgyigE8Z4oPnlkGd/IxrtACAQ6FQQGF8b/rg+eso1OpCWQZdJSgwwCpXgFIa4WOWVj4PrkmAsSqwahVoxQdDIeFmUFgFWSllhBkr96cPX/xnSliKhJqu4WF4UHbdOuVyRDjnoQQjAN/3gSIcwr1BEGZommZGmJnsTB+5dPPbL6OQEAKO44Bt21F1Uep+L0ZCMec8JBJirhlh9prD6WOXb00ThjILs7MsO+q/8v0HpgnnrD226/iVHtA1UkNhDYWcqCrHK8BtxLFt7jh2VF2sKP0flPJw1Gq1SKjr+ith7oZT6dNX+8C2TDwtPZyEEh6KomqgEOxDNCNC1UzAK1LPF3cX5jg1wijDuTdCw4YTO45eusE/TWT90dFROj4+Rl++eUcfPXtFB//N0IEpvvbD7z/Q7Pg4HRsbo9lslhaLRZrP5ysjeM2Ghob+E2Y1LJg3f2Es1dzcLIYkkkmxdW1K/HnzerF9Y+s0xDUtYiKREJO4LqzxeFyMxWJiU1PTusbGxh+/ABuzMjKzZjrhAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Hot Chocolate"
        title="Hot Chocolate"
        src="https://chillicream.com/static/b17c3abc623fa0a309a1081444f013f9/5a190/banana-cake-pop-expanded-schema.png"
        srcset="https://chillicream.com/static/b17c3abc623fa0a309a1081444f013f9/772e8/banana-cake-pop-expanded-schema.png 200w,
https://chillicream.com/static/b17c3abc623fa0a309a1081444f013f9/e17e5/banana-cake-pop-expanded-schema.png 400w,
https://chillicream.com/static/b17c3abc623fa0a309a1081444f013f9/5a190/banana-cake-pop-expanded-schema.png 800w,
https://chillicream.com/static/b17c3abc623fa0a309a1081444f013f9/c1b63/banana-cake-pop-expanded-schema.png 1200w,
https://chillicream.com/static/b17c3abc623fa0a309a1081444f013f9/29007/banana-cake-pop-expanded-schema.png 1600w,
https://chillicream.com/static/b17c3abc623fa0a309a1081444f013f9/359cd/banana-cake-pop-expanded-schema.png 2972w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Now close the schema tab again so that we can write some queries.</p>
<h3 id="testing-with-playground" style="position:relative;"><a href="#testing-with-playground" aria-label="testing with playground permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Testing with Playground</h3>
<p>If you have opted for <em>Playground</em> open your browser and navigate to <code class="language-text">http://localhost:5000/playground</code>.</p>
<p>On the right-hand side click on the <code class="language-text">Docs</code> button. A pane will slide out showing us the root types and root fields of our schema.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://chillicream.com/static/8eef1f07104c1474c76431a653209c7b/a3a74/playground-root-types.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 83.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAC8UlEQVQ4y6WT20sUURjAF3qIXqOXooe8kSgo1YOEQbpqSohkhZRnTcvqpf6F0of+DUkxs4u73oJeiiAoSFvXLcK8tOrOjDv32XF3Z3dn55yvb8YUNKLIAz++M2fO+fGdc77jqzpcfPB0ZXHHmbOnuurO15GKygpSVV1NGhobSH19PfH7/aTpQhNpaWkh/gY/aWxsJHU4frK8nJSWlZGamhrS3NLcWXuutqe4uKjcd7G++cTw0ACbeDUJE5PTMPxkBEaejkJofBKCoXGP0AT+m5qGseA4jOH3WDAEg0PDMPB4EEZGn8GLl0GcMwUPHvb1+7p7ukt/rHEZSdYhLoiOIMqU35DoWlygqwgniFRWdaoZJhVllcqyRtfFBFXTJnUcSrO5vIsN2D7NzPb5CCElHC9YRtIEWVGpqunMRVE1JqsqM5JJthbn2ceZOSYpKlNkja3w64xPSow5lGVzWVaw7YIrnJ1FYSAQKMFFVsFxIJvL4YQc7JDNQsEpwDonwOu37yFpmmAmN4FTROB1CRz0OLgO8YThcLjfF+jqKtF03crbNmQsiyGwF1eeTmdA0XTImhY8X3wHc+ICgI0yOwXAqCeMRCJbQt0wLLtQ8IQWZrWNK9uO7pGoug5pMwNvlmZhUY+7DqCMAmPs34XbUk+IGZrmJiysrEDCVD0hyv5PmESRbiS9M1wVeRBT2v6EGsqEhASJhAzfYsuQ2NxnhpIkAreOW+XW4PvqIma4L2EOpAQHwvJnkGJfYAmjuKn8QYh1+LeycRFlBbiNDUiIMizGYztb/u2WuzBDLOy0XbDdenNy+Tx1wf4uZEXBJ7lBRVGiS1yM4qVQz4dFiDHvCucjkT5fJyGlcZ5naWvrJjXDwALWIIWFnMbM0hnLi+64pKqg6QbERAG0fAr2tnB47pGvqKz8+KXOWx+Qr8h827WeaGvHjWg76Y1eDtzeRfuv2NZ5M3ql526U3L4fvd57zyWC/eXWq+SOD9sB5AhyDDm6Tw79BC78KIEt8F8dAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Hot Chocolate"
        title="Hot Chocolate"
        src="https://chillicream.com/static/8eef1f07104c1474c76431a653209c7b/5a190/playground-root-types.png"
        srcset="https://chillicream.com/static/8eef1f07104c1474c76431a653209c7b/772e8/playground-root-types.png 200w,
https://chillicream.com/static/8eef1f07104c1474c76431a653209c7b/e17e5/playground-root-types.png 400w,
https://chillicream.com/static/8eef1f07104c1474c76431a653209c7b/5a190/playground-root-types.png 800w,
https://chillicream.com/static/8eef1f07104c1474c76431a653209c7b/c1b63/playground-root-types.png 1200w,
https://chillicream.com/static/8eef1f07104c1474c76431a653209c7b/29007/playground-root-types.png 1600w,
https://chillicream.com/static/8eef1f07104c1474c76431a653209c7b/a3a74/playground-root-types.png 2272w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>In our current schema we can see that we have a single root field called <code class="language-text">students</code>. If we click on that the schema explorer opens and we can drill into our type. We can see what fields we can request from our <code class="language-text">Student</code> type. We also can see that we can drill in further and fetch the enrollments and from the enrollments the courses and so on.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://chillicream.com/static/2e821a00db4e89f7a5ecb6efab42e845/cc95c/playground-expanded-schema.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 67.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACZUlEQVQ4y6WU3U4TQRTHNwZuCPoWXiq+AJEbEyESjBEvjBS4MMEHcC98LKOPIKVQKSlETJAva8tm2+5uZ7qzs/NxjmeGSiF6QeIk/5wzZ/772zOn2QavXjwJX6+8CZeWnoezs7Ph0/n5cHVtLVypVMIKaW19PdzYeBdWVle93Nn8wkL4eG7O6+Xy8nuqfXi2uPg2CII7wWa1io3mPm7XG/hlawertW3c+bqL9d09ik4Nyhu+5lXf9Z7Nag03t2qU72Dz4Bt+/PS5T8C7wemvtv0ZX2idDxQaphFRW210kXY1yESjVb6GSmrQ4jJ3AtAoC42al7THPBc/CHgvyDjDs+gMRNoGJVJQSkMpCxBZBEpyMEaTLEghQBUCAAlFy/kKNgCjpHVAxtipB253DrEefQf3Tn9CS2mDgg+pKUm5RoIiG0oU+ZBMzmix1JYgHEFfAc88cL91hPXWEXR7jLpqY1lwFLLEXj9BmQ+wVAqVKjHJGA7Snq8VRYGy1JgyRhMRN4FRHONJfAHD4RB0maOmjrSxmFGHVgvfMd2Q5J6j+OcWBpBxjmiKm8CUD7DD+0CDcuPxZhoZXVEgGOkrl0C4yscv8dEDOeeXwD7LsMN6NBpDZ8abtTH+Wtaoaw+PQeMIfwMTAp4nXYAiIV4xAlpUJeU6H3f3D+BIN4G9LME4T13RWvr5nAFcpD35R3sqWHuVX9/TMqMZnnhgTp0wW+D/LhpRywP3Dpr88PyIpf1k0O12WRzHrN1us06nc1tlURSVx8fHTf/pTUxMPJiampqZnp72cjnVZiYnJ28l8j6k+Ijifffn8BuYXovb4j9JTwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Hot Chocolate"
        title="Hot Chocolate"
        src="https://chillicream.com/static/2e821a00db4e89f7a5ecb6efab42e845/5a190/playground-expanded-schema.png"
        srcset="https://chillicream.com/static/2e821a00db4e89f7a5ecb6efab42e845/772e8/playground-expanded-schema.png 200w,
https://chillicream.com/static/2e821a00db4e89f7a5ecb6efab42e845/e17e5/playground-expanded-schema.png 400w,
https://chillicream.com/static/2e821a00db4e89f7a5ecb6efab42e845/5a190/playground-expanded-schema.png 800w,
https://chillicream.com/static/2e821a00db4e89f7a5ecb6efab42e845/c1b63/playground-expanded-schema.png 1200w,
https://chillicream.com/static/2e821a00db4e89f7a5ecb6efab42e845/29007/playground-expanded-schema.png 1600w,
https://chillicream.com/static/2e821a00db4e89f7a5ecb6efab42e845/cc95c/playground-expanded-schema.png 2796w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Now click onto <code class="language-text">Docs</code> again so that the schema tab slides back in again. We are now ready to write our first query.</p>
<h3 id="recap" style="position:relative;"><a href="#recap" aria-label="recap permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Recap</h3>
<p>While we just added one field that exposes the <code class="language-text">Student</code> entity to <em>Hot Chocolate</em>, <em>Hot Chocolate</em> explored what data is reachable from that entity. In conjunction with the <code class="language-text">UseSelection</code> middleware we can now query all that data and drill into our graph.</p>
<p>We have explored tooling with which we can explore the schema before issuing the first request.</p>
<p>If we would print our schema it would now look like the following.</p>
<blockquote>
<p>The schema SDL can be downloaded from <a href="http://localhost:5000/schema">http://localhost:5000/schema</a>.</p>
</blockquote>
<div
              class="gatsby-code-button-container"
              data-toaster-id="95011847349956120000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`schema {
  query: Query
}

type Query {
  students: [Student]
}

type Student {
  enrollmentDate: DateTime!
  enrollments: [Enrollment]
  firstMidName: String
  id: Int!
  lastName: String
}

type Course {
  courseId: Int!
  credits: Int!
  enrollments: [Enrollment]
  title: String
}

type Enrollment {
  course: Course
  courseId: Int!
  enrollmentId: Int!
  grade: Grade
  student: Student
  studentId: Int!
}

enum Grade {
  A
  B
  C
  D
  F
}

&quot;The \`DateTime\` scalar represents an ISO-8601 compliant date time type.&quot;
scalar DateTime

&quot;The \`Int\` scalar type represents non-fractional signed whole numeric values. Int can represent values between -(2^31) and 2^31 - 1.&quot;
scalar Int

&quot;The \`String\` scalar type represents textual data, represented as UTF-8 character sequences. The String type is most often used by GraphQL to represent free-form human-readable text.&quot;
scalar String`, `95011847349956120000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">query</span><span class="token punctuation">:</span> Query
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">students</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Student<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
  <span class="token attr-name">enrollmentDate</span><span class="token punctuation">:</span> DateTime<span class="token operator">!</span>
  <span class="token attr-name">enrollments</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Enrollment<span class="token punctuation">]</span>
  <span class="token attr-name">firstMidName</span><span class="token punctuation">:</span> String
  <span class="token attr-name">id</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
  <span class="token attr-name">lastName</span><span class="token punctuation">:</span> String
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Course</span> <span class="token punctuation">{</span>
  <span class="token attr-name">courseId</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
  <span class="token attr-name">credits</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
  <span class="token attr-name">enrollments</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Enrollment<span class="token punctuation">]</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> String
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Enrollment</span> <span class="token punctuation">{</span>
  <span class="token attr-name">course</span><span class="token punctuation">:</span> Course
  <span class="token attr-name">courseId</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
  <span class="token attr-name">enrollmentId</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
  <span class="token attr-name">grade</span><span class="token punctuation">:</span> Grade
  <span class="token attr-name">student</span><span class="token punctuation">:</span> Student
  <span class="token attr-name">studentId</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">Grade</span> <span class="token punctuation">{</span>
  <span class="token constant">A</span>
  <span class="token constant">B</span>
  <span class="token constant">C</span>
  <span class="token constant">D</span>
  <span class="token constant">F</span>
<span class="token punctuation">}</span>

<span class="token description string">"<span class="token language-markdown">The `DateTime` scalar represents an ISO-8601 compliant date time type.</span>"</span>
<span class="token keyword">scalar</span> <span class="token class-name">DateTime</span>

<span class="token description string">"<span class="token language-markdown">The `Int` scalar type represents non-fractional signed whole numeric values. Int can represent values between -(2^31) and 2^31 - 1.</span>"</span>
<span class="token keyword">scalar</span> <span class="token class-name">Int</span>

<span class="token description string">"<span class="token language-markdown">The `String` scalar type represents textual data, represented as UTF-8 character sequences. The String type is most often used by GraphQL to represent free-form human-readable text.</span>"</span>
<span class="token keyword">scalar</span> <span class="token class-name">String</span></code></pre></div>
<h3 id="writing-queries" style="position:relative;"><a href="#writing-queries" aria-label="writing queries permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Writing Queries</h3>
<p>In both GraphQL IDEs we can type in the GraphQL queries on the left-hand pane. If we click on the play button the result will be displayed on the right-hand side pane.</p>
<p>Let us start with a simple query in which we ask for the first name of all students that we have in our database.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="32258012766142886000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query {
  students {
    firstMidName
  }
}`, `32258012766142886000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> <span class="token punctuation">{</span>
  students <span class="token punctuation">{</span>
    firstMidName
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The above query resolves correctly the data from our database, and we get the following result:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="11805996279706999000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  &quot;data&quot;: {
    &quot;students&quot;: [
      {
        &quot;firstMidName&quot;: &quot;Rafael&quot;
      },
      {
        &quot;firstMidName&quot;: &quot;Pascal&quot;
      },
      {
        &quot;firstMidName&quot;: &quot;Michael&quot;
      }
    ]
  }
}`, `11805996279706999000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"students"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"firstMidName"</span><span class="token operator">:</span> <span class="token string">"Rafael"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"firstMidName"</span><span class="token operator">:</span> <span class="token string">"Pascal"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"firstMidName"</span><span class="token operator">:</span> <span class="token string">"Michael"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>What is interesting is that the GraphQL engine rewrites the incoming GraphQL request to an expression tree that is applied onto the <code class="language-text">IQueryable&lt;Student&gt;</code> our root field resolver returns. The expression will only query for data from the database that was needed to fulfill our request.</p>
<p>The SQL query in this case will look like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="42666496410036150000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`SELECT &quot;s&quot;.&quot;FirstMidName&quot; FROM &quot;Students&quot; AS &quot;s&quot;`, `42666496410036150000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"FirstMidName"</span> <span class="token keyword">FROM</span> <span class="token string">"Students"</span> <span class="token keyword">AS</span> <span class="token string">"s"</span></code></pre></div>
<p>Let us drill into the data a little more and fetch additionally to the <code class="language-text">firstMidName</code> also the title of the course the students are enlisted to.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="40326310146473450000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query {
  students {
    firstMidName
    enrollments {
      course {
        title
      }
    }
  }
}`, `40326310146473450000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> <span class="token punctuation">{</span>
  students <span class="token punctuation">{</span>
    firstMidName
    enrollments <span class="token punctuation">{</span>
      course <span class="token punctuation">{</span>
        title
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The above query returns:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="46031528703059290000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  &quot;data&quot;: {
    &quot;students&quot;: [
      {
        &quot;firstMidName&quot;: &quot;Rafael&quot;,
        &quot;enrollments&quot;: [
          {
            &quot;course&quot;: {
              &quot;title&quot;: &quot;Object Oriented Programming 1&quot;
            }
          }
        ]
      },
      {
        &quot;firstMidName&quot;: &quot;Pascal&quot;,
        &quot;enrollments&quot;: [
          {
            &quot;course&quot;: {
              &quot;title&quot;: &quot;Object Oriented Programming 1&quot;
            }
          }
        ]
      },
      {
        &quot;firstMidName&quot;: &quot;Michael&quot;,
        &quot;enrollments&quot;: [
          {
            &quot;course&quot;: {
              &quot;title&quot;: &quot;Object Oriented Programming 1&quot;
            }
          }
        ]
      }
    ]
  }
}`, `46031528703059290000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"students"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"firstMidName"</span><span class="token operator">:</span> <span class="token string">"Rafael"</span><span class="token punctuation">,</span>
        <span class="token property">"enrollments"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">"course"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Object Oriented Programming 1"</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"firstMidName"</span><span class="token operator">:</span> <span class="token string">"Pascal"</span><span class="token punctuation">,</span>
        <span class="token property">"enrollments"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">"course"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Object Oriented Programming 1"</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"firstMidName"</span><span class="token operator">:</span> <span class="token string">"Michael"</span><span class="token punctuation">,</span>
        <span class="token property">"enrollments"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">"course"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Object Oriented Programming 1"</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In order to fetch the data, the GraphQL query is rewritten to the following SQL:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="12842657512352561000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`SELECT &quot;s&quot;.&quot;FirstMidName&quot;,
       &quot;s&quot;.&quot;Id&quot;,
       &quot;t&quot;.&quot;Title&quot;,
       &quot;t&quot;.&quot;EnrollmentId&quot;,
       &quot;t&quot;.&quot;CourseId&quot;
    FROM &quot;Students&quot; AS &quot;s&quot;
    LEFT JOIN (
        SELECT &quot;c&quot;.&quot;Title&quot;,
               &quot;e&quot;.&quot;EnrollmentId&quot;,
               &quot;c&quot;.&quot;CourseId&quot;,
               &quot;e&quot;.&quot;StudentId&quot;
        FROM &quot;Enrollments&quot; AS &quot;e&quot;
        INNER JOIN &quot;Courses&quot; AS &quot;c&quot;
              ON &quot;e&quot;.&quot;CourseId&quot; = &quot;c&quot;.&quot;CourseId&quot;
    ) AS &quot;t&quot; ON &quot;s&quot;.&quot;Id&quot; = &quot;t&quot;.&quot;StudentId&quot;
    ORDER BY &quot;s&quot;.&quot;Id&quot;, &quot;t&quot;.&quot;EnrollmentId&quot;, &quot;t&quot;.&quot;CourseId&quot;`, `12842657512352561000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"FirstMidName"</span><span class="token punctuation">,</span>
       <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"Id"</span><span class="token punctuation">,</span>
       <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"Title"</span><span class="token punctuation">,</span>
       <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"EnrollmentId"</span><span class="token punctuation">,</span>
       <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"CourseId"</span>
    <span class="token keyword">FROM</span> <span class="token string">"Students"</span> <span class="token keyword">AS</span> <span class="token string">"s"</span>
    <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> <span class="token punctuation">(</span>
        <span class="token keyword">SELECT</span> <span class="token string">"c"</span><span class="token punctuation">.</span><span class="token string">"Title"</span><span class="token punctuation">,</span>
               <span class="token string">"e"</span><span class="token punctuation">.</span><span class="token string">"EnrollmentId"</span><span class="token punctuation">,</span>
               <span class="token string">"c"</span><span class="token punctuation">.</span><span class="token string">"CourseId"</span><span class="token punctuation">,</span>
               <span class="token string">"e"</span><span class="token punctuation">.</span><span class="token string">"StudentId"</span>
        <span class="token keyword">FROM</span> <span class="token string">"Enrollments"</span> <span class="token keyword">AS</span> <span class="token string">"e"</span>
        <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token string">"Courses"</span> <span class="token keyword">AS</span> <span class="token string">"c"</span>
              <span class="token keyword">ON</span> <span class="token string">"e"</span><span class="token punctuation">.</span><span class="token string">"CourseId"</span> <span class="token operator">=</span> <span class="token string">"c"</span><span class="token punctuation">.</span><span class="token string">"CourseId"</span>
    <span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"t"</span> <span class="token keyword">ON</span> <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"Id"</span> <span class="token operator">=</span> <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"StudentId"</span>
    <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"Id"</span><span class="token punctuation">,</span> <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"EnrollmentId"</span><span class="token punctuation">,</span> <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"CourseId"</span></code></pre></div>
<p>The <code class="language-text">UseSelection</code> middleware allows us by just attributing it to a field resolver that returns an <code class="language-text">IQueryable&lt;T&gt;</code> to drill into that data set.</p>
<p>Without a lot of code, we already have a working GraphQL server that returns all the students. We are already able to drill into our data and the <code class="language-text">UseSelection</code> middleware rewrites GraphQL selections into <code class="language-text">IQueryable&lt;T&gt;</code> projections that ensures that we only select the data that we need from the database.</p>
<p>Think about it, we really just added entity framework and exposed a single root field that basically just returns the <code class="language-text">DbSet&lt;Student&gt;</code>.</p>
<h2 id="filtering" style="position:relative;"><a href="#filtering" aria-label="filtering permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Filtering</h2>
<p>Let us go further with this. We actually can do more here and <em>Hot Chocolate</em> provides you with a filter and sorting middleware to really give you the power to query your data with complex expressions.</p>
<p>First, we need to add two more packages that will add the sorting and filtering middleware.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="45458819037667040000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet add package HotChocolate.Types.Filters
dotnet add package HotChocolate.Types.Sorting`, `45458819037667040000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet <span class="token function">add</span> package HotChocolate.Types.Filters
dotnet <span class="token function">add</span> package HotChocolate.Types.Sorting</code></pre></div>
<p>With these new packages in place let us rewrite our query type in order to enable proper filtering support.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="39691140555920870000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`using System.Linq;
using HotChocolate;
using HotChocolate.Types;

namespace ContosoUniversity
{
    public class Query
    {
        [UseSelection]
        [UseFiltering]
        [UseSorting]
        public IQueryable<Student> GetStudents([Service]SchoolContext context) =>
            context.Students;
    }
}`, `39691140555920870000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Linq</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">HotChocolate</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">HotChocolate<span class="token punctuation">.</span>Types</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">ContosoUniversity</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseSelection</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseFiltering</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseSorting</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IQueryable<span class="token punctuation">&lt;</span>Student<span class="token punctuation">></span></span> <span class="token function">GetStudents</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">SchoolContext</span> context<span class="token punctuation">)</span> <span class="token operator">=></span>
            context<span class="token punctuation">.</span>Students<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The above query type has now two new attributes <code class="language-text">UseFiltering</code> and <code class="language-text">UseSorting</code>. Let me again state that the order of middleware is important.</p>
<p>In order to understand how a field pipeline with middleware works have a look at the following sequence diagram which depicts our data pipeline applied to the above resolver.</p>
<div class="mermaid" data-processed="true"><svg id="mermaid-1606082919641" width="100%" xmlns="http://www.w3.org/2000/svg" height="513" style="max-width: 1050px;" viewBox="-50 -10 1050 513"><style>#mermaid-1606082919641{font-family:sans-serif;font-size:16px;fill:#333;}#mermaid-1606082919641 .error-icon{fill:#552222;}#mermaid-1606082919641 .error-text{fill:#552222;stroke:#552222;}#mermaid-1606082919641 .edge-thickness-normal{stroke-width:2px;}#mermaid-1606082919641 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1606082919641 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1606082919641 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1606082919641 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1606082919641 .marker{fill:#333333;}#mermaid-1606082919641 .marker.cross{stroke:#333333;}#mermaid-1606082919641 svg{font-family:sans-serif;font-size:16px;}#mermaid-1606082919641 .actor{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1606082919641 text.actor &gt; tspan{fill:black;stroke:none;}#mermaid-1606082919641 .actor-line{stroke:grey;}#mermaid-1606082919641 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-1606082919641 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-1606082919641 #arrowhead path{fill:#333;stroke:#333;}#mermaid-1606082919641 .sequenceNumber{fill:white;}#mermaid-1606082919641 #sequencenumber{fill:#333;}#mermaid-1606082919641 #crosshead path{fill:#333;stroke:#333;}#mermaid-1606082919641 .messageText{fill:#333;stroke:#333;}#mermaid-1606082919641 .labelBox{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1606082919641 .labelText,#mermaid-1606082919641 .labelText &gt; tspan{fill:black;stroke:none;}#mermaid-1606082919641 .loopText,#mermaid-1606082919641 .loopText &gt; tspan{fill:black;stroke:none;}#mermaid-1606082919641 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:hsl(259.6261682243,59.7765363128%,87.9019607843%);}#mermaid-1606082919641 .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-1606082919641 .noteText,#mermaid-1606082919641 .noteText &gt; tspan{fill:black;stroke:none;}#mermaid-1606082919641 .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-1606082919641 .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-1606082919641 .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-1606082919641:root{--mermaid-font-family:sans-serif;}#mermaid-1606082919641 sequence{fill:apa;}</style><g></g><g><line id="actor0" x1="75" y1="5" x2="75" y2="502" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="75" dy="0">UsePaging</tspan></text></g><g><line id="actor1" x1="275" y1="5" x2="275" y2="502" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="275" dy="0">UseSelection</tspan></text></g><g><line id="actor2" x1="475" y1="5" x2="475" y2="502" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="475" dy="0">UseFiltering</tspan></text></g><g><line id="actor3" x1="675" y1="5" x2="675" y2="502" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="600" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="675" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="675" dy="0">UseSorting</tspan></text></g><g><line id="actor4" x1="875" y1="5" x2="875" y2="502" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="800" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="875" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="875" dy="0">Resolver</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"></circle></marker></defs><text x="175" y="80" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">next(context)</text><line x1="75" y1="109" x2="275" y2="109" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" marker-start="url(#sequencenumber)" style="fill: none;"></line><text x="75" y="113" font-family="sans-serif" font-size="12px" text-anchor="middle" textLength="16px" class="sequenceNumber">1</text><g><rect x="270" y="109" fill="#EDF2AE" stroke="#666" width="10" height="308" rx="0" ry="0" class="activation0"></rect></g><text x="378" y="124" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">next(context)</text><line x1="280" y1="153" x2="475" y2="153" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" marker-start="url(#sequencenumber)" style="fill: none;"></line><text x="280" y="157" font-family="sans-serif" font-size="12px" text-anchor="middle" textLength="16px" class="sequenceNumber">2</text><g><rect x="470" y="155" fill="#EDF2AE" stroke="#666" width="10" height="218" rx="0" ry="0" class="activation0"></rect></g><text x="578" y="168" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">next(context)</text><line x1="480" y1="197" x2="675" y2="197" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" marker-start="url(#sequencenumber)" style="fill: none;"></line><text x="480" y="201" font-family="sans-serif" font-size="12px" text-anchor="middle" textLength="16px" class="sequenceNumber">3</text><g><rect x="670" y="199" fill="#EDF2AE" stroke="#666" width="10" height="130" rx="0" ry="0" class="activation0"></rect></g><text x="778" y="212" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">next(context)</text><line x1="680" y1="241" x2="875" y2="241" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" marker-start="url(#sequencenumber)" style="fill: none;"></line><text x="680" y="245" font-family="sans-serif" font-size="12px" text-anchor="middle" textLength="16px" class="sequenceNumber">4</text><g><rect x="870" y="243" fill="#EDF2AE" stroke="#666" width="10" height="42" rx="0" ry="0" class="activation0"></rect></g><text x="775" y="256" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">apply sorting</text><line x1="870" y1="285" x2="680" y2="285" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" marker-start="url(#sequencenumber)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="870" y="289" font-family="sans-serif" font-size="12px" text-anchor="middle" textLength="16px" class="sequenceNumber">5</text><text x="575" y="300" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">apply filters</text><line x1="670" y1="329" x2="480" y2="329" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" marker-start="url(#sequencenumber)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="670" y="333" font-family="sans-serif" font-size="12px" text-anchor="middle" textLength="16px" class="sequenceNumber">6</text><text x="375" y="344" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">apply projections</text><line x1="470" y1="373" x2="280" y2="373" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" marker-start="url(#sequencenumber)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="470" y="377" font-family="sans-serif" font-size="12px" text-anchor="middle" textLength="16px" class="sequenceNumber">7</text><text x="173" y="388" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">apply paging</text><line x1="270" y1="417" x2="75" y2="417" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" marker-start="url(#sequencenumber)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="270" y="421" font-family="sans-serif" font-size="12px" text-anchor="middle" textLength="16px" class="sequenceNumber">8</text><g><rect x="0" y="437" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="469.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="75" dy="0">UsePaging</tspan></text></g><g><rect x="200" y="437" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="469.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="275" dy="0">UseSelection</tspan></text></g><g><rect x="400" y="437" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="469.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="475" dy="0">UseFiltering</tspan></text></g><g><rect x="600" y="437" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="675" y="469.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="675" dy="0">UseSorting</tspan></text></g><g><rect x="800" y="437" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="875" y="469.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="875" dy="0">Resolver</tspan></text></g></svg></div>
<p>Each field middleware initially yields control to the next field middleware until the resolver is invoked. The resolver returns its result and the field middleware will now on the way back apply their functionality to the result. In our case the field middleware are applying expressions to the queryable to build up the database query.</p>
<p>With that upgraded <code class="language-text">Query</code> type let us restart our server.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="88547694097096900000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet run --urls http://localhost:5000`, `88547694097096900000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet run --urls http://localhost:5000</code></pre></div>
<p>Now let us inspect our schema again. When we look at the <code class="language-text">students</code> field we can see that there are new arguments called <code class="language-text">where</code> and <code class="language-text">orderBy</code>.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://chillicream.com/static/2279da65617387b53c7d8447c66fbcec/359cd/banana-cake-pop-arguments.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 63.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC60lEQVQ4y3WRT0gUURzHJ4iCIPIkEl0q07YtddV20xTDyEsXdRULI6zEpJJO0c0hihCqU4eMDtGhCAUzEJPKUDPIskWiuuzqrn92d2bn/5+dnZ2dfb/eG9s1iR58+L15M/N53/d7VNOp5mLf6fZbpQ3t/ftqW/r313fQFY1t9GHvCbqzq4ceHHxEt3VeoEs9x2l3dR1dfMRLHyCU+eiS8hraVVVPH6pu6Hd7G++U1zZdogqqzna03HgMz8dm4OmrKXgyMg2vJ7/A+9l5WPgZBMNIQeD7Lxh98wHGJz/C2NtpGHs3g+sUruvz8clPMDv/A4ZGJ0IU5e5ovXZ/GCxDSxuabJmGZmWSScvgEpbOrVoSx1jZjG0BgAUZywKE57a+/oyxUZZUEwOaqnylCk/2+W8OToDA8VmGYVE0FkOiJCMtsYZMfgl/biAbIZTUdMQsryCBY5AocEiSJMTzAuI4HqmabmdsG1ZXVwMUVeL3n6efgSTyiGVZxLAssDEG+JUIxOO4iiJomgqarIIUiYDEs2CmLYwJhp4EbmUNBEGwARDEYjEsdJ/xX7z9AguFvDCxFgdmKQxrsRhIkgiqioWKCko0CrrMg2VlwMpkIJ0yQWJ5EgYLM8CwiQC1peycv/vuyw0hw5DjgyrLoOgGpFIpMAiGsQ6WkDXTNCGNQUCygU16KMtygNrq6fL3DAxvHBkLeYEHXddxk3EyTQNd052aTCYdcnIixu0lOELc1wC1/Wi3v/feyGYhzzvHVBTFqTmI1NkAb0Yg8n+EO471tl55MAqiwGexEN80g2+OQzh+HizOoyoqwnIHLEVkZLNZRyiK4jdqZ12f//rDCVAVGQR8o/jGyAucSMunyiXKpcpB+vhnkFaStQWqoO5q8+WBIbQcCZuhUChNCAaD6dz8bxYXFzcRDofT8Xg8HY1GU/gfmJub+0xtK9iza/del7eystL3fzxO9Xg8m6ioqPC53W6fy+XyFRUV1RQWFh78DS+yMutTYqXLAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Hot Chocolate"
        title="Hot Chocolate"
        src="https://chillicream.com/static/2279da65617387b53c7d8447c66fbcec/5a190/banana-cake-pop-arguments.png"
        srcset="https://chillicream.com/static/2279da65617387b53c7d8447c66fbcec/772e8/banana-cake-pop-arguments.png 200w,
https://chillicream.com/static/2279da65617387b53c7d8447c66fbcec/e17e5/banana-cake-pop-arguments.png 400w,
https://chillicream.com/static/2279da65617387b53c7d8447c66fbcec/5a190/banana-cake-pop-arguments.png 800w,
https://chillicream.com/static/2279da65617387b53c7d8447c66fbcec/c1b63/banana-cake-pop-arguments.png 1200w,
https://chillicream.com/static/2279da65617387b53c7d8447c66fbcec/29007/banana-cake-pop-arguments.png 1600w,
https://chillicream.com/static/2279da65617387b53c7d8447c66fbcec/359cd/banana-cake-pop-arguments.png 2972w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>For our first query let us fetch the students with the <code class="language-text">lastName</code> <code class="language-text">Bar</code> or <code class="language-text">Baz</code>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="1312393155459657000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query {
  students(where: { OR: [{ lastName: &quot;Bar&quot; }, { lastName: &quot;Baz&quot; }] }) {
    firstMidName
    lastName
    enrollments {
      course {
        title
      }
    }
  }
}`, `1312393155459657000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> <span class="token punctuation">{</span>
  students<span class="token punctuation">(</span><span class="token attr-name">where</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token attr-name">OR</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token attr-name">lastName</span><span class="token punctuation">:</span> <span class="token string">"Bar"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token attr-name">lastName</span><span class="token punctuation">:</span> <span class="token string">"Baz"</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    firstMidName
    lastName
    enrollments <span class="token punctuation">{</span>
      course <span class="token punctuation">{</span>
        title
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Which will return the following result:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="40108901605571450000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  &quot;data&quot;: {
    &quot;students&quot;: [
      {
        &quot;firstMidName&quot;: &quot;Pascal&quot;,
        &quot;lastName&quot;: &quot;Bar&quot;,
        &quot;enrollments&quot;: [
          {
            &quot;course&quot;: {
              &quot;title&quot;: &quot;Object Oriented Programming 1&quot;
            }
          }
        ]
      },
      {
        &quot;firstMidName&quot;: &quot;Michael&quot;,
        &quot;lastName&quot;: &quot;Baz&quot;,
        &quot;enrollments&quot;: [
          {
            &quot;course&quot;: {
              &quot;title&quot;: &quot;Object Oriented Programming 1&quot;
            }
          }
        ]
      }
    ]
  }
}`, `40108901605571450000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"students"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"firstMidName"</span><span class="token operator">:</span> <span class="token string">"Pascal"</span><span class="token punctuation">,</span>
        <span class="token property">"lastName"</span><span class="token operator">:</span> <span class="token string">"Bar"</span><span class="token punctuation">,</span>
        <span class="token property">"enrollments"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">"course"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Object Oriented Programming 1"</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"firstMidName"</span><span class="token operator">:</span> <span class="token string">"Michael"</span><span class="token punctuation">,</span>
        <span class="token property">"lastName"</span><span class="token operator">:</span> <span class="token string">"Baz"</span><span class="token punctuation">,</span>
        <span class="token property">"enrollments"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">"course"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Object Oriented Programming 1"</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Again, we are rewriting the whole GraphQL query into one expression tree that translates into the following SQL.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="73365281435197960000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`SELECT &quot;s&quot;.&quot;FirstMidName&quot;,
       &quot;s&quot;.&quot;LastName&quot;,
       &quot;s&quot;.&quot;Id&quot;,
       &quot;t&quot;.&quot;Title&quot;,
       &quot;t&quot;.&quot;EnrollmentId&quot;,
       &quot;t&quot;.&quot;CourseId&quot;
    FROM &quot;Students&quot; AS &quot;s&quot;
    LEFT JOIN (
        SELECT &quot;c&quot;.&quot;Title&quot;,
               &quot;e&quot;.&quot;EnrollmentId&quot;,
               &quot;c&quot;.&quot;CourseId&quot;,
               &quot;e&quot;.&quot;StudentId&quot;
        FROM &quot;Enrollments&quot; AS &quot;e&quot;
        INNER JOIN &quot;Courses&quot; AS &quot;c&quot;
              ON &quot;e&quot;.&quot;CourseId&quot; = &quot;c&quot;.&quot;CourseId&quot;
    ) AS &quot;t&quot; ON &quot;s&quot;.&quot;Id&quot; = &quot;t&quot;.&quot;StudentId&quot;
    WHERE (&quot;s&quot;.&quot;LastName&quot; = 'Bar') OR (&quot;s&quot;.&quot;LastName&quot; = 'Baz')
    ORDER BY &quot;s&quot;.&quot;Id&quot;, &quot;t&quot;.&quot;EnrollmentId&quot;, &quot;t&quot;.&quot;CourseId&quot;`, `73365281435197960000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"FirstMidName"</span><span class="token punctuation">,</span>
       <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"LastName"</span><span class="token punctuation">,</span>
       <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"Id"</span><span class="token punctuation">,</span>
       <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"Title"</span><span class="token punctuation">,</span>
       <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"EnrollmentId"</span><span class="token punctuation">,</span>
       <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"CourseId"</span>
    <span class="token keyword">FROM</span> <span class="token string">"Students"</span> <span class="token keyword">AS</span> <span class="token string">"s"</span>
    <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> <span class="token punctuation">(</span>
        <span class="token keyword">SELECT</span> <span class="token string">"c"</span><span class="token punctuation">.</span><span class="token string">"Title"</span><span class="token punctuation">,</span>
               <span class="token string">"e"</span><span class="token punctuation">.</span><span class="token string">"EnrollmentId"</span><span class="token punctuation">,</span>
               <span class="token string">"c"</span><span class="token punctuation">.</span><span class="token string">"CourseId"</span><span class="token punctuation">,</span>
               <span class="token string">"e"</span><span class="token punctuation">.</span><span class="token string">"StudentId"</span>
        <span class="token keyword">FROM</span> <span class="token string">"Enrollments"</span> <span class="token keyword">AS</span> <span class="token string">"e"</span>
        <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token string">"Courses"</span> <span class="token keyword">AS</span> <span class="token string">"c"</span>
              <span class="token keyword">ON</span> <span class="token string">"e"</span><span class="token punctuation">.</span><span class="token string">"CourseId"</span> <span class="token operator">=</span> <span class="token string">"c"</span><span class="token punctuation">.</span><span class="token string">"CourseId"</span>
    <span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"t"</span> <span class="token keyword">ON</span> <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"Id"</span> <span class="token operator">=</span> <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"StudentId"</span>
    <span class="token keyword">WHERE</span> <span class="token punctuation">(</span><span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"LastName"</span> <span class="token operator">=</span> <span class="token string">'Bar'</span><span class="token punctuation">)</span> <span class="token operator">OR</span> <span class="token punctuation">(</span><span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"LastName"</span> <span class="token operator">=</span> <span class="token string">'Baz'</span><span class="token punctuation">)</span>
    <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"Id"</span><span class="token punctuation">,</span> <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"EnrollmentId"</span><span class="token punctuation">,</span> <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"CourseId"</span></code></pre></div>
<p>But we can go further and even allow more. Let’s say we want to allow the consumer of our API to search for specific grades in our student’s enrolment list.</p>
<p>In order to allow filtering on the enrollments we can add the same <code class="language-text">UseFiltering</code> attribute in our entity on the <code class="language-text">Enrollments</code> collection and this property becomes filterable.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="3058491398662655000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Student
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }
    public string LastName { get; set; }
    public string FirstMidName { get; set; }
    public DateTime EnrollmentDate { get; set; }

    [UseFiltering]
    public virtual ICollection<Enrollment> Enrollments { get; set; }
}`, `3058491398662655000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Key</span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DatabaseGenerated</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DatabaseGeneratedOption<span class="token punctuation">.</span>Identity<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstMidName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> EnrollmentDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseFiltering</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name">ICollection<span class="token punctuation">&lt;</span>Enrollment<span class="token punctuation">></span></span> Enrollments <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We don`t need to apply <code class="language-text">UseSelections</code> again. <code class="language-text">UseSelections</code> really only has to be applied where the data is initially fetched. In this case we do only want to support filtering but no sorting on enrollments. I could again add both but decided to only use filtering here.</p>
<p>Let us restart our server and modify our query further.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="6727131327384450000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet run --urls http://localhost:5000`, `6727131327384450000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet run --urls http://localhost:5000</code></pre></div>
<p>For the next query we will get all students with the last name <code class="language-text">Bar</code> that are enrolled in the course with the <code class="language-text">courseId</code> <code class="language-text">1</code>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="6207503054058106000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query {
  students(where: { lastName: &quot;Bar&quot; }) {
    firstMidName
    lastName
    enrollments(where: { courseId: 1 }) {
      courseId
      course {
        title
      }
    }
  }
}`, `6207503054058106000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> <span class="token punctuation">{</span>
  students<span class="token punctuation">(</span><span class="token attr-name">where</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token attr-name">lastName</span><span class="token punctuation">:</span> <span class="token string">"Bar"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    firstMidName
    lastName
    enrollments<span class="token punctuation">(</span><span class="token attr-name">where</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token attr-name">courseId</span><span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      courseId
      course <span class="token punctuation">{</span>
        title
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The following query translates again to a single SQL statement.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="73198350041614390000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`SELECT &quot;s&quot;.&quot;FirstMidName&quot;,
       &quot;s&quot;.&quot;LastName&quot;,
       &quot;s&quot;.&quot;Id&quot;,
       &quot;t&quot;.&quot;CourseId&quot;,
       &quot;t&quot;.&quot;Title&quot;,
       &quot;t&quot;.&quot;EnrollmentId&quot;,
       &quot;t&quot;.&quot;CourseId0&quot;
    FROM &quot;Students&quot; AS &quot;s&quot;
    LEFT JOIN (
        SELECT &quot;e&quot;.&quot;CourseId&quot;,
               &quot;c&quot;.&quot;Title&quot;,
               &quot;e&quot;.&quot;EnrollmentId&quot;.
               &quot;c&quot;.&quot;CourseId&quot; AS &quot;CourseId0&quot;,
               &quot;e&quot;.&quot;StudentId&quot;
        FROM &quot;Enrollments&quot; AS &quot;e&quot;
        INNER JOIN &quot;Courses&quot; AS &quot;c&quot;
              ON &quot;e&quot;.&quot;CourseId&quot; = &quot;c&quot;.&quot;CourseId&quot;
        WHERE &quot;e&quot;.&quot;CourseId&quot; = 1
    ) AS &quot;t&quot; ON &quot;s&quot;.&quot;Id&quot; = &quot;t&quot;.&quot;StudentId&quot;
    WHERE &quot;s&quot;.&quot;LastName&quot; = 'Bar'
    ORDER BY &quot;s&quot;.&quot;Id&quot;, &quot;t&quot;.&quot;EnrollmentId&quot;, &quot;t&quot;.&quot;CourseId0&quot;`, `73198350041614390000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"FirstMidName"</span><span class="token punctuation">,</span>
       <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"LastName"</span><span class="token punctuation">,</span>
       <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"Id"</span><span class="token punctuation">,</span>
       <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"CourseId"</span><span class="token punctuation">,</span>
       <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"Title"</span><span class="token punctuation">,</span>
       <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"EnrollmentId"</span><span class="token punctuation">,</span>
       <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"CourseId0"</span>
    <span class="token keyword">FROM</span> <span class="token string">"Students"</span> <span class="token keyword">AS</span> <span class="token string">"s"</span>
    <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> <span class="token punctuation">(</span>
        <span class="token keyword">SELECT</span> <span class="token string">"e"</span><span class="token punctuation">.</span><span class="token string">"CourseId"</span><span class="token punctuation">,</span>
               <span class="token string">"c"</span><span class="token punctuation">.</span><span class="token string">"Title"</span><span class="token punctuation">,</span>
               <span class="token string">"e"</span><span class="token punctuation">.</span><span class="token string">"EnrollmentId"</span><span class="token punctuation">.</span>
               <span class="token string">"c"</span><span class="token punctuation">.</span><span class="token string">"CourseId"</span> <span class="token keyword">AS</span> <span class="token string">"CourseId0"</span><span class="token punctuation">,</span>
               <span class="token string">"e"</span><span class="token punctuation">.</span><span class="token string">"StudentId"</span>
        <span class="token keyword">FROM</span> <span class="token string">"Enrollments"</span> <span class="token keyword">AS</span> <span class="token string">"e"</span>
        <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token string">"Courses"</span> <span class="token keyword">AS</span> <span class="token string">"c"</span>
              <span class="token keyword">ON</span> <span class="token string">"e"</span><span class="token punctuation">.</span><span class="token string">"CourseId"</span> <span class="token operator">=</span> <span class="token string">"c"</span><span class="token punctuation">.</span><span class="token string">"CourseId"</span>
        <span class="token keyword">WHERE</span> <span class="token string">"e"</span><span class="token punctuation">.</span><span class="token string">"CourseId"</span> <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">"t"</span> <span class="token keyword">ON</span> <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"Id"</span> <span class="token operator">=</span> <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"StudentId"</span>
    <span class="token keyword">WHERE</span> <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"LastName"</span> <span class="token operator">=</span> <span class="token string">'Bar'</span>
    <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"Id"</span><span class="token punctuation">,</span> <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"EnrollmentId"</span><span class="token punctuation">,</span> <span class="token string">"t"</span><span class="token punctuation">.</span><span class="token string">"CourseId0"</span></code></pre></div>
<p>With filtering and sorting we infer complex filters from our models without almost any code. This allows us to query our data with complex expressions while drilling into the data graph.</p>
<p><em>Hot Chocolate</em> supports complex expressions with a variety of query operators that can be enabled by just adding a simple attribute on your field resolver. We can also configure the filter capabilities which we want to allow. This means you can for instance disallow <code class="language-text">OR</code> combinations of filter clauses.</p>
<h2 id="paging" style="position:relative;"><a href="#paging" aria-label="paging permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Paging</h2>
<p>But we still might get too much data back. What if we select all the students from a real university database? This is where our paging middleware comes in. The paging middleware implements the relay cursor pagination spec.</p>
<blockquote>
<p>Since we cannot do a skip while with <em>Entity Framework</em>, we actually use an indexed based pagination underneath. For convenience we are wrapping this as really cursor pagination. With mongoDB and other database provider we are supporting real cursor based pagination.</p>
</blockquote>
<p>Like with filtering, sorting and selection we just annotate the paging middleware and it just works. Again, middleware order is important, so we need to put the paging attribute on the top since the most top field middleware is actually applied last like shown in the diagram.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="62395455466370640000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`using System.Linq;
using HotChocolate;
using HotChocolate.Types;
using HotChocolate.Types.Relay;

namespace ContosoUniversity
{
    public class Query
    {
        [UsePaging]
        [UseSelection]
        [UseFiltering]
        [UseSorting]
        public IQueryable<Student> GetStudents([Service]SchoolContext context) =>
            context.Students;
    }
}`, `62395455466370640000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Linq</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">HotChocolate</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">HotChocolate<span class="token punctuation">.</span>Types</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">HotChocolate<span class="token punctuation">.</span>Types<span class="token punctuation">.</span>Relay</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">ContosoUniversity</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UsePaging</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseSelection</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseFiltering</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseSorting</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IQueryable<span class="token punctuation">&lt;</span>Student<span class="token punctuation">></span></span> <span class="token function">GetStudents</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">SchoolContext</span> context<span class="token punctuation">)</span> <span class="token operator">=></span>
            context<span class="token punctuation">.</span>Students<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Since paging adds metadata for pagination like a <code class="language-text">totalCount</code> or a <code class="language-text">pageInfo</code> the actual result structure now changes. Also, the paging middleware adds arguments to our field that we need to navigate between pages.</p>
<p>Our <code class="language-text">students</code> field now returns a <code class="language-text">StudentConnection</code> which allows us to either fetch the actual <code class="language-text">Student</code> nodes of the current page or to ask for the pagination metadata.</p>
<p>We could in fact just fetch the <code class="language-text">totalCount</code> of our data set.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="57497843723446510000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query {
  students(first: 1) {
    totalCount
  }
}`, `57497843723446510000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> <span class="token punctuation">{</span>
  students<span class="token punctuation">(</span><span class="token attr-name">first</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    totalCount
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Which would again translate to a simple SQL.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="54694336678727740000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`SELECT 1 FROM &quot;Students&quot; AS &quot;s&quot;`, `54694336678727740000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token number">1</span> <span class="token keyword">FROM</span> <span class="token string">"Students"</span> <span class="token keyword">AS</span> <span class="token string">"s"</span></code></pre></div>
<p>Next let us just fetch the <code class="language-text">lastName</code> of the first student.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="58836251947525930000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query {
  students(first: 1) {
    nodes {
      lastName
    }
  }
}`, `58836251947525930000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> <span class="token punctuation">{</span>
  students<span class="token punctuation">(</span><span class="token attr-name">first</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    nodes <span class="token punctuation">{</span>
      lastName
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Which translates to a simple limit query for <em>SQLLite</em>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="42351537521082294000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`SELECT &quot;s&quot;.&quot;LastName&quot;
    FROM &quot;Students&quot; AS &quot;s&quot;
    LIMIT @__p_0`, `42351537521082294000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"LastName"</span>
    <span class="token keyword">FROM</span> <span class="token string">"Students"</span> <span class="token keyword">AS</span> <span class="token string">"s"</span>
    <span class="token keyword">LIMIT</span> <span class="token variable">@__p_0</span></code></pre></div>
<p>In order to navigate forward through pages we also need to get data from our <code class="language-text">pageInfo</code> like if there is a next page and the last cursor of the current page.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="96479869449123970000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query {
  students(first: 1) {
    nodes {
      lastName
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}`, `96479869449123970000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> <span class="token punctuation">{</span>
  students<span class="token punctuation">(</span><span class="token attr-name">first</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    nodes <span class="token punctuation">{</span>
      lastName
    <span class="token punctuation">}</span>
    pageInfo <span class="token punctuation">{</span>
      hasNextPage
      endCursor
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<div
              class="gatsby-code-button-container"
              data-toaster-id="46499680616539040000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  &quot;data&quot;: {
    &quot;students&quot;: {
      &quot;nodes&quot;: [
        {
          &quot;lastName&quot;: &quot;Foo&quot;
        }
      ],
      &quot;pageInfo&quot;: {
        &quot;hasNextPage&quot;: true,
        &quot;endCursor&quot;: &quot;eyJfX3RvdGFsQ291bnQiOjMsIl9fcG9zaXRpb24iOjB9&quot;
      }
    }
  }
}`, `46499680616539040000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"students"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"nodes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">"lastName"</span><span class="token operator">:</span> <span class="token string">"Foo"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"pageInfo"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"hasNextPage"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">"endCursor"</span><span class="token operator">:</span> <span class="token string">"eyJfX3RvdGFsQ291bnQiOjMsIl9fcG9zaXRpb24iOjB9"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>With the <code class="language-text">endCursor</code> of a page we can get the next page that comes after the <code class="language-text">endCursor</code> by feeding the <code class="language-text">endCursor</code> into the <code class="language-text">after</code> argument.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="96612758143513360000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query {
  students(first: 1, after: &quot;eyJfX3RvdGFsQ291bnQiOjMsIl9fcG9zaXRpb24iOjB9&quot;) {
    nodes {
      lastName
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}`, `96612758143513360000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> <span class="token punctuation">{</span>
  students<span class="token punctuation">(</span><span class="token attr-name">first</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token attr-name">after</span><span class="token punctuation">:</span> <span class="token string">"eyJfX3RvdGFsQ291bnQiOjMsIl9fcG9zaXRpb24iOjB9"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    nodes <span class="token punctuation">{</span>
      lastName
    <span class="token punctuation">}</span>
    pageInfo <span class="token punctuation">{</span>
      hasNextPage
      endCursor
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<div
              class="gatsby-code-button-container"
              data-toaster-id="15563817904562694000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  &quot;data&quot;: {
    &quot;students&quot;: {
      &quot;nodes&quot;: [
        {
          &quot;lastName&quot;: &quot;Bar&quot;
        }
      ],
      &quot;pageInfo&quot;: {
        &quot;hasNextPage&quot;: true,
        &quot;endCursor&quot;: &quot;eyJfX3RvdGFsQ291bnQiOjMsIl9fcG9zaXRpb24iOjF9&quot;
      }
    }
  }
}`, `15563817904562694000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"students"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"nodes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">"lastName"</span><span class="token operator">:</span> <span class="token string">"Bar"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"pageInfo"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"hasNextPage"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">"endCursor"</span><span class="token operator">:</span> <span class="token string">"eyJfX3RvdGFsQ291bnQiOjMsIl9fcG9zaXRpb24iOjF9"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This will then be translated into simple offset navigation when using <em>Entity Framework</em>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="36615092179224760000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`SELECT &quot;s&quot;.&quot;LastName&quot;
    FROM &quot;Students&quot; AS &quot;s&quot;
    ORDER BY (SELECT 1)
    LIMIT @__p_0 OFFSET @__p_0`, `36615092179224760000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token string">"s"</span><span class="token punctuation">.</span><span class="token string">"LastName"</span>
    <span class="token keyword">FROM</span> <span class="token string">"Students"</span> <span class="token keyword">AS</span> <span class="token string">"s"</span>
    <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">LIMIT</span> <span class="token variable">@__p_0</span> <span class="token keyword">OFFSET</span> <span class="token variable">@__p_0</span></code></pre></div>
<p>Again, without a lot of effort we were able to create a powerful GraphQL server with advanced filter and pagination capabilities by just writing basically one line of code with lots of attributes on top of that.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="37318672513880210000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`using System.Linq;
using HotChocolate;
using HotChocolate.Types;
using HotChocolate.Types.Relay;

namespace ContosoUniversity
{
    public class Query
    {
        [UsePaging]
        [UseSelection]
        [UseFiltering]
        [UseSorting]
        public IQueryable<Student> GetStudents([Service]SchoolContext context) =>
            context.Students;
    }
}`, `37318672513880210000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Linq</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">HotChocolate</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">HotChocolate<span class="token punctuation">.</span>Types</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">HotChocolate<span class="token punctuation">.</span>Types<span class="token punctuation">.</span>Relay</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">ContosoUniversity</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UsePaging</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseSelection</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseFiltering</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseSorting</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IQueryable<span class="token punctuation">&lt;</span>Student<span class="token punctuation">></span></span> <span class="token function">GetStudents</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">SchoolContext</span> context<span class="token punctuation">)</span> <span class="token operator">=></span>
            context<span class="token punctuation">.</span>Students<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Each request in GraphQL translates into native SQL. Whenever possible we translate it into a single SQL request reducing the need to fetch multiple times from the database.</p>
<h2 id="single-selects" style="position:relative;"><a href="#single-selects" aria-label="single selects permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Single Selects</h2>
<p>We still can improve our query and allow to explore the data from different angles.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="6210065531364428000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`using System.Linq;
using HotChocolate;
using HotChocolate.Types;
using HotChocolate.Types.Relay;

namespace ContosoUniversity
{
    public class Query
    {
        [UsePaging]
        [UseSelection]
        [UseFiltering]
        [UseSorting]
        public IQueryable<Student> GetStudents([Service]SchoolContext context) =>
            context.Students;

        [UsePaging]
        [UseSelection]
        [UseFiltering]
        [UseSorting]
        public IQueryable<Course> GetCourses([Service]SchoolContext context) =>
            context.Courses;
    }
}`, `6210065531364428000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Linq</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">HotChocolate</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">HotChocolate<span class="token punctuation">.</span>Types</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">HotChocolate<span class="token punctuation">.</span>Types<span class="token punctuation">.</span>Relay</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">ContosoUniversity</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UsePaging</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseSelection</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseFiltering</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseSorting</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IQueryable<span class="token punctuation">&lt;</span>Student<span class="token punctuation">></span></span> <span class="token function">GetStudents</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">SchoolContext</span> context<span class="token punctuation">)</span> <span class="token operator">=></span>
            context<span class="token punctuation">.</span>Students<span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UsePaging</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseSelection</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseFiltering</span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseSorting</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IQueryable<span class="token punctuation">&lt;</span>Course<span class="token punctuation">></span></span> <span class="token function">GetCourses</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">SchoolContext</span> context<span class="token punctuation">)</span> <span class="token operator">=></span>
            context<span class="token punctuation">.</span>Courses<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>With the above code we can now drill into the data from both sides. In order to get an even nicer API, we might also want to allow dedicated fetches maybe for a <code class="language-text">Student</code> by the student ID.</p>
<p>We could do something like the following and it would work.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="16915482055887710000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public Task<Student> GetStudentByIdAsync([Service]SchoolContext context, int studentId) =>
    context.Students.FirstOrDefaultAsync(t => t.Id == studentId);`, `16915482055887710000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>Student<span class="token punctuation">></span></span> <span class="token function">GetStudentByIdAsync</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">SchoolContext</span> context<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> studentId<span class="token punctuation">)</span> <span class="token operator">=></span>
    context<span class="token punctuation">.</span>Students<span class="token punctuation">.</span><span class="token function">FirstOrDefaultAsync</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Id <span class="token operator">==</span> studentId<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>If we did something like that with <em>Entity Framework</em> we actually would need to write a couple more resolvers to fetch the edges of the entity like the <code class="language-text">Enrollments</code> since with this resolver there is no middleware that does the hard work for us. With the resolver above we are fully in control of the data fetching.</p>
<p>Also doing it like that will lead into other problems since now we are causing multiple fetches to the database and we would no need to think about things like <code class="language-text">DataLoader</code> to guarantee consistency between fetches in a single request.</p>
<p>But we actually have a simple solution for this since we could use our selection middleware still and just tell the middleware pipeline that we actually just want a single result for that resolver.</p>
<p>Let us rewrite the above resolver and look at it again.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="85115659111233750000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`[UseFirstOrDefault]
[UseSelection]
public IQueryable<Student> GetStudentById([Service]SchoolContext context, int studentId) =>
    context.Students.Where(t => t.Id == studentId);`, `85115659111233750000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseFirstOrDefault</span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseSelection</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IQueryable<span class="token punctuation">&lt;</span>Student<span class="token punctuation">></span></span> <span class="token function">GetStudentById</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">SchoolContext</span> context<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> studentId<span class="token punctuation">)</span> <span class="token operator">=></span>
    context<span class="token punctuation">.</span>Students<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Id <span class="token operator">==</span> studentId<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This now looks like the initial resolvers that we wrote to fetch all students. We predefined the where clause and we added a new middleware called <code class="language-text">UseFirstOrDefault</code>. The <code class="language-text">UseFirstOrDefault</code> middleware will rewrite the result type for the GraphQL schema from <code class="language-text">[Student]</code> to <code class="language-text">Student</code> and ensure the we will only fetch a single entity from the database.</p>
<p><code class="language-text">UseFirstOrDefault</code> from a semantics perspective aligns to <code class="language-text">FirstOrDefaultAsync</code> provided by the <em>Entity Framework</em>. <em>Hot Chocolate</em> also provides you with a <code class="language-text">UseSingleOrDefault</code> middleware that will produce a GraphQL field error whenever there is more than one result.</p>
<h2 id="conclusion-and-outlook" style="position:relative;"><a href="#conclusion-and-outlook" aria-label="conclusion and outlook permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Conclusion and Outlook</h2>
<p><em>Hot Chocolate</em> has a powerful execution model that allows to natively integrate with data sources of any kind.</p>
<p>The middleware that we showed you here like <code class="language-text">UseSelection</code> or <code class="language-text">UseFiltering</code> etc. do not only work with <em>Entity Framework</em> but also support other providers that support <code class="language-text">IQueryable&lt;T&gt;</code> to express database queries.</p>
<p>But even if you want to support native SQL without <code class="language-text">IQueryable&lt;T&gt;</code> it is super simple to inherit from our query rewriter base classes and and add this translation.</p>
<p>By just implementing such a query rewriter you are creating a native database provider for <em>Hot Chocolate</em> that integrates fully with the query engine.</p>
<p>We also support the full features shown here with multiple other approaches like code-first with schema types or SDL first.</p>
<p>With version 11 we are introducing a new more powerful query engine that will provide full query execution plan support. Version 11 will have even better filters and push what we showed here today to the limit.</p>
<p>The example used in this post can be found <a href="https://github.com/ChilliCream/hotchocolate-examples/tree/master/blog/2020/2020-03-18-entity-framework/ContosoUni">here</a>.</p>
<p>We also have a more complex real-time GraphQL server example in multiple flavors and different database integrations <a href="https://github.com/ChilliCream/hotchocolate-examples/tree/master/workshop/src/Server">here</a>.</p>
<p>If you want to get into contact with us head over to our <a href="https://join.slack.com/t/hotchocolategraphql/shared_invite/enQtNTA4NjA0ODYwOTQ0LTViMzA2MTM4OWYwYjIxYzViYmM0YmZhYjdiNzBjOTg2ZmU1YmMwNDZiYjUyZWZlMzNiMTk1OWUxNWZhMzQwY2Q">slack channel</a> and join our community.</p>]]></content:encoded>
            <enclosure url="https://chillicream.com/static/51aa4b7db641c09499792c374c79ae86/ee604/banner-entityframework.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[GraphQL - Hot Chocolate 10.3.0]]></title>
            <link>https://chillicream.com/blog/2019/12/26/hot-chocolate-10.3.0</link>
            <guid>/blog/2019/12/26/hot-chocolate-10.3.0</guid>
            <pubDate>Thu, 26 Dec 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Today we are releasing Hot Chocolate version 10.3.0. Although the version number sounds like a small change, it is quite a nice update with…]]></description>
            <content:encoded><![CDATA[<p>Today we are releasing <em>Hot Chocolate</em> version 10.3.0. Although the version number sounds like a small change, it is quite a nice update with lots of new features making <em>Hot Chocolate</em> the most versatile and feature rich GraphQL server on the .NET platform.</p>
<p>We are now working for a long time on version 11. Work on that has begun long before version 10.0.0 was finished. As we progressed with version 11, we felt that we could push some nice productivity features down to the version 10 branch and make users of <em>Hot Chocolate</em> much happier.</p>
<p>This decision culminated in version 10.3.0 and it really feels like a major update with an array of new possibilities that will make you smile.</p>
<p>With version 10.3.0 we are introducing a new code-first variant which we internally call <em>pure code-first</em>.</p>
<p>We now really can for the first time build a fully-fledged GraphQL server just with C#.</p>
<blockquote>
<p>If you want to see how the Star Wars example looks like with the new 10.3.0 and <em>pure code-first</em> then head over <a href="https://github.com/ChilliCream/hotchocolate-examples/tree/master/PureCodeFirst">here</a>.</p>
</blockquote>
<p>Let`s dive into the features and explore what we can do with the newest version of <em>Hot Chocolate</em>.</p>
<h2 id="nullability" style="position:relative;"><a href="#nullability" aria-label="nullability permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Nullability</h2>
<p>The first feature that I want to introduce is C# 8 nullable reference type support.</p>
<p>With previous versions of C# we always had the problem that C# had only nullable reference types, hence we had to give our classes always some extra context to be able to infer non-null GraphQL types.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="80605424265843180000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Query
{
    /// <summary>
    /// This field says hello.
    /// </summary>
    [GraphQLNonNull]
    public string SayHello(string name)
    {
        return name is null ? &quot;Hello!&quot; : \$&quot;Hello {name}!&quot;
    }
}`, `80605424265843180000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
<span class="token punctuation">{</span>
    <span class="token comment">/// &lt;summary></span>
    <span class="token comment">/// This field says hello.</span>
    <span class="token comment">/// &lt;/summary></span>
    <span class="token punctuation">[</span>GraphQLNonNull<span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name <span class="token keyword">is</span> <span class="token keyword">null</span> <span class="token punctuation">?</span> <span class="token string">"Hello!"</span> <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">$"Hello </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">name</span><span class="token punctuation">}</span></span><span class="token string">!"</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>It is needless to say that we also could do that with our schema types.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="30405349438069228000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class QueryType : ObjectType<Query>
{
    protected override void Configure(IObjectTypeDescriptor<Query> descriptor)
    {
        descriptor.Field(t => t.SayHello(default)).Type<NonNullType<StringType>>();
    }
}`, `30405349438069228000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QueryType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType<span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IObjectTypeDescriptor<span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span><span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Type</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NonNullType<span class="token punctuation">&lt;</span>StringType<span class="token punctuation">></span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>With C# 8.0 <em>Microsoft</em> introduced a new language feature called nullable reference types that allows us to define when reference types can be null.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="64921821920969050000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Query
{
    /// <summary>
    /// This field says hello.
    /// </summary>
    public string SayHello(string? name)
    {
        return name is null ? &quot;Hello!&quot; : \$&quot;Hello {name}!&quot;
    }
}`, `64921821920969050000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
<span class="token punctuation">{</span>
    <span class="token comment">/// &lt;summary></span>
    <span class="token comment">/// This field says hello.</span>
    <span class="token comment">/// &lt;/summary></span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> name<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name <span class="token keyword">is</span> <span class="token keyword">null</span> <span class="token punctuation">?</span> <span class="token string">"Hello!"</span> <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">$"Hello </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">name</span><span class="token punctuation">}</span></span><span class="token string">!"</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>When activated either setting the <em>MSBuild</em> property <code class="language-text">&lt;Nullable&gt;enable&lt;/Nullable&gt;</code> or by adding a preprocessor directive <code class="language-text">#nullable enable</code> <em>Hot Chocolate</em> will automatically infer the nullability of GraphQL types from the corresponding .NET types.</p>
<p>Hence the above class is now correctly inferred and translates nicely into GraphQL types.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="21911344861107597000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  &quot;This field says hello.&quot;
  sayHello(name: String): String!
}`, `21911344861107597000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token description string">"<span class="token language-markdown">This field says hello.</span>"</span>
  <span class="token attr-name">sayHello</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> String<span class="token punctuation">)</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="descriptor-attributes" style="position:relative;"><a href="#descriptor-attributes" aria-label="descriptor attributes permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Descriptor Attributes</h2>
<p>One big issue that we still saw with <em>pure code-first</em> was how people should apply middleware to their fields. This was for a long time a roadblock for us in making this experience more powerful and easy to use.</p>
<p>Our solution to this are descriptor attributes which act as a kind of an interceptor into the inferred schema type. This allows users to create their own attributes in an easy way and with all the power that is available through the schema type APIs.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="13270220154016620000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public sealed class ToUpperAttribute : ObjectFieldDescriptorAttribute
{
    protected override void OnConfigure(
        IDescriptorContext context,
        IObjectFieldDescriptor descriptor,
        MemberInfo member)
    {
        descriptor.Use(next => async ctx =>
        {
            await next(ctx);

            if(ctx.Result is string s)
            {
                ctx.Result = s.ToUpperInvariant();
            }
        })
    }
}`, `13270220154016620000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">sealed</span> <span class="token keyword">class</span> <span class="token class-name">ToUpperAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectFieldDescriptorAttribute</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnConfigure</span><span class="token punctuation">(</span>
        <span class="token class-name">IDescriptorContext</span> context<span class="token punctuation">,</span>
        <span class="token class-name">IObjectFieldDescriptor</span> descriptor<span class="token punctuation">,</span>
        <span class="token class-name">MemberInfo</span> member<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span>next <span class="token operator">=></span> <span class="token keyword">async</span> ctx <span class="token operator">=></span>
        <span class="token punctuation">{</span>
            <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>Result <span class="token keyword">is</span> <span class="token class-name"><span class="token keyword">string</span></span> s<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                ctx<span class="token punctuation">.</span>Result <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">ToUpperInvariant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The attributes very cleanly package all the logic for a middleware or other configuration aspects. This makes it very easy to use. By just applying an attribute to a class, property, method or any other member kind we can add completely new functionality to that specific element or even completely reconfigure it.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="90267980050906150000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Query
{
    /// <summary>
    /// This field says hello.
    /// </summary>
    [ToUpper]
    public string SayHello(string? name)
    {
        return name is null ? &quot;Hello!&quot; : \$&quot;Hello {name}!&quot;
    }
}`, `90267980050906150000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
<span class="token punctuation">{</span>
    <span class="token comment">/// &lt;summary></span>
    <span class="token comment">/// This field says hello.</span>
    <span class="token comment">/// &lt;/summary></span>
    <span class="token punctuation">[</span>ToUpper<span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> name<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name <span class="token keyword">is</span> <span class="token keyword">null</span> <span class="token punctuation">?</span> <span class="token string">"Hello!"</span> <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">$"Hello </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">name</span><span class="token punctuation">}</span></span><span class="token string">!"</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We have created attribute base classes for all the important descriptors.</p>
<ul>
<li>EnumTypeDescriptorAttribute</li>
<li>EnumValueDescriptorAttribute</li>
<li>InputObjectTypeDescriptorAttribute</li>
<li>InputFieldDescriptorAttribute</li>
<li>InterfaceTypeDescriptorAttribute</li>
<li>InterfaceFieldDescriptorAttribute</li>
<li>ObjectTypeDescriptorAttribute</li>
<li>ObjectFieldDescriptorAttribute</li>
<li>ArgumentDescriptorAttribute</li>
<li>UnionTypeDescriptorAttribute</li>
</ul>
<p>But sometimes we even want to drill deeper with attributes and use a single attribute with multiple descriptors.</p>
<p>Maybe we only want to apply arguments through an attribute to a field if the field is on an interface.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="80509162366229140000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public interface IFoo
{
    [UseOffsetPaging]
    IQueryable<IFoo> GetFoos();
}`, `80509162366229140000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IFoo</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseOffsetPaging</span></span><span class="token punctuation">]</span>
    <span class="token return-type class-name">IQueryable<span class="token punctuation">&lt;</span>IFoo<span class="token punctuation">></span></span> <span class="token function">GetFoos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<div
              class="gatsby-code-button-container"
              data-toaster-id="44538824028970160000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`interface Foo {
  foos(skip: Int, take: Int): [Foo!]!
}`, `44538824028970160000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">interface</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  <span class="token attr-name">foos</span><span class="token punctuation">(</span><span class="token attr-name">skip</span><span class="token punctuation">:</span> Int<span class="token punctuation">,</span> <span class="token attr-name">take</span><span class="token punctuation">:</span> Int<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Foo<span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span></code></pre></div>
<p>But if the same attribute is applied to an object field then we might also want to apply a middleware that adds some cross-cutting functionality to it like a paging algorithm.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="8711453263089108000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public interface Bar : IFoo
{
    [UseOffsetPaging]
    IQueryable<IFoo> GetFoos();
}`, `8711453263089108000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Bar</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IFoo</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseOffsetPaging</span></span><span class="token punctuation">]</span>
    <span class="token return-type class-name">IQueryable<span class="token punctuation">&lt;</span>IFoo<span class="token punctuation">></span></span> <span class="token function">GetFoos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<div
              class="gatsby-code-button-container"
              data-toaster-id="80325122638936770000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Bar implements Foo {
  foos(skip: Int, take: Int): [Foo!]!
}`, `80325122638936770000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Bar</span> <span class="token keyword">implements</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  <span class="token attr-name">foos</span><span class="token punctuation">(</span><span class="token attr-name">skip</span><span class="token punctuation">:</span> Int<span class="token punctuation">,</span> <span class="token attr-name">take</span><span class="token punctuation">:</span> Int<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Foo<span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span></code></pre></div>
<p>For this we can use the attribute base class <code class="language-text">DescriptorAttribute</code>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="23928962959055890000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public sealed class UseOffsetPagingAttribute : DescriptorAttribute
{
    protected internal override void TryConfigure(
        IDescriptorContext context,
        IDescriptor descriptor,
        ICustomAttributeProvider element)
    {
        if (element is MemberInfo m)
        {
            if (descriptor is IObjectFieldDescriptor ofd)
            {
                // do something
            }
            else if (descriptor is IInterfaceFieldDescriptor ifd)
            {
                // do something
            }
        }
    }
}`, `23928962959055890000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">sealed</span> <span class="token keyword">class</span> <span class="token class-name">UseOffsetPagingAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">DescriptorAttribute</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">internal</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TryConfigure</span><span class="token punctuation">(</span>
        <span class="token class-name">IDescriptorContext</span> context<span class="token punctuation">,</span>
        <span class="token class-name">IDescriptor</span> descriptor<span class="token punctuation">,</span>
        <span class="token class-name">ICustomAttributeProvider</span> element<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>element <span class="token keyword">is</span> <span class="token class-name">MemberInfo</span> m<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>descriptor <span class="token keyword">is</span> <span class="token class-name">IObjectFieldDescriptor</span> ofd<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token comment">// do something</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>descriptor <span class="token keyword">is</span> <span class="token class-name">IInterfaceFieldDescriptor</span> ifd<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token comment">// do something</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The <code class="language-text">TryConfigure</code> method passes in the <code class="language-text">IDescriptorContext</code> which provides us access to conventions and other services. Also, we have access to the <code class="language-text">descriptor</code> that is associated with the annotated element. Additionally the <code class="language-text">element</code> to which the attribute is annotated to is also passed in.</p>
<p>With this it is very easy to probe for different cases and build complex functionality in a simple attribute that is easy to use by others.</p>
<p>Last but not least we also have added a set of built-in attributes for paging, filtering, sorting and authorization.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="57476358290300400000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Query
{
    /// <summary>
    /// This field says hello.
    /// </summary>
    [Authorize(Policy = &quot;MyPolicy&quot;)]
    [UsePaging]
    [UseFiltering]
    [UseSorting]
    public IQueryable<Customer> GetCustomers()
    {
        ...
    }
}`, `57476358290300400000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
<span class="token punctuation">{</span>
    <span class="token comment">/// &lt;summary></span>
    <span class="token comment">/// This field says hello.</span>
    <span class="token comment">/// &lt;/summary></span>
    <span class="token punctuation">[</span><span class="token function">Authorize</span><span class="token punctuation">(</span>Policy <span class="token operator">=</span> <span class="token string">"MyPolicy"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UsePaging</span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseFiltering</span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">UseSorting</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IQueryable<span class="token punctuation">&lt;</span>Customer<span class="token punctuation">></span></span> <span class="token function">GetCustomers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The attributes can be chained just like with the fluent API. The above code would translate into the following schema type.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="14436370627108653000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class QueryType : ObjectType<Query>
{
    protected override void Configure(IObjectTypeDescriptor descriptor)
    {
        descriptor.Field(t => t.GetCustomers())
            .Description(&quot;This field says hello.&quot;)
            .Authorize(&quot;MyPolicy&quot;)
            .UsePaging<ObjectType<Customer>>()
            .UseFiltering()
            .UseSorting();
    }
}`, `14436370627108653000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QueryType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType<span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IObjectTypeDescriptor</span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span><span class="token function">GetCustomers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Description</span><span class="token punctuation">(</span><span class="token string">"This field says hello."</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Authorize</span><span class="token punctuation">(</span><span class="token string">"MyPolicy"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UsePaging</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ObjectType<span class="token punctuation">&lt;</span>Customer<span class="token punctuation">></span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">UseFiltering</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">UseSorting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="type-attributes" style="position:relative;"><a href="#type-attributes" aria-label="type attributes permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Type Attributes</h2>
<p>Another issue that we had was telling the schema builder that we want to force types to bind as specific GraphQL type.</p>
<p>A class for instance is automatically inferred as an object type when the type is discovered in an output context. But a <code class="language-text">struct</code> on the other hand is not automatically inferred if it is not mapped as a scalar since it could become quite messy with distinguishing if a <code class="language-text">struct</code> should become a scalar or an object type or an input object type.</p>
<p>For this problem we have created a special set of descriptor attributes that mark the .NET type as a specific GraphQL type.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="45659181625133050000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`[ObjectType(Name = &quot;QueryRoot&quot;)]
public struct Query
{
    public string Foo => &quot;Foo&quot;;
}`, `45659181625133050000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ObjectType</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name <span class="token operator">=</span> <span class="token string">"QueryRoot"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">struct</span> <span class="token class-name">Query</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Foo <span class="token operator">=></span> <span class="token string">"Foo"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The same would work if we wanted to enforce that an abstract base class for instance becomes an interface or even a union type. It is important that the context in which this type is discovered also matters. So, one type could translate into an input type and an output type at the same time.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="85485381388876330000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Query
{
    public Foo GetFoo(Foo foo) => foo;
}

public class Foo
{
    public string Bar { get; set; }
}`, `85485381388876330000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Foo</span> <span class="token function">GetFoo</span><span class="token punctuation">(</span><span class="token class-name">Foo</span> foo<span class="token punctuation">)</span> <span class="token operator">=></span> foo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Foo</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Bar <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The above example would automatically translate into a GraphQL schema where <code class="language-text">Foo</code> would be represented by two types in the GraphQL schema.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="70731700730980790000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  foo(input: FooInput): Foo
}

type Foo {
  bar: String
}

input FooInput {
  bar: String
}`, `70731700730980790000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">foo</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> FooInput<span class="token punctuation">)</span><span class="token punctuation">:</span> Foo
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  <span class="token attr-name">bar</span><span class="token punctuation">:</span> String
<span class="token punctuation">}</span>

<span class="token keyword">input</span> FooInput <span class="token punctuation">{</span>
  <span class="token attr-name">bar</span><span class="token punctuation">:</span> String
<span class="token punctuation">}</span></code></pre></div>
<p>OK, it starts to feel quite nice :)</p>
<p>But still we are not there yet.</p>
<p>When people start building big APIs, they tend to want to split up types. The most asked question on our slack channel is how to split up the query type.</p>
<p>With SDL-first and our traditional code-first approach this is as easy as eating pie since we can write type extensions.</p>
<p>So, we added for 10.3.0 the ability to also split up types with the <em>pure code-first</em> approach.</p>
<p>Let`s say we have a query type and we want to divide this up into logical units. We could add a bodiless query type by either adding an empty class to our <code class="language-text">SchemaBuilder</code> or by using a schema type.</p>
<p><strong>Approach 1 - Empty Class</strong></p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="20664326620257858000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Query
{
}

SchemaBuilder.New()
    .AddQueryType<Query>()
    ...`, `20664326620257858000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span></code></pre></div>
<p><strong>Approach 2 - Schema Type</strong></p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="59478987459498180000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Query : ObjectType
{
    protected override void Configure(IObjectTypeDescriptor descriptor)
    {
        descriptor.Name(&quot;Query&quot;);
    }
}

SchemaBuilder.New()
    .AddQueryType<QueryType>()
    ...`, `59478987459498180000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IObjectTypeDescriptor</span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token string">"Query"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>QueryType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span></code></pre></div>
<p>Next we could create standard C# classes to extend on the query type. We can divide our type into as many classes as we want. Also, since each class is independent we could for instance have extra query fields during development time by just adding an extension class on dev to our schema builder and on prod we could leave that away.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="94280199612258480000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`[ExtendObjectType(Name = &quot;Query&quot;)]
public class FooQueries
{
    public string Hello() => &quot;abc&quot;;
}

SchemaBuilder.New()
    .AddQueryType<QueryType>()
    .AddType<FooQueries>()
    .Create();`, `94280199612258480000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ExtendObjectType</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name <span class="token operator">=</span> <span class="token string">"Query"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FooQueries</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token string">"abc"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>QueryType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>FooQueries<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>The above code would result in the following schema:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="59369087167480750000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  hello: String
}`, `59369087167480750000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">hello</span><span class="token punctuation">:</span> String
<span class="token punctuation">}</span></code></pre></div>
<p>Object type extensions let us divide our GraphQL types into multiple .NET types. This lets us be more flexible in building our API. Moreover, we can divide our query type into logical units and test them independently from each other. We can do that by just writing a clean C# class that only really would need one attribute to mark it as an extension.</p>
<h2 id="interfaces" style="position:relative;"><a href="#interfaces" aria-label="interfaces permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Interfaces</h2>
<p><em>Hot Chocolate</em> is able to infer interface types from C# APIs since version 10.0.0. But now with the new capabilities of <em>Hot Chocolate</em> in 10.3.0 this becomes a really great feature.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="29227378054406762000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Query
{
    /// <summary>
    /// Get my pet :)
    /// </summary>
    public IPet? GetPet(int id)
    {
        // some code
    }
}

public interface IPet
{
    // some code
}

public class Dog : IPet
{
    // some code
}

public class Cat : IPet
{
    // some code
}

SchemaBuilder.New()
    .AddQuery<Query>()
    .AddType<Dog>()
    .AddType<Cat>()
    .Create();`, `29227378054406762000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
<span class="token punctuation">{</span>
    <span class="token comment">/// &lt;summary></span>
    <span class="token comment">/// Get my pet :)</span>
    <span class="token comment">/// &lt;/summary></span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPet<span class="token punctuation">?</span></span> <span class="token function">GetPet</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// some code</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IPet</span>
<span class="token punctuation">{</span>
    <span class="token comment">// some code</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IPet</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">// some code</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IPet</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">// some code</span>
<span class="token punctuation">}</span>

SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQuery</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Dog<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Cat<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div
              class="gatsby-code-button-container"
              data-toaster-id="79942453724120100000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  &quot;Get my pet :)&quot;
  pet(id: Int!): IPet
}

interface Pet {
    // fields
}

type Dog implements Pet {
    // fields
}

type Cat implements Pet {
    // fields
}`, `79942453724120100000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token description string">"<span class="token language-markdown">Get my pet :)</span>"</span>
  <span class="token attr-name">pet</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> Int<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> IPet
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Pet</span> <span class="token punctuation">{</span>
    // fields
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Pet</span> <span class="token punctuation">{</span>
    // fields
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Cat</span> <span class="token keyword">implements</span> <span class="token class-name">Pet</span> <span class="token punctuation">{</span>
    // fields
<span class="token punctuation">}</span></code></pre></div>
<p>This feels awesome. The schema builder translates our C# types exactly the way we meant them into a clean GraphQL schema. We do not have to write all those schema types anymore. We just write clean C# code and let the schema builder handle the rest.</p>
<blockquote>
<p>It is important to know that we still can use schema types. Also, we can mix our approach, for instance we could use schema types in situations where we do not want to add attributes to our types.</p>
</blockquote>
<h2 id="optional" style="position:relative;"><a href="#optional" aria-label="optional permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Optional</h2>
<p>Another concept we are introducing with 10.3.0 is optional on input object types. We are planning to use optional even more with version 11 but with 10.3.0 you can use them on input object types in order to distinguish between <strong>not set</strong> and <strong>null</strong>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="62803532495272820000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Foo
{
    public Optional<string> Bar { get; set; }
}`, `62803532495272820000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Foo</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Optional<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span> Bar <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The important thing with optional is that they implicitly convert to the type specified as type parameter. This means that the following is valid code:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="35141100994927464000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`var foo = new Foo { Bar = &quot;ABCDEF&quot; };
string fooValue = foo.Bar;`, `35141100994927464000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name"><span class="token keyword">var</span></span> foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Foo</span> <span class="token punctuation">{</span> Bar <span class="token operator">=</span> <span class="token string">"ABCDEF"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span> fooValue <span class="token operator">=</span> foo<span class="token punctuation">.</span>Bar<span class="token punctuation">;</span></code></pre></div>
<p>But we also can now distinguish between <strong>not set</strong> and <strong>null</strong> since we can ask the optional if it has a value.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="7988702378494450000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`var foo = new Foo { Bar = &quot;ABCDEF&quot; };
if(foo.Bar.HasValue)
{
    // property was set.
}`, `7988702378494450000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name"><span class="token keyword">var</span></span> foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Foo</span> <span class="token punctuation">{</span> Bar <span class="token operator">=</span> <span class="token string">"ABCDEF"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>Bar<span class="token punctuation">.</span>HasValue<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// property was set.</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Optional in 10.3.0 only work on properties of input objects meaning we cannot use them on output types. With 10.3.0 the execution engine has no knowledge about optional at all.</p>
<p>Also, we cannot use optional on arguments in the way that we could ask the context for an optional like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="12058416910411872000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`context.Argument<Optional<string>>(&quot;foo&quot;);`, `12058416910411872000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">context<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Argument</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Optional<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>We will introduce this with the upcoming version 11 release. We decided to not change the execution engine to much with 10.3.0 since we are doing a lot of work on the execution engine with version 11.</p>
<p>Another caveat here is that if you are using <code class="language-text">Optional&lt;T&gt;</code> on a property, the property cannot have a default value. This is also one thing we will change with version 11.</p>
<p>Still, optional can help already in version 10.3.0 with some scenarios and with version 11 we will go all the way to make this an awesome addition.</p>
<h2 id="type-extensions" style="position:relative;"><a href="#type-extensions" aria-label="type extensions permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Type Extensions</h2>
<p>For the last few paragraphs I only talked about the <em>pure code-first</em> approach but we actually also added a new feature to the schema types (aka <em>code-first</em> approach).</p>
<p>For a long time now, we can extend types or break types up into multiple parts.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="28824725905625326000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class FooExtension : ObjectTypeExtension
{
    protected override void Configure(ObjectTypeDescriptor descriptor)
    {
        descriptor.Name(&quot;Foo&quot;);
        descriptor.Field<Foo>(t => t.Bar).Use(...);
        descriptor.Field(&quot;baz&quot;).Use(...);
    }
}`, `28824725905625326000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FooExtension</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectTypeExtension</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">ObjectTypeDescriptor</span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token string">"Foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        descriptor<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Field</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Bar<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span><span class="token string">"baz"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>But the type extension until now did not allow to specify an underlying model. With 10.3.0 we now allow you to specify any type extension with a generic type parameter.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="11618021627122598000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class FooExtension : ObjectTypeExtension<Foo>
{
    protected override void Configure(ObjectTypeDescriptor<Foo> descriptor)
    {
        descriptor.Name(&quot;Foo&quot;);
        descriptor.Field(t => t.Bar).Use(...);
    }
}`, `11618021627122598000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FooExtension</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectTypeExtension<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">ObjectTypeDescriptor<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token string">"Foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Bar<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="immutable-input-objects" style="position:relative;"><a href="#immutable-input-objects" aria-label="immutable input objects permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Immutable Input Objects</h2>
<p>We are not done yet :) There are still more features on 10.3.0.</p>
<p>Another feature we have integrated into the input object types is support for immutable input objects. This becomes important when working with C# 8.0 and nullable reference types.</p>
<p>With version 10.3.0 we can now specify immutable classes like the following one as input object.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="64044737420613100000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class ImmutableFoo
{
    public ImmutableFoo(string bar)
    {
        Bar = bar;
    }

    public string Bar { get; }
}`, `64044737420613100000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ImmutableFoo</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">ImmutableFoo</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> bar<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Bar <span class="token operator">=</span> bar<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Bar <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>If we use the above class as input object the type can deserialize or parse it correctly by using the constructor instead of setting the properties.</p>
<p>Also supported is to use the constructor just for non-null reference types like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="52944460220230386000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Foo
{
    public Foo(string bar)
    {
        Bar = bar;
    }

    public string Bar { get; set; }

    public string? Baz { get; set; }
}`, `52944460220230386000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Foo</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> bar<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Bar <span class="token operator">=</span> bar<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Bar <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> Baz <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="subscriptions" style="position:relative;"><a href="#subscriptions" aria-label="subscriptions permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Subscriptions</h2>
<p>Last but not least we did some work to make subscriptions easier and allow people to leverage the power of async streams.</p>
<p>If you are happy with subscriptions today, you do not need to change anything.</p>
<p>But if you want to easily hook up Azure ServiceBus or stream something over what ever, then this has become super simple with the new subscribe resolver.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="57288333346807650000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class SubscriptionType : ObjectType
{
    protected override void Configure(ObjectTypeDescriptor<Foo> descriptor)
    {
        descriptor.Field(&quot;foo&quot;)
            .Subscribe(async ctx =>
            {
                async foreach(var payload in await serviceBus.OnMessageReceiveAsync())
                {
                    yield return payload;
                }
            })
            ...
    }
}`, `57288333346807650000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubscriptionType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">ObjectTypeDescriptor<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Subscribe</span><span class="token punctuation">(</span><span class="token keyword">async</span> ctx <span class="token operator">=></span>
            <span class="token punctuation">{</span>
                <span class="token keyword">async</span> <span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> payload <span class="token keyword">in</span> <span class="token keyword">await</span> serviceBus<span class="token punctuation">.</span><span class="token function">OnMessageReceiveAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">yield</span> <span class="token keyword">return</span> payload<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>You also can bind the subscribe resolver like any other resolver to an underlying method.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="30840591891762225000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class SubscriptionType : ObjectType<Subscription>
{
    protected override void Configure(ObjectTypeDescriptor<Foo> descriptor)
    {
        descriptor
            .Field(t => t.GetMessageAsync())
            .Subscribe(t => t.OnReceiveMessage())
            ...
    }
}`, `30840591891762225000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubscriptionType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType<span class="token punctuation">&lt;</span>Subscription<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">ObjectTypeDescriptor<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor
            <span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span><span class="token function">GetMessageAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Subscribe</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span><span class="token function">OnReceiveMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The subscribe resolvers accepts <code class="language-text">IAsyncEnumerable&lt;T&gt;</code>, <code class="language-text">IEnumerable&lt;T&gt;</code> and <code class="language-text">IObservable&lt;T&gt;</code> as result.</p>
<h2 id="wrapping-it-up" style="position:relative;"><a href="#wrapping-it-up" aria-label="wrapping it up permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Wrapping it up</h2>
<p>With <em>Hot Chocolate</em> 10.3.0 we focused on productivity features that have a minor impact on the overall system. This means that we enable a whole bunch of new scenarios with the current <em>Hot Chocolate</em> server generation.</p>
<p>With version 11 we will take this to a whole new level with a completely new execution engine that is much more efficient and allows for completely new features like <code class="language-text">@defer</code>.</p>
<p>Also, version 11 will introduce new tools and libraries to the platform like <em>Banana Cakepop</em> (preview dropping very soon), <em>Strawberry Shake</em> or our new <em>Visual Studio for Windows Integration</em>.</p>
<p>We have a lot more in our pipeline and are totally obsessed with GraphQL and .NET.</p>
<p>I hope you will enjoy 10.3.0 as much as I already do and join the <em>Hot Chocolate</em> fold.</p>
<p>BTW, head over to our <em>pure code-first</em> <a href="https://github.com/ChilliCream/hotchocolate-examples/tree/master/PureCodeFirst">Star Wars example</a>.</p>
<p>If you want to get into contact with us head over to our <a href="https://join.slack.com/t/hotchocolategraphql/shared_invite/enQtNTA4NjA0ODYwOTQ0LTViMzA2MTM4OWYwYjIxYzViYmM0YmZhYjdiNzBjOTg2ZmU1YmMwNDZiYjUyZWZlMzNiMTk1OWUxNWZhMzQwY2Q">slack channel</a> and join our community.</p>]]></content:encoded>
            <enclosure url="https://chillicream.com/static/3bff7544d8c94207baaf1de9c9faad4f/ee604/hotchocolate-banner.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Lets supercharge your GraphQL schema :)]]></title>
            <link>https://chillicream.com/blog/2019/11/29/schema-design</link>
            <guid>/blog/2019/11/29/schema-design</guid>
            <pubDate>Fri, 29 Nov 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[When you think about how we build our GraphQL schemas with Hot Chocolate we always need to fall back to either the schema types or the…]]></description>
            <content:encoded><![CDATA[<p>When you think about how we build our GraphQL schemas with <em>Hot Chocolate</em> we always need to fall back to either the schema types or the GraphQL SDL in order to get the typings right.</p>
<p>This brings with it a lot of boiler plate code that we actually could infer from our C# code. With version 10.3.0 we have decided to integrate some of the version 11 features to make it possible to have these capabilities now instead of next year.</p>
<h2 id="nullability" style="position:relative;"><a href="#nullability" aria-label="nullability permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Nullability</h2>
<p>First, let us get the obvious out of the way. C# with version 8.0 has now nullable reference types, or actually they now have non-null reference types.</p>
<p>It does not matter how you look at it, but the result is that we now can differentiate between nullable reference types and reference types that cannot be null.</p>
<p>With version 10.3.0-preview.2 we can infer these, and you finally do not need helpers like attributes and other things to define your schema types with non-null types.</p>
<p>A simple query like ...</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="31575543273172690000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Query
{
    /// <summary>
    /// This field says hello.
    /// </summary>
    public string SayHello(string? name)
    {
        return name is null ? &quot;Hello!&quot; : \$&quot;Hello {name}!&quot;
    }
}`, `31575543273172690000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
<span class="token punctuation">{</span>
    <span class="token comment">/// &lt;summary></span>
    <span class="token comment">/// This field says hello.</span>
    <span class="token comment">/// &lt;/summary></span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> name<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name <span class="token keyword">is</span> <span class="token keyword">null</span> <span class="token punctuation">?</span> <span class="token string">"Hello!"</span> <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">$"Hello </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">name</span><span class="token punctuation">}</span></span><span class="token string">!"</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>... is now correctly inferred to:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="8190084007505561000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  &quot;This field says hello.&quot;
  sayHello(name: String): String!
}`, `8190084007505561000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token description string">"<span class="token language-markdown">This field says hello.</span>"</span>
  <span class="token attr-name">sayHello</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> String<span class="token punctuation">)</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Do not get me wrong here, I still love our schema types and we will not get rid of them since they are the foundation of every schema. We still are using them in the above example, you just do not need to see them anymore. Moreover, we see these improvements more as an additional way to define a GraphQL schemas with pure C# types.</p>
<p>In the beginning we decided that people should be free in their way of how they want to define their schemas. We are still 100% committed to SDL first, code-first with schema types and code-first with pure C# types.</p>
<h2 id="interfaces" style="position:relative;"><a href="#interfaces" aria-label="interfaces permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Interfaces</h2>
<p>Since version 10.0.0 <em>Hot Chocolate</em> is able to infer interface types from API usage. This means that we will correctly infer the interfaces that you use and the types that implement those interfaces.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="72356855734283610000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Query
{
    /// <summary>
    /// Get my pet :)
    /// </summary>
    public IPet? GetPet(int id)
    {
        // some code
    }
}

public interface IPet
{
    // some code
}

public class Dog : IPet
{
    // some code
}

public class Cat : IPet
{
    // some code
}

SchemaBuilder.New()
    .AddQuery<Query>()
    .AddType<Dog>()
    .AddType<Cat>()
    .Create();`, `72356855734283610000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
<span class="token punctuation">{</span>
    <span class="token comment">/// &lt;summary></span>
    <span class="token comment">/// Get my pet :)</span>
    <span class="token comment">/// &lt;/summary></span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPet<span class="token punctuation">?</span></span> <span class="token function">GetPet</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// some code</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IPet</span>
<span class="token punctuation">{</span>
    <span class="token comment">// some code</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IPet</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">// some code</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IPet</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">// some code</span>
<span class="token punctuation">}</span>

SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQuery</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Dog<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Cat<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div
              class="gatsby-code-button-container"
              data-toaster-id="48325441334307960000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  &quot;Get my pet :)&quot;
  pet(id: Int!): IPet
}

interface Pet {
    // fields
}

type Dog implements Pet {
    // fields
}

type Cat implements Pet {
    // fields
}`, `48325441334307960000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token description string">"<span class="token language-markdown">Get my pet :)</span>"</span>
  <span class="token attr-name">pet</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> Int<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> IPet
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Pet</span> <span class="token punctuation">{</span>
    // fields
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Pet</span> <span class="token punctuation">{</span>
    // fields
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Cat</span> <span class="token keyword">implements</span> <span class="token class-name">Pet</span> <span class="token punctuation">{</span>
    // fields
<span class="token punctuation">}</span></code></pre></div>
<p>This feels awesome. The schema builder translates our C# types exactly the way we meant them. We do not have to tell the schema builder any more how to do that it will just work.</p>
<h2 id="descriptor-attributes" style="position:relative;"><a href="#descriptor-attributes" aria-label="descriptor attributes permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Descriptor Attributes</h2>
<p>But what about field middleware and other more complex features like type extensions and so on.</p>
<p>This was something we contemplated for a long time. In the end we came up with powerful descriptor attributes. This basically allows you to create attributes for your schema in which you have access to the full descriptor API. Let me give you an example for this.</p>
<p>Let us say we want to create a simple middleware that can be put on properties and methods and that applies a <code class="language-text">ToUpper</code> on every resulting <code class="language-text">string</code> on the annotated member.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="36240906934097117000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public sealed class ToUpperAttribute : ObjectFieldDescriptorAttribute
{
    protected override void OnConfigure(IObjectFieldDescriptor descriptor)
    {
        descriptor.Use(next => async ctx =>
        {
            await next(ctx);

            if(ctx.Result is string s)
            {
                ctx.Result = s.ToUpperInvariant();
            }
        })
    }
}`, `36240906934097117000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">sealed</span> <span class="token keyword">class</span> <span class="token class-name">ToUpperAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectFieldDescriptorAttribute</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnConfigure</span><span class="token punctuation">(</span><span class="token class-name">IObjectFieldDescriptor</span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span>next <span class="token operator">=></span> <span class="token keyword">async</span> ctx <span class="token operator">=></span>
        <span class="token punctuation">{</span>
            <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>Result <span class="token keyword">is</span> <span class="token class-name"><span class="token keyword">string</span></span> s<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                ctx<span class="token punctuation">.</span>Result <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">ToUpperInvariant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The neat thing is that we have full access to all the things we have on our fluent API. The attributes very cleanly packages all the logic and makes it very easy applicable. By just applying an attribute to a property or method I can add huge functionality to that member (resolver).</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="47403018091109670000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Query
{
    /// <summary>
    /// This field says hello.
    /// </summary>
    [ToUpper]
    public string SayHello(string? name)
    {
        return name is null ? &quot;Hello!&quot; : \$&quot;Hello {name}!&quot;
    }
}`, `47403018091109670000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
<span class="token punctuation">{</span>
    <span class="token comment">/// &lt;summary></span>
    <span class="token comment">/// This field says hello.</span>
    <span class="token comment">/// &lt;/summary></span>
    <span class="token punctuation">[</span>ToUpper<span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> name<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name <span class="token keyword">is</span> <span class="token keyword">null</span> <span class="token punctuation">?</span> <span class="token string">"Hello!"</span> <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">$"Hello </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">name</span><span class="token punctuation">}</span></span><span class="token string">!"</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This allows us to enable the full power of schema types with pure C# types. The new attributes will arrive with 10.3.0-preview.3 probably on Monday.</p>
<p>We will add attributes for each descriptor type. Moreover, you can apply input and output attributes on the same type, and we will create automatically an output- and an input-version of that type.</p>
<p>We will also provide attributes for all our middleware like paging, filtering, sorting and authorization. So, you will have the full power of <em>Hot Chocolate</em> even when you do not use our schema type directly.</p>
<blockquote>
<p>I really love this feature :)</p>
</blockquote>
<h2 id="type-extensions" style="position:relative;"><a href="#type-extensions" aria-label="type extensions permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Type Extensions</h2>
<p>Another thing we want to make better with 10.3.0 are the code-first type extensions. You could already do cool things with the type extensions but there are two things that did not feel nice enough.</p>
<p>First, we did not have a generic type extension type. This means that defining fields can sometimes be a pain. We had to either declare fields and provide the declaring type with them or we had to specify the field with a string name.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="87864944592710140000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class FooExtension : ObjectTypeExtension
{
    protected override void Configure(ObjectTypeDescriptor descriptor)
    {
        descriptor.Name(&quot;Foo&quot;);
        descriptor.Field<Foo>(t => t.Bar).Use(...);
        descriptor.Field(&quot;baz&quot;).Use(...);
    }
}`, `87864944592710140000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FooExtension</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectTypeExtension</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">ObjectTypeDescriptor</span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token string">"Foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        descriptor<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Field</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Bar<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span><span class="token string">"baz"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>With the new version we can now basically do the same than we do with standard types by providing a type parameter:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="87625652267744510000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class FooExtension : ObjectTypeExtension<Foo>
{
    protected override void Configure(ObjectTypeDescriptor<Foo> descriptor)
    {
        descriptor.Name(&quot;Foo&quot;);
        descriptor.Field(t => t.Bar).Use(...);
    }
}`, `87625652267744510000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FooExtension</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectTypeExtension<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">ObjectTypeDescriptor<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token string">"Foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Bar<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The second thing that is sometimes good and other times bad is that we have to provide an name. With 10.3.0 we first of all can now infer the type from the mode.</p>
<p>You also can just type in the name like before. Or you provide as with the type that you want to actually extend.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="5527389729670773000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class FooExtension : ObjectTypeExtension<Foo>
{
    protected override void Configure(ObjectTypeDescriptor<Foo> descriptor)
    {
        descriptor.Extend<FooType>()
        descriptor.Field(t => t.Bar).Use(...);
    }
}`, `5527389729670773000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FooExtension</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectTypeExtension<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">ObjectTypeDescriptor<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Extend</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>FooType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Bar<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="optional" style="position:relative;"><a href="#optional" aria-label="optional permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Optional</h2>
<p>Another concept we will introduce with 10.3.0 is optionals. This is often a thing we want to use when we are talking about input types. We have introduced this concept already with <em>Strawberry Shake</em> and like it a lot.</p>
<p>So, we are porting it now back to the server. In your resolvers you can now use for every argument the optional wrapper type and this will tell you if the argument was not provided. This will allow you to easily do partial updates. We could do partial updates before but not as elegant as now. With version 11 we will improve on that by having a nice patch type.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="11149322380981764000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public async Task<Foo> GetMyFoo(Optional<string> id)
{
    // ...
}`, `11149322380981764000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span> <span class="token function">GetMyFoo</span><span class="token punctuation">(</span><span class="token class-name">Optional<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span> id<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Also you can use optionals in input objects.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="96279977487345570000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Foo
{
    public Optional<string> Bar { get; set; }
}`, `96279977487345570000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Foo</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Optional<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span> Bar <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The nice thing with the inputs are that they implicitly convert.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="47196347365791015000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`var foo = new Foo { Bar = &quot;My String&quot; };`, `47196347365791015000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name"><span class="token keyword">var</span></span> foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Foo</span> <span class="token punctuation">{</span> Bar <span class="token operator">=</span> <span class="token string">"My String"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h2 id="wrapping-it-up" style="position:relative;"><a href="#wrapping-it-up" aria-label="wrapping it up permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Wrapping it up</h2>
<p><em>Hot Chocolate</em> 10.3.0 will bring a lot new improvements to how we can create GraphQL schemas. All these changes are just additions and there are no breaking changes involved meaning we give you a lot of version 11 productivity improvements now.</p>
<p>So, when can you expect 10.3.0. We will deliver nullable ref types with 10.3.0-preview.2 (tonight) and the attributes will come 10.3.0-preview.3. We think the final version should be ready end of next week. We initially planned end of this week but we still have some bug fixing to do.</p>
<p>I hope you are as exited as I am about this. Happy Thanksgiving :) and get a super awesome <em>Hot Chocolate</em> with marshmallows to get into your GraphQL groove.</p>
<p>If you want to get into contact with us head over to our <a href="https://join.slack.com/t/hotchocolategraphql/shared_invite/enQtNTA4NjA0ODYwOTQ0LTViMzA2MTM4OWYwYjIxYzViYmM0YmZhYjdiNzBjOTg2ZmU1YmMwNDZiYjUyZWZlMzNiMTk1OWUxNWZhMzQwY2Q">slack channel</a> and join our community.</p>]]></content:encoded>
            <enclosure url="https://chillicream.com/static/3bff7544d8c94207baaf1de9c9faad4f/ee604/hotchocolate-banner.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Building a real-time .NET GraphQL Client API]]></title>
            <link>https://chillicream.com/blog/2019/11/25/strawberry-shake_2</link>
            <guid>/blog/2019/11/25/strawberry-shake_2</guid>
            <pubDate>Mon, 25 Nov 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[We are busy, busy, busy working on version 11 of Hot Chocolate and Strawberry Shake. In this post I want to explore the client side of…]]></description>
            <content:encoded><![CDATA[<p>We are busy, busy, busy working on version 11 of <em>Hot Chocolate</em> and <em>Strawberry Shake</em>.</p>
<p>In this post I want to explore the client side of GraphQL on .NET more with a special emphasis on subscriptions.</p>
<p>Since, with the new version of <em>Strawberry Shake</em> our initial blog has become kind of invalid I also will walk you trough the basics again before heading into subscriptions and what lies beyond.</p>
<h2 id="getting-started" style="position:relative;"><a href="#getting-started" aria-label="getting started permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Getting Started</h2>
<p>Let us have a look at how we want to tackle things with <em>Strawberry Shake</em>. For this little walk-through I will use our <a href="https://github.com/ChilliCream/hotchocolate/tree/master/examples/AspNetCore.StarWars"><em>Star Wars</em> server example</a>.</p>
<p>If you want to follow along then install the <a href="https://dotnet.microsoft.com/download/dotnet-core/3.0">.NET Core 3 SDK</a> . We are also supporting other .NET variants but for this example you will need the .NET Core 3 SDK.</p>
<p>Before we can start let us clone the <em>Hot Chocolate</em> repository and start our <em>Star Wars</em> server.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="48678225170007286000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`git clone https://github.com/ChilliCream/hotchocolate.git
cd hotchocolate
dotnet run --project examples/AspNetCore.StarWars/`, `48678225170007286000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/ChilliCream/hotchocolate.git
<span class="token builtin class-name">cd</span> hotchocolate
dotnet run --project examples/AspNetCore.StarWars/</code></pre></div>
<p>Now that we have our <em>Star Wars</em> server running, lets create a folder for our client and install the <em>Strawberry Shake</em> CLI tools.
The <em>Strawberry Shake</em> CLI tools are optional but make initializing the client project much easier.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="65203840768908330000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`mkdir berry
dotnet new tool-manifest
dotnet tool install StrawberryShake.Tools --version 11.0.0-preview.58 --local`, `65203840768908330000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">mkdir</span> berry
dotnet new tool-manifest
dotnet tool <span class="token function">install</span> StrawberryShake.Tools --version <span class="token number">11.0</span>.0-preview.58 --local</code></pre></div>
<p>In our example we are using the new .NET CLI local tools. <code class="language-text">dotnet new tool-manifest</code> creates the tools manifest which basically is like a packages.config and holds the information of which tools in which version we are using in our directory.</p>
<p>This is the great thing about local tools if you think about it, you can install tools to your repository and have always the right set of tools available to you in the moment you clone that repository.</p>
<p>The next command <code class="language-text">dotnet tool install StrawberryShake.Tools --version 11.0.0-preview.58 --local</code> installs our <em>Strawberry Shake</em> tools. Once we have a final release of <em>Strawberry Shake</em> you do not need to speciefy the version anymore.</p>
<p>Next we need a little project. Let’s create a new console application so that we can easily run and debug what we are doing.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="8245620849910474000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet new console -n BerryClient
cd BerryClient
dotnet add package StrawberryShake --version 11.0.0-preview.58
dotnet add package Microsoft.Extensions.Http --version 3.0.0
dotnet add package Microsoft.Extensions.DependencyInjection --version 3.0.0`, `8245620849910474000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet new console -n BerryClient
<span class="token builtin class-name">cd</span> BerryClient
dotnet <span class="token function">add</span> package StrawberryShake --version <span class="token number">11.0</span>.0-preview.58
dotnet <span class="token function">add</span> package Microsoft.Extensions.Http --version <span class="token number">3.0</span>.0
dotnet <span class="token function">add</span> package Microsoft.Extensions.DependencyInjection --version <span class="token number">3.0</span>.0</code></pre></div>
<p>OK, now that we have a project setup lets initialize the project by creating a local schema. Like with <em>Relay</em> we are holding a local schema file that can be extended with local types and fields. Our <em>GraphQL</em> compiler will use this schema information to validate the queries we write. This makes <em>GraphQL</em> query documents a part of the compilation process and with that a first-class citizen of our C# library.</p>
<blockquote>
<p>For the next step ensure that the <em>Star Wars</em> <em>GraphQL</em> server is running since we will fetch the schema from the server.</p>
</blockquote>
<blockquote>
<p>If you want to check out what commands are available with the tools just run <code class="language-text">dotnet graphql</code> and the CLI tools will output the available commands.</p>
</blockquote>
<div
              class="gatsby-code-button-container"
              data-toaster-id="68771743960358350000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet graphql init http://localhost:5000/graphql -n StarWars -p ./StarWars`, `68771743960358350000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet graphql init http://localhost:5000/graphql -n StarWars -p ./StarWars</code></pre></div>
<p>The init command will download the schema as GraphQL SDL and create a config to re-fetch the schema. Also, the config contains the client name. The client name defines how the client class and interface shall be named.</p>
<blockquote>
<p>Note: You can pass in the token and scheme if your endpoint is authenticated. There is also an update command to update the local schema.</p>
</blockquote>
<p>The configuration will look like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="79304092287465180000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  &quot;Schemas&quot;: [
    {
      &quot;Name&quot;: &quot;StarWars&quot;,
      &quot;Type&quot;: &quot;http&quot;,
      &quot;File&quot;: &quot;StarWars.graphql&quot;,
      &quot;Url&quot;: &quot;http://localhost:5000/graphql&quot;
    }
  ],
  &quot;ClientName&quot;: &quot;StarWarsClient&quot;
}`, `79304092287465180000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"Schemas"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"Name"</span><span class="token operator">:</span> <span class="token string">"StarWars"</span><span class="token punctuation">,</span>
      <span class="token property">"Type"</span><span class="token operator">:</span> <span class="token string">"http"</span><span class="token punctuation">,</span>
      <span class="token property">"File"</span><span class="token operator">:</span> <span class="token string">"StarWars.graphql"</span><span class="token punctuation">,</span>
      <span class="token property">"Url"</span><span class="token operator">:</span> <span class="token string">"http://localhost:5000/graphql"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"ClientName"</span><span class="token operator">:</span> <span class="token string">"StarWarsClient"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>OK, now let’s get started by creating our first client API. For this open your editor of choice. I can recommend using <em>VSCode</em> for this at the moment since you will get GraphQL highlighting. As we move forward, we will refine the tooling and provide proper IntelliSense.</p>
<p>Now let us create a new file in our <code class="language-text">StarWars</code> folder called <code class="language-text">Queries.graphql</code> and add the following query:</p>
<blockquote>
<p>The file does not necessarily have to be called queries. You can call it however you want. The GraphQL compiler will figure out what files contain queries and what files contain schema definitions.</p>
</blockquote>
<div
              class="gatsby-code-button-container"
              data-toaster-id="71401641413650150000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query getFoo {
  foo
}`, `71401641413650150000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> getFoo <span class="token punctuation">{</span>
  foo
<span class="token punctuation">}</span></code></pre></div>
<p>Now build your project.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="87025316200318620000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet build`, `87025316200318620000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet build</code></pre></div>
<p>When we now compile, we get an <em>MSBuild</em> error on which we can click in <em>VSCode</em> and we are pointed to the place in our query file from which the error stems from. The error tells us that there is no field <code class="language-text">foo</code> on the <code class="language-text">Query</code> type.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="75721498292442190000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`/Users/michael/Local/play/berry/BerryClient/StarWars/Queries.graphql(2,3): error GQL: The field \`foo\` does not exist on the type \`Query\`. [/Users/michael/Local/play/berry/BerryClient/BerryClient.csproj]`, `75721498292442190000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">/Users/michael/Local/play/berry/BerryClient/StarWars/Queries.graphql<span class="token punctuation">(</span><span class="token number">2,3</span><span class="token punctuation">)</span>: error GQL: The field <span class="token variable"><span class="token variable">`</span>foo<span class="token variable">`</span></span> does not exist on the <span class="token builtin class-name">type</span> <span class="token variable"><span class="token variable">`</span>Query<span class="token variable">`</span></span><span class="token builtin class-name">.</span> <span class="token punctuation">[</span>/Users/michael/Local/play/berry/BerryClient/BerryClient.csproj<span class="token punctuation">]</span></code></pre></div>
<p>Your GraphQL query document is not just a string, it properly compiles and is fully typed. Let's change our query and compile again:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="74944157935413300000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query getFoo {
  hero {
    name
  }
}`, `74944157935413300000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> getFoo <span class="token punctuation">{</span>
  hero <span class="token punctuation">{</span>
    name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<div
              class="gatsby-code-button-container"
              data-toaster-id="73532816872097380000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet build`, `73532816872097380000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet build</code></pre></div>
<p>Now our project changes and we get a new <code class="language-text">Generated</code> folder that has all the types that we need to communicate with our backend.</p>
<p>Let us have a closer look at our client interface for a minute.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="81557796298266350000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public interface IStarWarsClient
{
    Task<IOperationResult<IGetFoo>> GetFooAsync(
        CancellationToken cancellationToken = default);
}`, `81557796298266350000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IStarWarsClient</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IOperationResult<span class="token punctuation">&lt;</span>IGetFoo<span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">GetFooAsync</span><span class="token punctuation">(</span>
        <span class="token class-name">CancellationToken</span> cancellationToken <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The named operation <code class="language-text">getFoo</code> has become the method <code class="language-text">GetFooAsync</code> in our generated client. This is nice since we kind of control from our GraphQL document the shape of our C# API. But there is more to that. A query document can hold multiple named operations. In essence the query document describes the interface between the client and the server.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="61799656728353740000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query function_a {
  ...
}

query function_b {
  ...
}

query function_c {
  ...
}`, `61799656728353740000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> function_a <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token keyword">query</span> function_b <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token keyword">query</span> function_c <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Since, with GraphQL you essentially design your own service API by writing a query document you want to have control over the structure of your generated types. <em>Strawberry Shake</em> uses fragments to help you describe clean and reusable code components.</p>
<p>Let us redesign our query with fragments and make it a bit more complex.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="27311933557157196000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query getHero {
  hero {
    ...SomeDroid
    ...SomeHuman
  }
}

fragment SomeHuman on Human {
  ...HasName
  homePlanet
}

fragment SomeDroid on Droid {
  ...HasName
  primaryFunction
}

fragment HasName on Character {
  name
}`, `27311933557157196000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> getHero <span class="token punctuation">{</span>
  hero <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token fragment function">SomeDroid</span>
    <span class="token operator">...</span><span class="token fragment function">SomeHuman</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">SomeHuman</span> <span class="token keyword">on</span> <span class="token class-name">Human</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token fragment function">HasName</span>
  homePlanet
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">SomeDroid</span> <span class="token keyword">on</span> <span class="token class-name">Droid</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token fragment function">HasName</span>
  primaryFunction
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">HasName</span> <span class="token keyword">on</span> <span class="token class-name">Character</span> <span class="token punctuation">{</span>
  name
<span class="token punctuation">}</span></code></pre></div>
<p>The fragments will yield in the following type structure:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="25201280199262910000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public interface ISomeHuman
    : IHasName
{
    string HomePlanet { get; }
}

public interface ISomeDroid
    : IHasName
{
    string PrimaryFunction { get; }
}

public interface IHasName
{
    string Name { get; }
}`, `25201280199262910000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ISomeHuman</span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IHasName</span></span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> HomePlanet <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ISomeDroid</span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IHasName</span></span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> PrimaryFunction <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IHasName</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Let us reflect on that, fragments not only let us re-use type selections in our query document but also let us create and mold our C# API into a clean type structure. This puts us as the consumer of <em>Strawberry Shake</em> in the driver seat.</p>
<p><strong>We</strong> decide what data we <strong>need</strong> and how they are <strong>shaped</strong>.</p>
<blockquote>
<p>We are currently looking into how we can aggregate data and flatten the type structure. We initially thought about introducing some directives to flatten the type structure. But as we thought further on that and we really felt we want to have something like <a href="https://github.com/APIs-guru/graphql-lodash">lodash</a>. We are still discussing on what we want to do here. So stay tuned.</p>
</blockquote>
<p>Let's make one more tweak to our query and then we get this example running.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="83429370121399500000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query getHero(\$episode: Episode) {
  hero(episode: \$episode) {
    ...SomeDroid
    ...SomeHuman
  }
}

fragment SomeHuman on Human {
  ...HasName
  homePlanet
}

fragment SomeDroid on Droid {
  ...HasName
  primaryFunction
}

fragment HasName on Character {
  name
}`, `83429370121399500000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> getHero<span class="token punctuation">(</span><span class="token variable">$episode</span><span class="token punctuation">:</span> Episode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  hero<span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token variable">$episode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token fragment function">SomeDroid</span>
    <span class="token operator">...</span><span class="token fragment function">SomeHuman</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">SomeHuman</span> <span class="token keyword">on</span> <span class="token class-name">Human</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token fragment function">HasName</span>
  homePlanet
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">SomeDroid</span> <span class="token keyword">on</span> <span class="token class-name">Droid</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token fragment function">HasName</span>
  primaryFunction
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">HasName</span> <span class="token keyword">on</span> <span class="token class-name">Character</span> <span class="token punctuation">{</span>
  name
<span class="token punctuation">}</span></code></pre></div>
<p>By defining a variable with our operation we now can pass in arguments. This makes our operation re-usable and a good interface with the server. GraphQL servers can pre-compile and optimize those parametrized query documents.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="43106913347842980000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public interface IStarWarsClient
{
    Task<IOperationResult<IGetHero>> GetHeroAsync(
        Optional<Episode> episode = default,
        CancellationToken cancellationToken = default);
}`, `43106913347842980000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IStarWarsClient</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IOperationResult<span class="token punctuation">&lt;</span>IGetHero<span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">GetHeroAsync</span><span class="token punctuation">(</span>
        <span class="token class-name">Optional<span class="token punctuation">&lt;</span>Episode<span class="token punctuation">></span></span> episode <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">,</span>
        <span class="token class-name">CancellationToken</span> cancellationToken <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>OK, let's get it running and then go into more details.</p>
<p>By default the generator will also generate dependency injection code for <code class="language-text">Microsoft.Extensions.DependencyInjection</code>.</p>
<p>In order to get our client up and running we just have to set up a dependency injection container.</p>
<blockquote>
<p>Note: You can shut off dependency injection generation with a <em>MSBuild</em> property. The client can also be instantiated with a builder or by using a different dependency injection container.</p>
</blockquote>
<p>Replace your <code class="language-text">Program</code> class with the following code.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="35882650319148302000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`class Program
{
    static async Task Main(string[] args)
    {
        var serviceCollection = new ServiceCollection();
        serviceCollection.AddHttpClient(
            &quot;StarWarsClient&quot;,
            c => c.BaseAddress = new Uri(&quot;http://localhost:5000/graphql&quot;));
        serviceCollection.AddStarWarsClient();

        IServiceProvider services = serviceCollection.BuildServiceProvider();
        IStarWarsClient client = services.GetRequiredService<IStarWarsClient>();

        IOperationResult<IGetHero> result = await client.GetHeroAsync(Episode.Newhope);
        Console.WriteLine(((ISomeDroid)result.Data.Hero).Name);

        result = await client.GetHeroAsync(Episode.Empire);
        Console.WriteLine(((ISomeHuman)result.Data.Hero).Name);
    }
}`, `35882650319148302000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">class</span> <span class="token class-name">Program</span>
<span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> serviceCollection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        serviceCollection<span class="token punctuation">.</span><span class="token function">AddHttpClient</span><span class="token punctuation">(</span>
            <span class="token string">"StarWarsClient"</span><span class="token punctuation">,</span>
            c <span class="token operator">=></span> c<span class="token punctuation">.</span>BaseAddress <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">"http://localhost:5000/graphql"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        serviceCollection<span class="token punctuation">.</span><span class="token function">AddStarWarsClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">IServiceProvider</span> services <span class="token operator">=</span> serviceCollection<span class="token punctuation">.</span><span class="token function">BuildServiceProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">IStarWarsClient</span> client <span class="token operator">=</span> services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRequiredService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IStarWarsClient<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">IOperationResult<span class="token punctuation">&lt;</span>IGetHero<span class="token punctuation">></span></span> result <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">GetHeroAsync</span><span class="token punctuation">(</span>Episode<span class="token punctuation">.</span>Newhope<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ISomeDroid<span class="token punctuation">)</span>result<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>Hero<span class="token punctuation">)</span><span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>

        result <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">GetHeroAsync</span><span class="token punctuation">(</span>Episode<span class="token punctuation">.</span>Empire<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ISomeHuman<span class="token punctuation">)</span>result<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>Hero<span class="token punctuation">)</span><span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Run the console and it will output the following;</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="13572062143074093000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`R2-D2
Luke Skywalker`, `13572062143074093000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">R2-D2
Luke Skywalker</code></pre></div>
<p>That is quite awesome. The client is easy to setup and easy to use. We just had to initialize our project and write a GraphQL query document and everything was generated so that we can focus on using our GraphQL endpoint instead of writing a bunch of code that we do not want to actually write. Moreover, we only get the types from the schema that we actually use in our query documents, that means we are not burdened with all the schema types and fields and so on that we do not need and do not want.</p>
<p><em>Strawberry Shake</em> let`s you take all the power of GraphQL and package it up into a fully typed client that works well with .NET. It does not limit you by introducing a new programming model like Linq or some other .NET API, instead <em>Strawberry Shake</em> makes <strong>GraphQL a first class citizen in the .NET world</strong>.</p>
<p>OK, now let us have a look at the result object since we also carefully discussed how we expose results to the consumer.</p>
<p>The result of an operation can be a <code class="language-text">IOperationResult&lt;T&gt;</code> or a <code class="language-text">IResponseStream&lt;T&gt;</code>.</p>
<p>The operation result represents a single result and we expose the GraphQL result structure as specified in the GraphQL spec.</p>
<p>This means that we give you a chance to take advantage of partial results in case of errors. However, we also make it easy to raise an exception in case of any error with the <code class="language-text">EnsureNoErrors</code> method on the result object. This is kind of like with responses from a <code class="language-text">HttpClient</code>.</p>
<p>Also, we allow you to have full access to provider specific data that is included in a dictionary called <code class="language-text">Extensions</code>. This for instances is used in cases like active persisted queries or other provider specific extensions.</p>
<h2 id="renaming-type-elements" style="position:relative;"><a href="#renaming-type-elements" aria-label="renaming type elements permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Renaming Type Elements</h2>
<p>Did you notice the enum type <code class="language-text">Episode.Newhope</code> in the upper example. This really is not nice to see as a C# developer :). Since the generator is built on top of the stitching API we easily can amend things like that in order to make our client API nice to use.</p>
<p>So, before we go into subscriptions let`s fix that :)</p>
<p>First, add another GraphQL file and call it <code class="language-text">StarWars.Extensions.graphql</code>. Again, the name does not really matter, you could call it <code class="language-text">Foo.graphql</code> and <em>Strawberry Shake</em> would also handle it correctly.</p>
<p>GraphQL allows to extend types with the <code class="language-text">extend</code> keyword in the GraphQL SDL. In the example below we extend the <code class="language-text">Episode</code> enum and add a directive (annotation) called <code class="language-text">@name</code>. The <code class="language-text">@name</code> directive allows us to provide the generator with a name for a type element that we actually want to use in our C# client API.</p>
<p>Now add the following type extension to the GraphQL file <code class="language-text">StarWars.Extensions.graphql</code>:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="8597498358144784000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`extend enum Episode {
  NEWHOPE @name(value: &quot;NewHope&quot;)
}`, `8597498358144784000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">extend</span> <span class="token keyword">enum</span> <span class="token class-name">Episode</span> <span class="token punctuation">{</span>
  <span class="token constant">NEWHOPE</span> <span class="token directive function">@name</span><span class="token punctuation">(</span><span class="token attr-name">value</span><span class="token punctuation">:</span> <span class="token string">"NewHope"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Rebuild your project and voila ... <code class="language-text">Episode.NewHope</code> is now correctly cased.</p>
<p>The nice thing is that we are just describing what we want to change in this schema extension file, so every time you update the server schema, we will preserve this file and reapply the type extensions to the newly downloaded schema.</p>
<h2 id="subscriptions" style="position:relative;"><a href="#subscriptions" aria-label="subscriptions permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a> Subscriptions</h2>
<p>OK, OK, most of this was already in place, so let us have a look at something more challenging like subscriptions.</p>
<p>Subscriptions will need a state-full connection to a server through a WebSocket. There are other ways to do this like SignalR (which essentially is a socket abstraction) or gRPC or even over a standard TCP socket.</p>
<p>While we are in the works to get SignalR and gRPC in let us have a look at how we can do it through WebSockets.</p>
<p>When we started on this we found that WebSockets should be as easy as setting up the HttpClient nowadays. So, we have introduced a new interface called <code class="language-text">IWebSocketClientFactory</code>. But just having a factory is not enough since we want to maybe pool socket connections and reuse those with multiple subscriptions.</p>
<p>With the solution that we are introducing with version 11.0.0-preview.58 we are making WebSockets super simple to setup, and we will do all the hard parts like reusing the connection and things like that without you ever noticing it.</p>
<p>Let us have a look at how we can get subscriptions to work.</p>
<p>The first thing we have to do is going back to our query document. The <em>Star Wars</em> server has one subscription that is raised whenever a review is written. So, let’s use it and add it to our query file.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="90365634295992710000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query getHero(\$episode: Episode!) {
  hero(episode: \$episode) {
    ...SomeDroid
    ...SomeHuman
  }
}

subscription onReviewCreated(episode: \$episode) {
  onReview(episode: \$episode) {
    commentary
    stars
  }
}

fragment SomeHuman on Human {
  ...HasName
  homePlanet
}

fragment SomeDroid on Droid {
  ...HasName
  primaryFunction
}

fragment HasName on Character {
  name
}`, `90365634295992710000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> getHero<span class="token punctuation">(</span><span class="token variable">$episode</span><span class="token punctuation">:</span> Episode<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  hero<span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token variable">$episode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token fragment function">SomeDroid</span>
    <span class="token operator">...</span><span class="token fragment function">SomeHuman</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">subscription</span> onReviewCreated<span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token variable">$episode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  onReview<span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token variable">$episode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    commentary
    stars
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">SomeHuman</span> <span class="token keyword">on</span> <span class="token class-name">Human</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token fragment function">HasName</span>
  homePlanet
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">SomeDroid</span> <span class="token keyword">on</span> <span class="token class-name">Droid</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token fragment function">HasName</span>
  primaryFunction
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">HasName</span> <span class="token keyword">on</span> <span class="token class-name">Character</span> <span class="token punctuation">{</span>
  name
<span class="token punctuation">}</span></code></pre></div>
<p>Now, lets rebuild our project and then look at the client interface.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="26597389078748180000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public interface IStarWarsClient
{
    Task<IOperationResult<IGetHero>> GetHeroAsync(
        Optional<Episode> episode = default,
        CancellationToken cancellationToken = default);

    Task<IResponseStream<IOnReviewCreated>> OnReviewCreatedAsync(
        Optional<Episode> episode = default,
        CancellationToken cancellationToken = default);
}`, `26597389078748180000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IStarWarsClient</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IOperationResult<span class="token punctuation">&lt;</span>IGetHero<span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">GetHeroAsync</span><span class="token punctuation">(</span>
        <span class="token class-name">Optional<span class="token punctuation">&lt;</span>Episode<span class="token punctuation">></span></span> episode <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">,</span>
        <span class="token class-name">CancellationToken</span> cancellationToken <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IResponseStream<span class="token punctuation">&lt;</span>IOnReviewCreated<span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">OnReviewCreatedAsync</span><span class="token punctuation">(</span>
        <span class="token class-name">Optional<span class="token punctuation">&lt;</span>Episode<span class="token punctuation">></span></span> episode <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">,</span>
        <span class="token class-name">CancellationToken</span> cancellationToken <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Our client has now a new method that returns a response stream. A response stream is essentially an <code class="language-text">IAsyncEnumerable</code> that will loop over the subscription event stream until the stream completes or the client disposes the stream.</p>
<p>Now let us put everything together. First we need to configure the WebSocket client connection.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="56114413445116270000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddWebSocketClient(
    &quot;StarWarsClient&quot;,
    c => c.Uri = new Uri(&quot;ws://localhost:5000/graphql&quot;));`, `56114413445116270000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddWebSocketClient</span><span class="token punctuation">(</span>
    <span class="token string">"StarWarsClient"</span><span class="token punctuation">,</span>
    c <span class="token operator">=></span> c<span class="token punctuation">.</span>Uri <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">"ws://localhost:5000/graphql"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This kind of looks exactly the way we would configure an HttpClient and it hides all the complex logic about connecting and pooling WebSocket connections. It also lets you easily intercept the connect process to include authentication logic.</p>
<p>The next thing we need to do to consume data from subscriptions is to read from our event stream.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="20897602979482020000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`class Program
{
    static async Task Main(string[] args)
    {
        var serviceCollection = new ServiceCollection();
        serviceCollection.AddHttpClient(
            &quot;StarWarsClient&quot;,
            c => c.BaseAddress = new Uri(&quot;http://localhost:5000/graphql&quot;));
        serviceCollection.AddStarWarsClient();

        IServiceProvider services = serviceCollection.BuildServiceProvider();
        IStarWarsClient client = services.GetRequiredService<IStarWarsClient>();

        var stream = await client.OnReviewCreatedAsync(Episode.NewHope);

        await foreach (var result in stream)
        {
            result.EnsureNoErrors();
            Console.WriteLine(result.Data!.OnReview.Commentary);
        }
    }
}`, `20897602979482020000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">class</span> <span class="token class-name">Program</span>
<span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> serviceCollection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        serviceCollection<span class="token punctuation">.</span><span class="token function">AddHttpClient</span><span class="token punctuation">(</span>
            <span class="token string">"StarWarsClient"</span><span class="token punctuation">,</span>
            c <span class="token operator">=></span> c<span class="token punctuation">.</span>BaseAddress <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">"http://localhost:5000/graphql"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        serviceCollection<span class="token punctuation">.</span><span class="token function">AddStarWarsClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">IServiceProvider</span> services <span class="token operator">=</span> serviceCollection<span class="token punctuation">.</span><span class="token function">BuildServiceProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">IStarWarsClient</span> client <span class="token operator">=</span> services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRequiredService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IStarWarsClient<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword">var</span></span> stream <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">OnReviewCreatedAsync</span><span class="token punctuation">(</span>Episode<span class="token punctuation">.</span>NewHope<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">await</span> <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token keyword">in</span> stream<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            result<span class="token punctuation">.</span><span class="token function">EnsureNoErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Data<span class="token operator">!</span><span class="token punctuation">.</span>OnReview<span class="token punctuation">.</span>Commentary<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>If you look at the code above it looks so easy how you can use subscription with <em>Strawberry Shake</em>, it almost looks no different from fetching a simple query with the <code class="language-text">HttpClient</code>. This is exactly what we want the experience to be, simple but when you want to get into the pluming then we will allow you to easily intercept and extend the whole pipeline.</p>
<p>So, in order to try subscriptions out in your example open a tool like playground and the fire the following query against the local GraphQL Server while your console app is running.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="30697392872728210000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`mutation {
  createReview(
    episode: NEWHOPE
    review: { commentary: &quot;Awesome movie.&quot;, stars: 5 }
  ) {
    commentary
    stars
  }
}`, `30697392872728210000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">mutation</span> <span class="token punctuation">{</span>
  createReview<span class="token punctuation">(</span>
    <span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token constant">NEWHOPE</span>
    <span class="token attr-name">review</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token attr-name">commentary</span><span class="token punctuation">:</span> <span class="token string">"Awesome movie."</span><span class="token punctuation">,</span> <span class="token attr-name">stars</span><span class="token punctuation">:</span> <span class="token number">5</span> <span class="token punctuation">}</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    commentary
    stars
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>As soon as you trigger the above mutation the client will print the commentary to the console, it is kind of like magic :)</p>
<h2 id="custom-scalars" style="position:relative;"><a href="#custom-scalars" aria-label="custom scalars permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Custom Scalars</h2>
<p>The mean thing with all these examples that I posted in this blog is that I am only using the <em>Star Wars</em> example. The <em>Star Wars</em> uses no custom scalars and is super simple to use. That is the reason why I like to use it for demos, because people get easily on board with it. But it also is frustrating when you want to go deeper. This is especially true with custom scalars.</p>
<p><em>Strawberry Shake</em> supports an array of built-in scalars that go beyond the GraphQL spec. But still if you download the GitHub schema for instance you will get a ton of custom scalars.</p>
<p>With the current version we have made dealing with custom scalars a lot easier. First, if we do not know a scalar, then we will treat it as a <code class="language-text">String</code>. While this is not always what you want, it lets you get started quickly and then change things when you really need them to change.</p>
<p>Let us have a look at how we can bring in a custom scalar. For this example, let us assume we have a scalar called <code class="language-text">ByteArray</code>. This scalar serializes a <code class="language-text">System.Byte[]</code> to a base64 string. This is easy enough. So on the client side we want the generator to generate models that expose <code class="language-text">System.Byte[]</code> as property type. But in the communication between server and client the type shall be serialized as base64 string.</p>
<p>So, in order to give the generator a hint about these things we need to extend our schema. We would need to create a GraphQL file that holds our schema extensions (basically like with the enum example, where we renamed the enum value). The same way we can extend enums we can extend other types. In this case we want to annotate a scalar type.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="55213057561732690000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`extend scalar ByteArray
@runtimeType(name: &quot;System.Byte[]&quot;)
@serializationType(name: &quot;System.String&quot;)`, `55213057561732690000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">extend</span> <span class="token keyword">scalar</span> <span class="token class-name">ByteArray</span>
<span class="token directive function">@runtimeType</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token string">"System.Byte[]"</span><span class="token punctuation">)</span>
<span class="token directive function">@serializationType</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token string">"System.String"</span><span class="token punctuation">)</span></code></pre></div>
<p>The above example declares that for the <code class="language-text">ByteArray</code> scalar the runtime type (the type that is used in the C# models) shall be a <code class="language-text">System.Byte[]</code> and that the serialization type (the type which client and server use to send the data) shall be a <code class="language-text">System.String</code>. For the generator that is enough to generate everything accordingly.</p>
<p>We still have to implement an <code class="language-text">IValueSerializer</code> to specify the logic how the type shall actually serialize and deserialize.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="42188354572377730000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class ByteArrayValueSerializer
    : ValueSerializerBase<byte[], string>
{
    public override string Name => &quot;ByteArray&quot;;

    public override ValueKind Kind => ValueKind.String;

    public override object? Serialize(object? value)
    {
        if (value is null)
        {
            return null;
        }

        if (value is byte[] b)
        {
            return Convert.ToBase64String(b);
        }

        throw new ArgumentException(
            &quot;The specified value is of an invalid type. &quot; +
            \$&quot;{ClrType.FullName} was expeceted.&quot;);
    }

    public override object? Deserialize(object? serialized)
    {
        if (serialized is null)
        {
            return null;
        }

        if (serialized is string s)
        {
            return Convert.FromBase64String(s);
        }

        throw new ArgumentException(
            &quot;The specified value is of an invalid type. &quot; +
            \$&quot;{SerializationType.FullName} was expeceted.&quot;);
    }
}`, `42188354572377730000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ByteArrayValueSerializer</span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ValueSerializerBase<span class="token punctuation">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token operator">=></span> <span class="token string">"ByteArray"</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name">ValueKind</span> Kind <span class="token operator">=></span> ValueKind<span class="token punctuation">.</span>String<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">object</span><span class="token punctuation">?</span></span> <span class="token function">Serialize</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span><span class="token punctuation">?</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token keyword">is</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token keyword">is</span> <span class="token class-name"><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> b<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> Convert<span class="token punctuation">.</span><span class="token function">ToBase64String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentException</span><span class="token punctuation">(</span>
            <span class="token string">"The specified value is of an invalid type. "</span> <span class="token operator">+</span>
            <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ClrType<span class="token punctuation">.</span>FullName</span><span class="token punctuation">}</span></span><span class="token string"> was expeceted."</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">object</span><span class="token punctuation">?</span></span> <span class="token function">Deserialize</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span><span class="token punctuation">?</span></span> serialized<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>serialized <span class="token keyword">is</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>serialized <span class="token keyword">is</span> <span class="token class-name"><span class="token keyword">string</span></span> s<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> Convert<span class="token punctuation">.</span><span class="token function">FromBase64String</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentException</span><span class="token punctuation">(</span>
            <span class="token string">"The specified value is of an invalid type. "</span> <span class="token operator">+</span>
            <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">SerializationType<span class="token punctuation">.</span>FullName</span><span class="token punctuation">}</span></span><span class="token string"> was expeceted."</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The serializer can be added as a singleton and will be automatically integrated by the generated client.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="87543690263589720000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddSingleton<IValueSerializer, ByteArrayValueSerializer>();`, `87543690263589720000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IValueSerializer<span class="token punctuation">,</span> ByteArrayValueSerializer<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<blockquote>
<p>We are refining how those serializers are registered. This is important for cases where one wants to have multiple clients with different kinds of serializers. I know this is rare but still this should work. The coming versions of <em>Strawberry Shake</em> will fine tune this.</p>
</blockquote>
<h2 id="digging-deeper" style="position:relative;"><a href="#digging-deeper" aria-label="digging deeper permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Digging Deeper</h2>
<p>Apart from being able to add custom scalars we might want to dig deeper and allow new scenarios with our client like persisted queries. It is needles to say that we will add persisted query support out of the box. But it is also a good example to use to show how we can enable advance server / client protocols with <em>Strawberry Shake</em>.</p>
<p>The way we built-in things like that is by providing a operation middleware. This basically works like the query middleware in the server on the request level.</p>
<p><em>Strawberry Shake</em> allows us to swap out the default operation execution pipeline and add our own custom operation execution pipeline.</p>
<p>In order to setup a custom operation execution pipeline you can use for instance the <code class="language-text">HttpPipelineBuilder</code>. Each transport has it`s own transport specific pipeline since the protocol between socket communication and stateless communication is quite different.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="19480523362774750000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`serviceCollection.AddSingleton<OperationDelegate>(
    sp => HttpPipelineBuilder.New()
        .Use<CreateStandardRequestMiddleware>()
        .Use<CustomMiddleware>()
        .Use<SendHttpRequestMiddleware>()
        .Use<ParseSingleResultMiddleware>()
        .Build(sp));`, `19480523362774750000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">serviceCollection<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>OperationDelegate<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>
    sp <span class="token operator">=></span> HttpPipelineBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Use</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CreateStandardRequestMiddleware<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Use</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CustomMiddleware<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Use</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SendHttpRequestMiddleware<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Use</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ParseSingleResultMiddleware<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>sp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div
              class="gatsby-code-button-container"
              data-toaster-id="53274039627950120000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class CustomMiddleware
{
    private readonly OperationDelegate _next;
    private readonly IOperationSerializer _service;

    public CustomMiddleware(
        OperationDelegate next,
        ISomeCustomService service)
    {
        _next = next ?? throw new ArgumentNullException(nameof(next));
        _service = service ?? throw new ArgumentNullException(nameof(service));
    }

    public async Task InvokeAsync(IHttpOperationContext context)
    {
        // the custom middleware code
        await _next(context);
    }
}`, `53274039627950120000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomMiddleware</span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">OperationDelegate</span> _next<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">IOperationSerializer</span> _service<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">CustomMiddleware</span><span class="token punctuation">(</span>
        <span class="token class-name">OperationDelegate</span> next<span class="token punctuation">,</span>
        <span class="token class-name">ISomeCustomService</span> service<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _next <span class="token operator">=</span> next <span class="token operator">??</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentNullException</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        _service <span class="token operator">=</span> service <span class="token operator">??</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentNullException</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>service<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">InvokeAsync</span><span class="token punctuation">(</span><span class="token class-name">IHttpOperationContext</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// the custom middleware code</span>
        <span class="token keyword">await</span> <span class="token function">_next</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="generation-options" style="position:relative;"><a href="#generation-options" aria-label="generation options permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Generation Options</h2>
<p>By default <em>Strawberry Shake</em> generates dependency injection code for <code class="language-text">Microsoft.Extensions.DependencyInjection</code> this can be switched of by adding the following <code class="language-text">MSBuild</code> property <code class="language-text">&lt;GraphQLEnableDI&gt;false&lt;/GraphQLEnableDI&gt;</code>.</p>
<p>The generator will automatically detect if you are using C# 8.0 with nullable reference types or if you are using an older version of C#.</p>
<p>You can use the following <code class="language-text">MSBuild</code> properties to control this.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="85830335413440610000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`<PropertyGroup>
  <LangVersion>8.0</LangVersion>
  <Nullable>enable</Nullable>
</PropertyGroup>`, `85830335413440610000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PropertyGroup</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LangVersion</span><span class="token punctuation">></span></span>8.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LangVersion</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Nullable</span><span class="token punctuation">></span></span>enable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Nullable</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PropertyGroup</span><span class="token punctuation">></span></span></code></pre></div>
<p>We also by default take the root namespace from the project for generating files. You can however override this by providing the <code class="language-text">&lt;BerryNamespace /&gt;</code> property. However, we will change this to an item group soon in order to also enable multiple clients in a single project to use different namespaces.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="7374957260800242000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`<PropertyGroup>
  <BerryNamespace>\$(RootNamespace)</BerryNamespace>
</PropertyGroup>`, `7374957260800242000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PropertyGroup</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BerryNamespace</span><span class="token punctuation">></span></span>$(RootNamespace)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>BerryNamespace</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PropertyGroup</span><span class="token punctuation">></span></span></code></pre></div>
<h2 id="dependency-injection" style="position:relative;"><a href="#dependency-injection" aria-label="dependency injection permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Dependency Injection</h2>
<p>The client API can be used with other dependency injection container and also without dependency injection at all.</p>
<p>We initially had a limited builder API for this but decided to give it a do over. So, at the moment you could look at the generated dependency injection code and build your own integration.</p>
<p>We will allow with future build to add custom generators that can provide additional code for custom use cases. The way that would work is that such a generator would sit in a NuGet package that is being added to the project. The custom generator would register its generators to an item group and <em>Strawberry Shake</em> would pick those up and integrate them. These custom generators however are somewhere in the version 12 timeframe.</p>
<h2 id="roadmap" style="position:relative;"><a href="#roadmap" aria-label="roadmap permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Roadmap</h2>
<p>What are our next steps on <em>Strawberry Shake</em> and when are we planning to release it?</p>
<p>We have some more ground to cover before we have this version complete.</p>
<ol>
<li>MSBuild Integration
We are working on making the <em>MSBuild</em> integration better. There are still instances with <em>VSCode</em> where you have to compile twice. This is OK for a preview,but we are on it and think that in the next view preview builds we will have this fixed. With <em>Visual Studio for Windows</em> you can already enjoy design time code generation. This means that when you save a GraphQL file the generator will update the C# files.</li>
<li>
<p>Tooling
We are heavy at work on <em>Bananacake Pop</em> which is our GraphQL IDE that will help you write and analyze GraphQL queries.
We plan to use what we have done for <em>Bananacake Pop</em> to create a nice integration with <em>VSCode</em>. We want to have a rich integration with which you can work on huge schemas.</p>
<p>Beyond <em>VSCode</em> we are looking at writing a nice integration with <em>Visual Studio for Windows</em> and <em>Visual Studio for macOS</em> that will make <em>Strawberry Shake</em> and <em>GraphQL</em> a first-class citizen in Microsoft IDEs.</p>
<p>We hope to deliver all of this in the version 11 timeframe.</p>
</li>
<li>Persisted Query Support
Persisted queries are one of our very next features that we will add to the client. We want to allow the same flows that we support on the server side.</li>
<li>Batching Support
Batching support with the <code class="language-text">@export</code> directive is as well planned for the initial release of <em>Strawberry Shake</em>.</li>
<li>Code Generation
The current code generation produces quite nice code, but it can produce issues where the types from your own project collide with the generated code. With the next view builds we will add an option to use full type names in those cases.
Also, we will add the code generation attribute to the generated files. So there are refinements going on in this area.</li>
<li>Defer / Stream
We are planning to add support for defer and stream to the client. This feature depends on our server implementation so we will have to see how far we are on execution plans before we can start on it for the client.</li>
</ol>
<p>I hope you enjoy what we are building. We are tying to bring GraphQL on .NET to the next level. While we still are miles away from what the JavaScript world has to offer we hope to close these gaps over the next year and even pull ahead in some areas. We love GraphQL and are passionate about it. We strongly believe that with our newest member <em>Strawberry Shake</em> we really can make things like <em>Xamarin</em> and <em>Blazor</em> so much better. We have planned a lot more and hope to bring data fetching in .NET to a whole new level over the next year. Ideally you just want to decalre in your .NET component the data that you need and all the client logic is infered from that, kind of the way relay works in JavaScript.</p>
<p>If you want to get into contact with us head over to our <a href="https://join.slack.com/t/hotchocolategraphql/shared_invite/enQtNTA4NjA0ODYwOTQ0LTViMzA2MTM4OWYwYjIxYzViYmM0YmZhYjdiNzBjOTg2ZmU1YmMwNDZiYjUyZWZlMzNiMTk1OWUxNWZhMzQwY2Q">slack channel</a> and join our community.</p>]]></content:encoded>
            <enclosure url="https://chillicream.com/static/c59e0fc03a4c1ca4d193f15390c1bdda/ee604/strawberry-shake-banner.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Building a .NET GraphQL Client API]]></title>
            <link>https://chillicream.com/blog/2019/09/27/strawberry-shake</link>
            <guid>/blog/2019/09/27/strawberry-shake</guid>
            <pubDate>Fri, 27 Sep 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[This post has been updated, please head over to the newer post here. We for a while now have two big GraphQL server projects on the .NET…]]></description>
            <content:encoded><![CDATA[<p><strong>This post has been updated, please head over to the newer post <a href="https://chillicream.com/blog/2019/11/25/strawberry-shake_2">here</a>.</strong></p>
<p>We for a while now have two big GraphQL server projects on the .NET platform. So, if you just want to build a decent GraphQL server you can pick and choose between <em>GraphQL .NET</em> or <em>Hot Chocolate</em>.</p>
<p>If you are looking at consuming a GraphQL server in your <em>Blazor</em> or <em>Xamarin</em> application, then things are not so promising. You can either go with a bare bone client from the <em>GraphQL .NET</em> project or you can decide to go it alone and build on <code class="language-text">HttpClient</code>.</p>
<p>After the version 10 release of our <em>Hot Chocolate</em> GraphQL server we have started to build a new GraphQL client API that is more in line with how people in JavaScript consume GraphQL endpoints.</p>
<h2 id="introduction" style="position:relative;"><a href="#introduction" aria-label="introduction permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Introduction</h2>
<p>Before we get into it let me first outline what our goals for our approach are:</p>
<ul>
<li>Strongly typed API.</li>
<li>Define the API with GraphQL.</li>
<li>No magic strings.</li>
<li>Everything compiles.</li>
<li>Customizable request pipelines.</li>
<li>Support for local resolvers.</li>
<li>Support for custom scalars.</li>
</ul>
<p>The preview that we released today is a prototype that has a ton of bugs and is meant at the moment to get feedback. Starting with this preview we will now release every other day a new preview and think that we will release this new API with version 11 of <em>Hot Chocolate</em>.</p>
<h2 id="getting-started" style="position:relative;"><a href="#getting-started" aria-label="getting started permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Getting Started</h2>
<p>Let us have a look at how we want to tackle things with <em>Strawberry Shake</em>. For this little walkthrough I will use our <a href="https://github.com/ChilliCream/hotchocolate/tree/master/examples/AspNetCore.StarWars"><em>Star Wars</em> server example</a>.</p>
<p>If you want to follow along then install the <a href="https://dotnet.microsoft.com/download/dotnet-core/3.0">.NET Core 3 SDK</a> . We are also supporting other .NET variants but for this example you will need the .NET Core 3 SDK.</p>
<p>Before we can start let us clone the <em>Hot Chocolate</em> repository and start our <em>Star Wars</em> server.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="6056639871104164000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`git clone https://github.com/ChilliCream/hotchocolate.git
cd hotchocolate
dotnet run --project examples/AspNetCore.StarWars/`, `6056639871104164000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/ChilliCream/hotchocolate.git
<span class="token builtin class-name">cd</span> hotchocolate
dotnet run --project examples/AspNetCore.StarWars/</code></pre></div>
<p>Now that we have our <em>Star Wars</em> server running, lets create a folder for our client and install the <em>Strawberry Shake</em> tools.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="9925699421888856000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`mkdir berry
dotnet new tool-manifest
dotnet tool install StrawberryShake.Tools --version 11.0.0-preview.35 --local`, `9925699421888856000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">mkdir</span> berry
dotnet new tool-manifest
dotnet tool <span class="token function">install</span> StrawberryShake.Tools --version <span class="token number">11.0</span>.0-preview.35 --local</code></pre></div>
<p>In our example we are using the new .NET CLI local tools. <code class="language-text">dotnet new tool-manifest</code> creates the tools manifest which basically is like a packages.config and holds the information of which tools in which version we are using.</p>
<p>The next command <code class="language-text">dotnet tool install StrawberryShake.Tools --version 11.0.0-preview.35 --local</code> installs our <em>Strawberry Shake</em> tools.</p>
<p>Next we need a little project. Let’s create a new console application so that we can easily run and debug what we are doing.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="38763445142403510000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet new console -n BerryClient
cd BerryClient
dotnet add package StrawberryShake --version 11.0.0-preview.35
dotnet add package Microsoft.Extensions.Http --version 3.0.0
dotnet add package Microsoft.Extensions.DependencyInjection --version 3.0.0`, `38763445142403510000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet new console -n BerryClient
<span class="token builtin class-name">cd</span> BerryClient
dotnet <span class="token function">add</span> package StrawberryShake --version <span class="token number">11.0</span>.0-preview.35
dotnet <span class="token function">add</span> package Microsoft.Extensions.Http --version <span class="token number">3.0</span>.0
dotnet <span class="token function">add</span> package Microsoft.Extensions.DependencyInjection --version <span class="token number">3.0</span>.0</code></pre></div>
<p>OK, now that we have a project setup lets initialize the project by creating a local schema. Like with <em>relay</em> we are holding a local schema file that can be extended with local types and fields. Our <em>Graphql</em> compiler will use this schema information to validate the queries.</p>
<blockquote>
<p>For the next step ensure that the <em>Star Wars</em> <em>GraphQL</em> server is running since we will fetch the schema from the server.</p>
</blockquote>
<div
              class="gatsby-code-button-container"
              data-toaster-id="29674365447809016000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet graphql init ./StarWars http://localhost:5000/graphql -n StarWars`, `29674365447809016000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet graphql init ./StarWars http://localhost:5000/graphql -n StarWars</code></pre></div>
<p>The init command will download the schema as GraphQL SDL and create a config to refetch the schema. Also, the config contains the client name. The client name defines how the client class is and interface is named.</p>
<blockquote>
<p>Note: You can pass in the token and scheme if your endpoint is authenticated. There is also an update command to update the local schema.</p>
</blockquote>
<p>The configuration will look like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="20054174755528310000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  &quot;Schemas&quot;: [
    {
      &quot;Name&quot;: &quot;StarWars&quot;,
      &quot;Type&quot;: &quot;http&quot;,
      &quot;File&quot;: &quot;StarWars.graphql&quot;,
      &quot;Url&quot;: &quot;http://localhost:5000/graphql&quot;
    }
  ],
  &quot;ClientName&quot;: &quot;StarWarsClient&quot;
}`, `20054174755528310000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"Schemas"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"Name"</span><span class="token operator">:</span> <span class="token string">"StarWars"</span><span class="token punctuation">,</span>
      <span class="token property">"Type"</span><span class="token operator">:</span> <span class="token string">"http"</span><span class="token punctuation">,</span>
      <span class="token property">"File"</span><span class="token operator">:</span> <span class="token string">"StarWars.graphql"</span><span class="token punctuation">,</span>
      <span class="token property">"Url"</span><span class="token operator">:</span> <span class="token string">"http://localhost:5000/graphql"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"ClientName"</span><span class="token operator">:</span> <span class="token string">"StarWarsClient"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>OK, now let’s get started by creating our first client API. For this open your editor of choice. I can recommend using VSCode for this at the moment since you will get GraphQL highlighting. As we move forward, we will refine the tooling more and provide proper IntelliSense.</p>
<p>Now let us create a new file in our <code class="language-text">StarWars</code> folder called <code class="language-text">Queries.graphql</code> and add the following query:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="53687369163050330000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query getFoo {
  foo
}`, `53687369163050330000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> getFoo <span class="token punctuation">{</span>
  foo
<span class="token punctuation">}</span></code></pre></div>
<p>Now build your project.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="22539395260730454000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet build`, `22539395260730454000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet build</code></pre></div>
<p>When we now compile, we get an <em>MSBuild</em> error on which we can click in VSCode and we are pointed to the place in our query file from which the error stems from. The error tells us that there is no field <code class="language-text">foo</code> on the <code class="language-text">Query</code> type.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="15168185070639330000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`/Users/michael/Local/play/berry/BerryClient/StarWars/Queries.graphql(2,3): error GQL: The field \`foo\` does not exist on the type \`Query\`. [/Users/michael/Local/play/berry/BerryClient/BerryClient.csproj]`, `15168185070639330000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">/Users/michael/Local/play/berry/BerryClient/StarWars/Queries.graphql<span class="token punctuation">(</span><span class="token number">2,3</span><span class="token punctuation">)</span>: error GQL: The field <span class="token variable"><span class="token variable">`</span>foo<span class="token variable">`</span></span> does not exist on the <span class="token builtin class-name">type</span> <span class="token variable"><span class="token variable">`</span>Query<span class="token variable">`</span></span><span class="token builtin class-name">.</span> <span class="token punctuation">[</span>/Users/michael/Local/play/berry/BerryClient/BerryClient.csproj<span class="token punctuation">]</span></code></pre></div>
<p>Your GraphQL query document is not just a string, it properly compiles and is fully typed. Let's change our query to the following and compile again:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="18141379258095426000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query getFoo {
  hero {
    name
  }
}`, `18141379258095426000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> getFoo <span class="token punctuation">{</span>
  hero <span class="token punctuation">{</span>
    name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<div
              class="gatsby-code-button-container"
              data-toaster-id="40421491110300975000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet build`, `40421491110300975000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet build</code></pre></div>
<p>Now our project changes and we get a new <code class="language-text">Generated</code> folder that has all the types that we need to communicate with our backend.</p>
<p>Let us have a look at our client interface for a minute.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="47739377023728660000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public interface IStarWarsClient
{
    Task<IOperationResult<IGetFoo>> GetFooAsync();

    Task<IOperationResult<IGetFoo>> GetFooAsync(
        CancellationToken cancellationToken);
}`, `47739377023728660000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IStarWarsClient</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IOperationResult<span class="token punctuation">&lt;</span>IGetFoo<span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">GetFooAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IOperationResult<span class="token punctuation">&lt;</span>IGetFoo<span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">GetFooAsync</span><span class="token punctuation">(</span>
        <span class="token class-name">CancellationToken</span> cancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The client will have for each operation in your query file one method that will execute that exact operation.</p>
<p>Since, with GraphQL you essentially design your own service API by writing a query document your types can become quite messy very quickly.</p>
<p>In order to avoid getting a messy API and to give you control over how your C# API will look like we are using fragments to infer types.</p>
<p>Let us redesign our query with fragments and make it a bit more complex.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="34552946929814630000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query getHero {
  hero {
    ...SomeDroid
    ...SomeHuman
  }
}

fragment SomeHuman on Human {
  ...HasName
  homePlanet
}

fragment SomeDroid on Droid {
  ...HasName
  primaryFunction
}

fragment HasName on Character {
  name
}`, `34552946929814630000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> getHero <span class="token punctuation">{</span>
  hero <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token fragment function">SomeDroid</span>
    <span class="token operator">...</span><span class="token fragment function">SomeHuman</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">SomeHuman</span> <span class="token keyword">on</span> <span class="token class-name">Human</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token fragment function">HasName</span>
  homePlanet
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">SomeDroid</span> <span class="token keyword">on</span> <span class="token class-name">Droid</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token fragment function">HasName</span>
  primaryFunction
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">HasName</span> <span class="token keyword">on</span> <span class="token class-name">Character</span> <span class="token punctuation">{</span>
  name
<span class="token punctuation">}</span></code></pre></div>
<p>The fragments will yield in the following type structure:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="17414510940980498000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public interface ISomeHuman
    : IHasName
{
    string HomePlanet { get; }
}

public interface ISomeDroid
    : IHasName
{
    string PrimaryFunction { get; }
}

public interface IHasName
{
    string Name { get; }
}`, `17414510940980498000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ISomeHuman</span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IHasName</span></span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> HomePlanet <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ISomeDroid</span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IHasName</span></span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> PrimaryFunction <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IHasName</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>As we go forward, we will introduce some directives that will let you further manipulate the types like <code class="language-text">@spread</code>. <code class="language-text">@spread</code> will let you spread the fields of a child object over its parent object.</p>
<p>Let's make one more tweak to our query and then we get this example running.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="36135055514951885000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query getHero(\$episode: Episode) {
  hero(episode: \$episode) {
    ...SomeDroid
    ...SomeHuman
  }
}

fragment SomeHuman on Human {
  ...HasName
  homePlanet
}

fragment SomeDroid on Droid {
  ...HasName
  primaryFunction
}

fragment HasName on Character {
  name
}`, `36135055514951885000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> getHero<span class="token punctuation">(</span><span class="token variable">$episode</span><span class="token punctuation">:</span> Episode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  hero<span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token variable">$episode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token fragment function">SomeDroid</span>
    <span class="token operator">...</span><span class="token fragment function">SomeHuman</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">SomeHuman</span> <span class="token keyword">on</span> <span class="token class-name">Human</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token fragment function">HasName</span>
  homePlanet
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">SomeDroid</span> <span class="token keyword">on</span> <span class="token class-name">Droid</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token fragment function">HasName</span>
  primaryFunction
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">HasName</span> <span class="token keyword">on</span> <span class="token class-name">Character</span> <span class="token punctuation">{</span>
  name
<span class="token punctuation">}</span></code></pre></div>
<p>By definig a variable with our operation we now can pass in arguments into our operation.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="44382596087793270000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public interface IStarWarsClient
{
    Task<IOperationResult<IGetHero>> GetHeroAsync(
        Episode episode);

    Task<IOperationResult<IGetHero>> GetHeroAsync(
        Episode episode,
        CancellationToken cancellationToken);
}`, `44382596087793270000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IStarWarsClient</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IOperationResult<span class="token punctuation">&lt;</span>IGetHero<span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">GetHeroAsync</span><span class="token punctuation">(</span>
        <span class="token class-name">Episode</span> episode<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IOperationResult<span class="token punctuation">&lt;</span>IGetHero<span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">GetHeroAsync</span><span class="token punctuation">(</span>
        <span class="token class-name">Episode</span> episode<span class="token punctuation">,</span>
        <span class="token class-name">CancellationToken</span> cancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>OK, let's get it running and then go into more details. By default the generator will also generate dependency injection code for <code class="language-text">Microsoft.Extensions.DependencyInjection</code>. In order to get our client up and running we just have to set up a dependency injection container.</p>
<blockquote>
<p>Note: You can shut of dependency injection generation with a <em>MSBuild</em> property. The client can also be instantiated with a builder or by using a different dependency injection container.</p>
</blockquote>
<p>Replace you <code class="language-text">Program</code> class with the following code.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="44963936415372860000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`class Program
{
    static async Task Main(string[] args)
    {
        var serviceCollection = new ServiceCollection();
        serviceCollection.AddDefaultScalarSerializers();
        serviceCollection.AddStarWarsClient();
        serviceCollection.AddHttpClient(&quot;StarWarsClient&quot;)
            .ConfigureHttpClient(client =>
                client.BaseAddress = new Uri(&quot;http://localhost:5000/graphql&quot;));

        IServiceProvider services = serviceCollection.BuildServiceProvider();
        IStarWarsClient client = services.GetRequiredService<IStarWarsClient>();

        IOperationResult<IGetHero> result = await client.GetHeroAsync(Episode.Newhope);
        Console.WriteLine(((ISomeDroid)result.Data.Hero).Name);

        result = await client.GetHeroAsync(Episode.Empire);
        Console.WriteLine(((ISomeHuman)result.Data.Hero).Name);
    }
}`, `44963936415372860000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">class</span> <span class="token class-name">Program</span>
<span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> serviceCollection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        serviceCollection<span class="token punctuation">.</span><span class="token function">AddDefaultScalarSerializers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        serviceCollection<span class="token punctuation">.</span><span class="token function">AddStarWarsClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        serviceCollection<span class="token punctuation">.</span><span class="token function">AddHttpClient</span><span class="token punctuation">(</span><span class="token string">"StarWarsClient"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">ConfigureHttpClient</span><span class="token punctuation">(</span>client <span class="token operator">=></span>
                client<span class="token punctuation">.</span>BaseAddress <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">"http://localhost:5000/graphql"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">IServiceProvider</span> services <span class="token operator">=</span> serviceCollection<span class="token punctuation">.</span><span class="token function">BuildServiceProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">IStarWarsClient</span> client <span class="token operator">=</span> services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRequiredService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IStarWarsClient<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">IOperationResult<span class="token punctuation">&lt;</span>IGetHero<span class="token punctuation">></span></span> result <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">GetHeroAsync</span><span class="token punctuation">(</span>Episode<span class="token punctuation">.</span>Newhope<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ISomeDroid<span class="token punctuation">)</span>result<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>Hero<span class="token punctuation">)</span><span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>

        result <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">GetHeroAsync</span><span class="token punctuation">(</span>Episode<span class="token punctuation">.</span>Empire<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ISomeHuman<span class="token punctuation">)</span>result<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>Hero<span class="token punctuation">)</span><span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Run the console and it will output the following;</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="77091929683219300000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`R2-D2
Luke Skywalker`, `77091929683219300000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">R2-D2
Luke Skywalker</code></pre></div>
<h2 id="generation-options" style="position:relative;"><a href="#generation-options" aria-label="generation options permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Generation Options</h2>
<p>By default, <em>Strawberry Shake</em> will generate C# 7.3 without nullable reference types. We also by default generate dependency injection code for <code class="language-text">Microsoft.Extensions.DependencyInjection</code>.</p>
<p>If the generator detects that you are using C# 8.0 and enabled support for nullable reference types, then the generate is switching to produce code with nullable reference types.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="59825434507739650000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`<PropertyGroup>
  <LangVersion>8.0</LangVersion>
  <Nullable>enable</Nullable>
</PropertyGroup>`, `59825434507739650000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PropertyGroup</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LangVersion</span><span class="token punctuation">></span></span>8.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LangVersion</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Nullable</span><span class="token punctuation">></span></span>enable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Nullable</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PropertyGroup</span><span class="token punctuation">></span></span></code></pre></div>
<p>In order to manually overwrite those defaults, we added some build properties that you can use.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="67833732899890830000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`<PropertyGroup>
  <BerryLangVersion>CSharp_8_0</BerryLangVersion>
  <BerryEnableDI>true</BerryEnableDI>
  <BerryNamespace>\$(RootNamespace)</BerryNamespace>
</PropertyGroup>`, `67833732899890830000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PropertyGroup</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BerryLangVersion</span><span class="token punctuation">></span></span>CSharp_8_0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>BerryLangVersion</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BerryEnableDI</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>BerryEnableDI</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BerryNamespace</span><span class="token punctuation">></span></span>$(RootNamespace)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>BerryNamespace</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PropertyGroup</span><span class="token punctuation">></span></span></code></pre></div>
<h2 id="dependency-injection" style="position:relative;"><a href="#dependency-injection" aria-label="dependency injection permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Dependency Injection</h2>
<p>The client API can be used with other dependency injection container and also without dependency injection at all.</p>
<p>The execution pipeline can be extended or completely swapped out. This is an important aspect of <em>Strawberry Shake</em> since this allows us to add cross-cutting concerns like auto-batching, persisted query support and other features.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="935414009589208300"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`private static IServiceCollection TryAddDefaultHttpPipeline(
    this IServiceCollection serviceCollection)
{
    serviceCollection.TryAddSingleton<OperationDelegate>(
        sp => HttpPipelineBuilder.New()
            .Use<CreateStandardRequestMiddleware>()
            .Use<SendHttpRequestMiddleware>()
            .Use<ParseSingleResultMiddleware>()
            .Build(sp));
    return serviceCollection;
}`, `935414009589208300`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name">IServiceCollection</span> <span class="token function">TryAddDefaultHttpPipeline</span><span class="token punctuation">(</span>
    <span class="token keyword">this</span> <span class="token class-name">IServiceCollection</span> serviceCollection<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    serviceCollection<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">TryAddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>OperationDelegate<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>
        sp <span class="token operator">=></span> HttpPipelineBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Use</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CreateStandardRequestMiddleware<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Use</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SendHttpRequestMiddleware<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Use</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ParseSingleResultMiddleware<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>sp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> serviceCollection<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>When used with Microsoft's dependency injection container then we are also using the <code class="language-text">IHttpFactory</code> which allows for integration with polly and others.</p>
<h2 id="roadmap" style="position:relative;"><a href="#roadmap" aria-label="roadmap permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Roadmap</h2>
<p>We are still heavy at work on the client and generator and this first preview is where we invite people to try it out in order to get feedback.</p>
<p>There is still a ton of work to be done and a ton of tests to be written to get this up for prime time.</p>
<p>We will have I think two more weeks to work on the generator to iron out generation issues. We will add documentation tags and things like that over the next view weeks.</p>
<p>Also, there are some generator directives that should show up next week like <code class="language-text">@spread</code>, <code class="language-text">@name</code> and <code class="language-text">@type</code>.</p>
<p>Moreover, we will add support for local schema stitching. We already integrated the stitching engine into the generator but have a view more things to do before this works properly.</p>
<p>Local schema stitching will allow you to focus on your client API without having to wonder which client you have to use for which service. Also, it will allow you to form one local schema from which you can generate the types exactly like you want them.</p>
<p>Furthermore, there are execution features that we are currently adding like auto-batching and manual-batching. Support for subscription, ´@defer´ and persisted queries are also coming.</p>
<p>Last but not least we have a lot to do on the tooling side. We want to have a nice integration with all Visual Studios and are working on things like live generation. You can get a feeling for this by doing <code class="language-text">dotnet watch build</code>. We have updated the watch information to exclude the generated files and include the <em>GraphQL</em> files.</p>
<p>Please check it out and give us feedback so we can adjust and refine the experience further.</p>
<p>If you want to get into contact with us head over to our <a href="https://join.slack.com/t/hotchocolategraphql/shared_invite/enQtNTA4NjA0ODYwOTQ0LTViMzA2MTM4OWYwYjIxYzViYmM0YmZhYjdiNzBjOTg2ZmU1YmMwNDZiYjUyZWZlMzNiMTk1OWUxNWZhMzQwY2Q">slack channel</a> and join our community.</p>]]></content:encoded>
            <enclosure url="https://chillicream.com/static/c59e0fc03a4c1ca4d193f15390c1bdda/ee604/strawberry-shake-banner.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[GraphQL - Hot Chocolate 10.0.0]]></title>
            <link>https://chillicream.com/blog/2019/08/14/hot-chocolate-10.0.0</link>
            <guid>/blog/2019/08/14/hot-chocolate-10.0.0</guid>
            <pubDate>Wed, 14 Aug 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Today we have released version 10 of Hot Chocolate. We originally started building version 9.1 which grew bigger and at one point became…]]></description>
            <content:encoded><![CDATA[<p>Today we have released version 10 of <em>Hot Chocolate</em>. We originally started building version 9.1 which grew bigger and at one point became version 10. We have focused a lot on our server implementation. But let me walk you through our latest release.</p>
<h2 id="filters" style="position:relative;"><a href="#filters" aria-label="filters permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Filters</h2>
<p>So, while we focused a lot on the server implementation, we also added some nice features to the GraphQL core. The main feature we added here is the new filter API.</p>
<p>Filters let you query your backend with a powerful query input type that translates into native database queries.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="15326196374179424000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  persons(
    where: { OR: [{ firstName_starts_with: &quot;abc&quot; }, { lastName: &quot;def&quot; }] }
  ) {
    firstName
    lastName
  }
}`, `15326196374179424000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  persons<span class="token punctuation">(</span>
    <span class="token attr-name">where</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token attr-name">OR</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token attr-name">firstName_starts_with</span><span class="token punctuation">:</span> <span class="token string">"abc"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token attr-name">lastName</span><span class="token punctuation">:</span> <span class="token string">"def"</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    firstName
    lastName
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The above query would translate to a something like <code class="language-text">persons.Where(t =&gt; t.FirstName.StartsWith(&quot;abc&quot;) || t.LastName == def)</code>.</p>
<p>This works out of the box if you are using <code class="language-text">IQueryable</code>.</p>
<p>All you have to do in your schema type is to add a <code class="language-text">UseFiltering</code> to your field descriptor.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="33695738907386800000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class QueryType
  : ObjectType<Query>
{
    protected override void Configure(IObjetcTypeDescriptor<Query> descriptor)
    {
        descriptor.Field(t => t.GetPersons(default))
          .Type<ListType<PersonType>>()
          .UseFiltering();
    }
}`, `33695738907386800000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QueryType</span>
  <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType<span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IObjetcTypeDescriptor<span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span><span class="token function">GetPersons</span><span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Type</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ListType<span class="token punctuation">&lt;</span>PersonType<span class="token punctuation">></span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">UseFiltering</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Filters are easily combined with our pagination.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="21275511711767912000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class QueryType
  : ObjectType<Query>
{
    protected override void Configure(IObjetcTypeDescriptor<Query> descriptor)
    {
        descriptor.Field(t => t.GetPersons(default))
          .UsePaging<PersonType>()
          .UseFiltering();
    }
}`, `21275511711767912000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QueryType</span>
  <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType<span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IObjetcTypeDescriptor<span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span><span class="token function">GetPersons</span><span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UsePaging</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>PersonType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">UseFiltering</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Also, it is possible to customize filters by describing what fields are filterable and what operators are allowed.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="16395143130876666000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class QueryType
  : ObjectType<Query>
{
    protected override void Configure(IObjetcTypeDescriptor<Query> descriptor)
    {
        descriptor
          .Field(t => t.GetPersons(default))
          .UsePaging<PersonType>()
          .UseFiltering(d => d.Ignore(t => t.LastName));
    }
}`, `16395143130876666000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QueryType</span>
  <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType<span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IObjetcTypeDescriptor<span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor
          <span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span><span class="token function">GetPersons</span><span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UsePaging</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>PersonType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">UseFiltering</span><span class="token punctuation">(</span>d <span class="token operator">=></span> d<span class="token punctuation">.</span><span class="token function">Ignore</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>LastName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>If you want to use the same filter multiple times all over your schema you can also describe the filter input type separately.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="89507436504253320000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class PersonFilterType
    : FilterInputType<Person>
{
    protected override void Configure(
        IFilterInputTypeDescriptor<Foo> descriptor)
    {
        descriptor
            .BindFieldsExplicitly()
            .Filter(t => t.Name)
            .BindOperationsExplicitly()
            .AllowEquals().Name(&quot;equals&quot;).And()
            .AllowContains().Name(&quot;contains&quot;).And()
            .AllowIn().Name(&quot;in&quot;);
    }
}`, `89507436504253320000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonFilterType</span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">FilterInputType<span class="token punctuation">&lt;</span>Person<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span>
        <span class="token class-name">IFilterInputTypeDescriptor<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor
            <span class="token punctuation">.</span><span class="token function">BindFieldsExplicitly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Filter</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">BindOperationsExplicitly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">AllowEquals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token string">"equals"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">And</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">AllowContains</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token string">"contains"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">And</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">AllowIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token string">"in"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>And then use this filter type where you need it.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="4534587601756867600"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class QueryType
  : ObjectType<Query>
{
    protected override void Configure(IObjetcTypeDescriptor<Query> descriptor)
    {
        descriptor
          .Field(t => t.GetPersons(default))
          .UsePaging<PersonType>()
          .UseFiltering<PersonFilterType>());
    }
}`, `4534587601756867600`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QueryType</span>
  <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType<span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IObjetcTypeDescriptor<span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor
          <span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span><span class="token function">GetPersons</span><span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UsePaging</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>PersonType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UseFiltering</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>PersonFilterType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The nice thing here is that the filter works out of the box on <code class="language-text">IQueryable</code> and <code class="language-text">IEnumerable</code> so you can use it for database queries as well as for in-memory lists.</p>
<p>With version 10 of <em>Hot Chocolate</em> we are supporting filters on scalar fields. But we are already working on support for object filters and enumerable filters.</p>
<p>Also, we are working on sorting which should be included in the first preview of version 11.</p>
<p>If you want to give input or follow our work, you can head over to these four issues that will be coming with version 11.</p>
<ul>
<li><a href="https://github.com/ChilliCream/hotchocolate/issues/921">Object Filters #921</a></li>
<li><a href="https://github.com/ChilliCream/hotchocolate/issues/922">IEnumerable Filters #922</a></li>
<li><a href="https://github.com/ChilliCream/hotchocolate/issues/923">Sorting #923</a></li>
<li><a href="https://github.com/ChilliCream/hotchocolate/issues/924">Aggregations #924</a></li>
</ul>
<blockquote>
<p>If you want to check out more about filters head over to our <a href="https://hotchocolate.io/docs/filters">documentation</a>.</p>
</blockquote>
<p>Let me also thank <a href="https://github.com/PascalSenn">Pascal</a> for his awesome work on this one.</p>
<h2 id="subscriptions" style="position:relative;"><a href="#subscriptions" aria-label="subscriptions permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Subscriptions</h2>
<p>Subscriptions was another big investment that we took for this release.</p>
<h3 id="redis" style="position:relative;"><a href="#redis" aria-label="redis permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Redis</h3>
<p>For the core API we introduced a <em>Redis</em> subscription provider. This means that you now can use <em>Redis</em> as a pub/sub system without a hassle.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="5194328909430279000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`var configuration = new ConfigurationOptions
{
    Ssl = true,
    AbortOnConnectFail = false,
    Password = password
};

configuration.EndPoints.Add(&quot;host:port&quot;);

services.AddRedisSubscriptionProvider(configuration);`, `5194328909430279000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name"><span class="token keyword">var</span></span> configuration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ConfigurationOptions</span>
<span class="token punctuation">{</span>
    Ssl <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    AbortOnConnectFail <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    Password <span class="token operator">=</span> password
<span class="token punctuation">}</span><span class="token punctuation">;</span>

configuration<span class="token punctuation">.</span>EndPoints<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"host:port"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

services<span class="token punctuation">.</span><span class="token function">AddRedisSubscriptionProvider</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>That`s all you have to do to connect the query engine with <code class="language-text">Redis</code>.</p>
<p><strong>So why should we want to use <code class="language-text">Redis</code> anyway.</strong></p>
<p>The thing with in-memory subscriptions is that they will only work reliable if you have one instance of <em>Hot Chocolate</em>. When you have deployed multiple instance of <em>Hot Chcocolate</em> or if you are scaling on demand with a massive amount of subscribers then you want to make sure that your pub/sub system scales and that mutations executed on one server raise an event on another one.</p>
<p>But there is more, sometimes you want to raise an event without triggering a mutation, maybe there was an event somewhere in your infrastructure that you want to relay as a GraphQL subscription, this can also be done through an external pub/sub system like Redis.</p>
<p>With version 11 We will add <em>Kafka</em> and <em>Azure EventHub</em> support and are also looking into other pub/sub systems, so that you can use whatever feels best to you.</p>
<h3 id="pipelines" style="position:relative;"><a href="#pipelines" aria-label="pipelines permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Pipelines</h3>
<p>We also rebuild the whole WebSocket handling in the server by using the new <code class="language-text">Pipeline</code> API that Microsoft introduced to .Net. This makes it now super-efficient how we handle the messages with our new <code class="language-text">UTF8RequestParser</code>. But we are not done here and will with version 11 further optimize our parser to work even better with pipelines.</p>
<blockquote>
<p>If you want to check out more about subscriptions head over to our <a href="https://hotchocolate.io/docs/code-first-subscription">documentation</a>.</p>
</blockquote>
<p>Let me also thank <a href="https://github.com/glucaci">Gabriel</a> for his great work on subscriptions.</p>
<h2 id="batching" style="position:relative;"><a href="#batching" aria-label="batching permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Batching</h2>
<p>Another big feature we have invested in was batching. When we started on this one we reflected a lot about how we want to do this and if we really need this one. In the end we decided that batching could enable great scenarios and is worth adding to our server.</p>
<p>When Lee Byron initially showed batching off, he explained that this would be useful in cases where you want to fetch important data first and delay more expensive data without needing to issue two separate calls.</p>
<p>They had this example that they want to fetch the news stream of a given user and the comments should appear once those are available.</p>
<p><code class="language-text">POST /graphql?batchOperations=[NewsFeed, StoryComments]</code></p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="98794460028513810000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query NewsFeed {
  stories {
    id @export(as: &quot;ids&quot;)
    actor
    message
  }
}

query StoryComments {
  stories(ids: \$ids) {
    comments(first: 2) {
      actor
      message
    }
  }
}`, `98794460028513810000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> NewsFeed <span class="token punctuation">{</span>
  stories <span class="token punctuation">{</span>
    id <span class="token directive function">@export</span><span class="token punctuation">(</span><span class="token attr-name">as</span><span class="token punctuation">:</span> <span class="token string">"ids"</span><span class="token punctuation">)</span>
    actor
    message
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">query</span> StoryComments <span class="token punctuation">{</span>
  stories<span class="token punctuation">(</span><span class="token attr-name">ids</span><span class="token punctuation">:</span> <span class="token variable">$ids</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    comments<span class="token punctuation">(</span><span class="token attr-name">first</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      actor
      message
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In the above query we would first fetch the stories, collect all the story ids and use these as an input to the next query to fetch all the comments for the former stories.</p>
<p>The nice thing is that this is done in one HTTP call and as soon as query one is executed, we will write the result into the stream and the client can already work with that data while waiting for the second result.</p>
<p>This all is working over one HTTP call without WebSockets and is super-efficient.</p>
<p><strong>Why did we question its use?</strong></p>
<p>The thing is that with version 11 we will introduce <code class="language-text">@defer</code> which will allow you to do the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="70558491582873950000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`query NewsFeed {
  stories {
    id @export(as: &quot;ids&quot;)
    actor
    message
    ... @defer {
      comments(first: 2) {
        actor
        message
      }
    }
  }
}`, `70558491582873950000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> NewsFeed <span class="token punctuation">{</span>
  stories <span class="token punctuation">{</span>
    id <span class="token directive function">@export</span><span class="token punctuation">(</span><span class="token attr-name">as</span><span class="token punctuation">:</span> <span class="token string">"ids"</span><span class="token punctuation">)</span>
    actor
    message
    <span class="token operator">...</span> <span class="token directive function">@defer</span> <span class="token punctuation">{</span>
      comments<span class="token punctuation">(</span><span class="token attr-name">first</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        actor
        message
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The fragment that is annotated with <code class="language-text">@defer</code> will be deferred to when it is ready. This means you can write queries much cleaner with this and reap the same benefits.</p>
<p><strong>What makes batching a great feature then?</strong></p>
<p>First, you can defer query parts with this now in version 10.</p>
<p>Second, I think batching is very interesting with mutations where you can write complex mutation flows that use the results of one mutation to feed data in the next mutation. The ability to export result data into variables lets you write nice data flows.</p>
<p>Look at how easy you can export data as variable by just adding <code class="language-text">@export</code>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="24953478186489230000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  foo {
    bar @export
  }
}`, `24953478186489230000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  foo <span class="token punctuation">{</span>
    bar <span class="token directive function">@export</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>What`s important to know here is that you also can export objects that will convert to a matching input type.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="99099033649232480000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  foo @export(as: &quot;something&quot;) {
    bar
  }
}`, `99099033649232480000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  foo <span class="token directive function">@export</span><span class="token punctuation">(</span><span class="token attr-name">as</span><span class="token punctuation">:</span> <span class="token string">"something"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    bar
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Third, we also wanted to support Apollo batching where Apollo collects all the queries of a client in a certain time window and sends those in one request to our server. One batch will share the <em>DataLoader</em> instances which means that the batch request will be faster than sending them in separately.</p>
<blockquote>
<p>We are supporting operation batching and request batching and if you would like to know more about it head over to our <a href="https://hotchocolate.io/docs/batching">documentation</a>.</p>
</blockquote>
<h2 id="persisted-queries" style="position:relative;"><a href="#persisted-queries" aria-label="persisted queries permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Persisted Queries</h2>
<p>With version 10 we now support persisted queries. With persisted queries you can add well-knonw queries to a second-level cache. All queries stored in there are considered valid.</p>
<p><strong>So, what is this for?</strong></p>
<p>Persisted queries are faster, since we validate those only once. Moreover, you do not need to send us the query every time, you can instead just send the query name and the server will look up the query and execute it. This can dramatically improves performance, reduces bandwidth and memory usage.</p>
<p>This makes it feasible to use a simple <code class="language-text">GET</code> request instead of a <code class="language-text">POST</code> request which can also have benefits when using things like CDNs.</p>
<p><code class="language-text">GET http://example.com/graphql?namedQuery=QUERYNAME&amp;variables={&quot;id&quot;:&quot;QVBJcy5ndXJ1&quot;}</code></p>
<p>We have opted to support both active persisted queries and persisted queries.</p>
<blockquote>
<p>Read more about this <a href="https://hotchocolate.io/docs/persisted-queries">here</a>;</p>
</blockquote>
<h2 id="server-modularization" style="position:relative;"><a href="#server-modularization" aria-label="server modularization permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Server Modularization</h2>
<p>With Version 10 we have now a modularized server implementation. That each middleware is placed in its own package. You can still just add our <code class="language-text">HotChocolate.AspNetCore</code> or <code class="language-text">HotChocolate.AspNetClassic</code> package and do not worry what is included in your server. But with version 10 you could now just add some of the middleware like maybe just HTTP-GET or HTTP-POST. This way if you do not use for instance subscriptions than there will not even be the code for subscriptions.</p>
<p>With version 10 we have the following middleware available:</p>
<ul>
<li>HotChocolate.AspNetCore.HttpPost</li>
<li>HotChocolate.AspNetCore.HttpGet</li>
<li>HotChocolate.AspNetCore.HttpGetSchema</li>
<li>HotChocolate.AspNetCore.Subscriptions</li>
<li>HotChocolate.AspNetCore.Authorization</li>
</ul>
<blockquote>
<p>Read more about this right <a href="https://hotchocolate.io/docs/aspnet">here</a></p>
</blockquote>
<h2 id="utf-8-request-parser" style="position:relative;"><a href="#utf-8-request-parser" aria-label="utf 8 request parser permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>UTF-8 Request Parser</h2>
<p>With GraphQL most requests are provided as <code class="language-text">JSON</code> that contains the request as an escaped string. This is kind of bad for performance since we first parse the <code class="language-text">JSON</code> then take the string and parse again a string that we actually do not need.</p>
<p>With the new <em>UTF-8 request parser</em> we can finally just read the binary request stream and parse the JSON and the GraphQL request in one go. But there is more, we have given our new UTF-8 request parser access to our document cache, meaning while we parse the JSON request and hit the part were the GraphQL request is, we can look up if this query is already cached. This dramatically reduces memory usage and performance since we will not consume the query property anyway.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://chillicream.com/static/79eb87e528f8d0453db52a6e085d38e6/fbf08/request_parser_mem.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 87.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACnUlEQVQ4y5WTyWsUQRTGB3HBv0DPIYgn48mAnsxVEFH04AJGA6KXHLwoSEAFl1uCh8SMAWM8JG5XvYmHBM0lZhITJ4tJ99iTmTGxZ3qb3qo+X1V3D+0YAyn4qFdV1K++V/UqA2qcc9EhZAyuH2xLHikIAjDaK1omDXTMGkJLB1wL3DHA7CpQN6WaxyHFvG6QTJimCV3XJVQCAxYB3+RNnPvIcO0zcHUCuDIOdE1E+mdM8WVS9yQgvFkEFU4l0A8j4K1xA5leH5khsj7IkcnyqE+UbYoHOHYOM9SJaJsGAcMYGDu894WATwPsfQnsesG31O4RAj7n2DfG4aaB4v68kKWAPgHFJhZrc+CeGLi/GSgfBVG7PW5RyohTJmXjfpBvLkp5x3ATULzMiqLA+r2OD8vruDm5gbs5Ez1fa7gzpeN+zsXjGeBRjuPhNJOxkIgf0FzfHEdIZsx0ypZDpUCz77Vn6F5qQ4/agR6lA90/DuOT0R/7D2IhNeaN/AzDQBjGKTNEdzi62o8TUy24NN+Oi3NHcHKmFSOlXrlWD3zUqYh9BikRe1QdyYM2gMJhwKKTXysDOJM7gK6FY+jKH8XZbwcxVnkS+WG+rLOGP4rF3uRT/OUwAb5S+nFqugWd+XZ0fm/H6dlWjJb7tgcUE2EMfKdmcX72EG4sdeD64nFcmG/D21/RHYY8kBuSJuIElgAbPyVZKFWLUGqLWHNUFO1VFKxlVN0NhPR6Pt2h53lyk1AS+74v4eI/y7+ctl3Va7BrDlzbg1m1UNLKcKw6LMtCuVyGpmmwbVuqUCigVCrJWLhTqPRc1yWHie0U+H9tq/VkLcN4VEt5A1hY01EsqFijkyuVijxV9FpRg/azCMs1seLMy3kh4VJVVdkLCad/AHtWszQvVwgzAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Request Parser Memory"
        title="Request Parser Memory"
        src="https://chillicream.com/static/79eb87e528f8d0453db52a6e085d38e6/5a190/request_parser_mem.png"
        srcset="https://chillicream.com/static/79eb87e528f8d0453db52a6e085d38e6/772e8/request_parser_mem.png 200w,
https://chillicream.com/static/79eb87e528f8d0453db52a6e085d38e6/e17e5/request_parser_mem.png 400w,
https://chillicream.com/static/79eb87e528f8d0453db52a6e085d38e6/5a190/request_parser_mem.png 800w,
https://chillicream.com/static/79eb87e528f8d0453db52a6e085d38e6/fbf08/request_parser_mem.png 962w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>The new request parser does only allocate 1/3 of the memory that GraphQL-DotNet uses with it`s combination of JSON.Net and it`s string based GraphQL parser.</p>
<p>The Hot Chocolate GraphQL parser is twice as fast than the GraphQL-DotNet parser on average. The whole request pipeline is 3 times faster on average, but we are not done yet and will double down on performance with the new query execution plans and our updated syntax tree that allows to further reduce string usage.</p>
<h2 id="everything-else" style="position:relative;"><a href="#everything-else" aria-label="everything else permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Everything Else</h2>
<p>With version 10 we added a ton of bug fixes and also, we added a lot of API improvements that will make your day to day business so much easier.</p>
<p>Like now you can add error filter to the dependency injection instead of registering them with the execution builder.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="1859054275371785500"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddErrorFilter<MyCustomErrorFilter>();`, `1859054275371785500`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddErrorFilter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyCustomErrorFilter<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>The same goes for class <em>DataLoader</em>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="33773954912196657000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddDataLoader<MyCustomDataLoader>();`, `33773954912196657000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDataLoader</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyCustomDataLoader<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>When you use this extension, we also will add the <em>DataLoader</em> registry.</p>
<p>Also, we refined things like the schema builder so that you can in place now define all the types:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="71216089064514490000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`SchemaBuilder.New()
  .AddEnumType(d => d.Name(&quot;MyEnum&quot;).Value(&quot;FOO))
  ...
  .Create();`, `71216089064514490000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddEnumType</span><span class="token punctuation">(</span>d <span class="token operator">=></span> d<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token string">"MyEnum"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Value</span><span class="token punctuation">(</span>"FOO<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token range operator">..</span><span class="token punctuation">.</span>
  <span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>There are so many little things that can make your day :)</p>
<h2 id="version-11" style="position:relative;"><a href="#version-11" aria-label="version 11 permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Version 11</h2>
<p>Like with every release we are giving a little outlook for the next version. As the releases are fluid, we are sometimes moving things around.</p>
<p>We want to really focus on two major topics with the next release.</p>
<h2 id="query-execution-plans" style="position:relative;"><a href="#query-execution-plans" aria-label="query execution plans permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Query Execution Plans</h2>
<p>We originally planned for this one for version 10 (aka version 9.1) but decided that the current set of new features is already a good version that is worth to release. But with the next release this is one of the two things we really will focus on. With this in place we will double down on performance and will introduce features like <code class="language-text">@defer</code> and <code class="language-text">@stream</code>.</p>
<p>Moreover, this one will be the backbone of our new stitching layer that will bring lots of new features to schema stitching.</p>
<h2 id="client-api" style="position:relative;"><a href="#client-api" aria-label="client api permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Client API</h2>
<p>The second thing we already started work on is a client API for .NET Core. We are currently experimenting with how we design this new piece of API. We have started a discussion around this in our slack channel and will start with some coding soon.</p>
<h2 id="banana-cakepop" style="position:relative;"><a href="#banana-cakepop" aria-label="banana cakepop permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Banana Cakepop</h2>
<p><strong>Oh, didn`t you forget something?</strong></p>
<p>Yes, yes originally, we had planned to release <em>Banana Cakepop</em> alongside this version. We ran into some performance issues with the tree we originally selected when using large schemas with more than 1000 types.</p>
<p>We have now started to write the tree component ourselves which is taking some extra time. We already see that we can handle now massive schemas far beyond 1000 types without any hiccups. But we have still lots to do on the new tree.</p>
<p>I hope that we can see the promised preview in the next 4 to 8 weeks. We want to release something really good and not something half-backed.</p>
<h2 id="the-other-things" style="position:relative;"><a href="#the-other-things" aria-label="the other things permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>The Other Things</h2>
<p>We also will add more features to our filter API and make working with databases even easier.</p>
<p>Also, we will add more subscription provider like Kafka and EventHub.</p>
<p>Furthermore, we will rework our <code class="language-text">Utf8GraphQLReader</code> to use <code class="language-text">ReadOnlySequence&lt;byte&gt;</code> instead of <code class="language-text">ReadOnlySpan&lt;byte&gt;</code> in order to make this even better work with the Pipeline API. Apart from that we will optimize the syntax tree to be able to work with raw bytes instead of strings. At the moment scalar like String, Int, Float and Enum are parsed as string representation like with the original node parser. The scalar type parses then the string into the native type. The same goes for the new UTF-8 request parser. This is unnecessary with the <code class="language-text">Utf8Parser</code> and <code class="language-text">Utf8Formater</code>. We will change the AST to instead have the raw bytes. The current <code class="language-text">Value</code> property will still be there but only for compatibility with tools that use the current version of the AST. The new scalar types will have access to a <code class="language-text">ReadOnlySpan&lt;byte&gt;</code> and can decide how to efficiently parse literals.</p>
<p>If you want to get into contact with us head over to our <a href="https://join.slack.com/t/hotchocolategraphql/shared_invite/enQtNTA4NjA0ODYwOTQ0LTViMzA2MTM4OWYwYjIxYzViYmM0YmZhYjdiNzBjOTg2ZmU1YmMwNDZiYjUyZWZlMzNiMTk1OWUxNWZhMzQwY2Q">slack channel</a> and join our community.</p>]]></content:encoded>
            <enclosure url="https://chillicream.com/static/3bff7544d8c94207baaf1de9c9faad4f/ee604/hotchocolate-banner.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[GraphQL - Hot Chocolate 9.0.0]]></title>
            <link>https://chillicream.com/blog/2019/06/05/hot-chocolate-9.0.0</link>
            <guid>/blog/2019/06/05/hot-chocolate-9.0.0</guid>
            <pubDate>Wed, 05 Jun 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Today we have released version 9 of Hot Chocolate. This release was mainly focused on the schema APIs and performance. Furthermore, we…]]></description>
            <content:encoded><![CDATA[<p>Today we have released version 9 of <em>Hot Chocolate</em>. This release was mainly focused on the schema APIs and performance. Furthermore, we started work on the wider <em>ChilliCream GraphQL Platform</em> and today you will get some insides where we are heading with this.</p>
<h2 id="schema-builder" style="position:relative;"><a href="#schema-builder" aria-label="schema builder permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Schema Builder</h2>
<p>The schema builder API is the most visible <strong>new</strong> API with version 9. It provides a simpler API that is easier to extend.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="31115773580613260000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`SchemaBuilder.New()
    .AddQueryType<MyQueryType>()
    .AddObjectType(d => d.Name(&quot;Foo&quot;).Field(&quot;bar&quot;).Resolver(&quot;baz))
    .ModifyConfiguration(o => o.UseXmlDocumentation = true)
    .SetSchema(d => d.Description(&quot;This is my schema.&quot;))
    .AddServices(services)
    ...
    .Create();`, `31115773580613260000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyQueryType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddObjectType</span><span class="token punctuation">(</span>d <span class="token operator">=></span> d<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token string">"Foo"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span><span class="token string">"bar"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Resolver</span><span class="token punctuation">(</span>"baz<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ModifyConfiguration</span><span class="token punctuation">(</span>o <span class="token operator">=></span> o<span class="token punctuation">.</span>UseXmlDocumentation <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">SetSchema</span><span class="token punctuation">(</span>d <span class="token operator">=></span> d<span class="token punctuation">.</span><span class="token function">Description</span><span class="token punctuation">(</span><span class="token string">"This is my schema."</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddServices</span><span class="token punctuation">(</span>services<span class="token punctuation">)</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>With the new API you have a lot more capabilities, but do not worry, we did not throw out the old API. You still can use <code class="language-text">Schema.Create</code> to build your schema. The classic API now uses the schema builder underneath so that you should have a seamless upgrade from version 8 to version 9.</p>
<blockquote>
<p>Read more about the new schema builder <a href="2019-04-12-type-system.md">here</a>.</p>
</blockquote>
<h2 id="extensibility" style="position:relative;"><a href="#extensibility" aria-label="extensibility permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Extensibility</h2>
<p>With the new schema builder, we have opened up the type system so that it is now easily extendable. Things like our relay integration and the upcoming GraphQL filters are built upon these new APIs. It is now very easy to introduce generic schema types and translate those to GraphQL types.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="90657723784746700000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class EdgeType<TSchemaType>
    : ObjectType<IEdge>
    where T : IOutputType
{
    protected override void Configure(
        IObjectTypeDescriptor<IEdge> descriptor)
    {
        descriptor.Name(dependency => dependency.Name + &quot;Edge&quot;)
            .DependsOn<TSchemaType>();
    }
}`, `90657723784746700000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EdgeType<span class="token punctuation">&lt;</span>TSchemaType<span class="token punctuation">></span></span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType<span class="token punctuation">&lt;</span>IEdge<span class="token punctuation">></span></span></span>
    <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IOutputType</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span>
        <span class="token class-name">IObjectTypeDescriptor<span class="token punctuation">&lt;</span>IEdge<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span>dependency <span class="token operator">=></span> dependency<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">"Edge"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DependsOn</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TSchemaType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Moreover, we have introduced metadata support to almost every corner of the GraphQL core. This means that you can pass in context data not only into the execution pipeline but also into types, fields, arguments, directives and even into the query result. This means we let you store custom context/state objects everywhere. This makes it very easy to customize the API without introducing new base types.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="92889562735436370000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`descriptor
  .Extend()
  .OnBeforeCreate(definition =>
  {
      definition.ContextData[&quot;Foo&quot;] = &quot;Bar&quot;;
  });`, `92889562735436370000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">descriptor
  <span class="token punctuation">.</span><span class="token function">Extend</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">OnBeforeCreate</span><span class="token punctuation">(</span>definition <span class="token operator">=></span>
  <span class="token punctuation">{</span>
      definition<span class="token punctuation">.</span>ContextData<span class="token punctuation">[</span><span class="token string">"Foo"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Bar"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>You can access the context data on a type object like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="77963122832537040000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`schema.GetType<ObjectType>(&quot;Query&quot;).ContextData.ContainsKey(&quot;Foo&quot;);`, `77963122832537040000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">schema<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ObjectType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"Query"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ContextData<span class="token punctuation">.</span><span class="token function">ContainsKey</span><span class="token punctuation">(</span><span class="token string">"Foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<blockquote>
<p>Read more about extending the type system <a href="2019-04-12-type-system.md">here</a>.</p>
</blockquote>
<h2 id="relay" style="position:relative;"><a href="#relay" aria-label="relay permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Relay</h2>
<p>We added a lot of APIs in the past to make it easy to create relay compliant schemas. With version 9 we will now make implementing the <code class="language-text">Relay Global Object Identification Specification</code> as simple as eating cake.</p>
<p>In order to enable general support for relay you can now opt-in like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="2913906293598467000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`SchemaBuilder.New()
    .EnableRelaySupport()
    ...
    .Create();`, `2913906293598467000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">EnableRelaySupport</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This will automatically add the node field to your query type and add the node resolver logic. You now just have to declare which type is a node type and you are done:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="66769712141481440000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class EntityType
    : ObjectType<Entity>
{
    protected override void Configure(
        IObjectTypeDescriptor<Entity> descriptor)
    {
        descriptor.AsNode()
            .IdField(t => t.Id)
            .NodeResolver((ctx, id) =>
                ctx.Service<Repository>().GetEntityAsync(id));
    }
}`, `66769712141481440000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EntityType</span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType<span class="token punctuation">&lt;</span>Entity<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span>
        <span class="token class-name">IObjectTypeDescriptor<span class="token punctuation">&lt;</span>Entity<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">AsNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">IdField</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Id<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">NodeResolver</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> id<span class="token punctuation">)</span> <span class="token operator">=></span>
                ctx<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Service</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Repository<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetEntityAsync</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<blockquote>
<p>Also see our new <a href="https://hotchocolate.io/docs/relay">documentation</a> about relay support.</p>
</blockquote>
<h2 id="performance" style="position:relative;"><a href="#performance" aria-label="performance permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Performance</h2>
<p>Starting with this version we have begun to invest into making <em>Hot Chocolate</em> one of the fastest GraphQL servers out there. Do not get me wrong, we are not quite there yet, and it will be an ongoing effort for quite a while.</p>
<p>With version 9 we are introducing the first step on this road with our new UTF-8 GraphQL parser. This new parser is not anymore, a port of the original graphql-js parser but a reimplementation that uses the raw bytes instead of strings, meaning we are using all those nice new <code class="language-text">Span&lt;T&gt;</code> APIs. This makes it use less memory and perform faster. The new UTF-8 GraphQL parser is the fastest and most standard compliant parser on the .Net platform.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://chillicream.com/static/f7cabb37d746a966fa055de8aff5062e/dd104/lexer_mem.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 105.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAACzklEQVQ4y6VVW08TQRjdJ6N/wCd98QXjvzDRB/RX+IO8JCaGRINGSBSMFqJy67b1QYHKC5RejJKWQCst0na7u+3eZuc432xnWwvFByY5mbNzOXPmm5lvNYwptmWh3W6j2Wyi3Wrh5OQEpmnCMAwYon1c0exuF+VKGZX9fYFKjN18HnmBnVwOOYHN7CY2NjfwbX0d2zvb+LW3h2KphHwhL+tKpQLbtqE1Gg2s6Tr0dArJVErWa3pS1no6LZH6kkFiYQFv5uYw925ejvv4+RMePn6E17MzSCwuyjmkpdGWlpaWsLK6iqRoXF5exvetLZTEqoVCIYbRMeB5nsTBwYF0VCwWpQi1WSJEvu9Da4n4pMSKmUwGaeGGkM1m5YRyuRzDcRwZozAMEQSBFKCaMSbbXdeNBGkAEVrFFSAeBj4453KyqhXATx8EjSFhqrXRTkfM2W0yVA8P8fvoCIfVKo7qdbGgL/vL3R9oHB/Lvmq1hnq9IcLRkWLylIkogNwIeEw4Y4HYn1hVgGplLeRe9D3cx8NYQxu1TsW0uzA9DltodrxQcou4O+CWH30TtwOOoB9LbSAGsDASnCl1cX0+xK0FYOIDx0SC42YiqodBbTfec9xZ5TCc4F9BKkFf8GmuB20qhPZSbGH6P3jOcW2eo9ULBjFU2/VZxKd2heB0iCuzHJdmxuOygPYqctoedqhEVXmy40B7Jhy+iByMBfVPcVx9e4ZDeviN4z/wrTYSP23cXglxXwcmk1zi3hCf1PttyRB31zgefOUw3RHBrkgSlF1M8QIcq0MXpO+XjXCmjpGiHnPGztkyidJdpJB6AROxHXAviDgdoOsHMadneOpQFKd3Kp8Z+RH3a5gzFsbjlcgwP/Niny/ILiYYJ4URrr7VPMXPFKTMqwZQWlKrq3yo3PZ6vViY+Ni3TLlPCVICJcdUWv1/i7oVtVot3i4lXUp9fwHeqQhkqvx+ZQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Lexer Memory"
        title="Lexer Memory"
        src="https://chillicream.com/static/f7cabb37d746a966fa055de8aff5062e/5a190/lexer_mem.png"
        srcset="https://chillicream.com/static/f7cabb37d746a966fa055de8aff5062e/772e8/lexer_mem.png 200w,
https://chillicream.com/static/f7cabb37d746a966fa055de8aff5062e/e17e5/lexer_mem.png 400w,
https://chillicream.com/static/f7cabb37d746a966fa055de8aff5062e/5a190/lexer_mem.png 800w,
https://chillicream.com/static/f7cabb37d746a966fa055de8aff5062e/dd104/lexer_mem.png 1064w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://chillicream.com/static/64c1183409d96db4f97ebf220b09d746/6937a/lexer_perf.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 107%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAADZklEQVQ4y5VUS29TRxT2ipafQUFCIIRUYNt/gEQoRZQCogWpy6qwRAKx6qLdsKC0tLzUhjxUQmloElWJE8dOBDYRTqT4JSUKDRDbid/29X3Mnfl6ztj3xqQGiZE/n3Pn8Z0zZ76ZALo0KSUsy/LhOA5s29ZWCKH9t7UATyqVSiiVy9pWKhW8fPUKyVQKmUwGi4kE0uk04vNxzM3NYX5+HolkEtlsFhsbG9oWikXU63UopRDgj8lQCFPTjGltJwmh8LT+DkXCCE5N4Y+hB+gfHMCDh0OIzM6gt+8+fvzpBvoG+vFoeBjRZ7EWYZky+3tkBGNjYxqjo6N4Gn2KhYUFxONxPCewz9kUCgVkc1mk25nHYjHk8jlsUH+xVGwR1qpVjI+PY2JiQttgMIhoNIrl5WWNpaUlrKys+DVypYu1tTU0m01dT26NRgPMo2vouq7eP6NGMBp12E1DH0AneJ6UCqCfR+Q1b44m3HpKTQkkiwLrtLV1Lnoupy0TmcrAam0ZxUKJtprXY/n1dTjtAHrL/OeB/uBQFnVbwrFMOCwVgnBaMlEQsNwGXJaP0+p3BWWm5Cahl5km5Bq5AoZpgmM61GW5HASgGDDJEbLVz982j5HP41ySroRNW+DoP03s+ws49Fjh42GJA2Q13vCVHt/7SOF4SMF2hN5DF0IXOwctBH6lAt+hCbffAR6/qbDr4RZCJpMdGe4fMhG4p/Dh7xLbNBQ+IGzbgu29RHCXdvG4g9DLzGsmFWnHgI3AL5ThbcItD+r/4Cx/VtgxtCVD1hXfmHK5hHKtjotPyjgeNnAq0sDJcA1fzgicnwW+ikicm1UE4NyMwvkZidMRhctx1ZZOm5BflyopvVKpotqo4Pq/3+Dq6hF8t3oCV14cxgs71s7f1ovabxJrwjsBnZSvw85muxYupHrwWWIPTiUP4tPF3YhVJ1vlYN1JrjdJxSWtChekHEIH4eahtMRpOSYuZT7H2fQhfJ35BGdSB/C8Hm4FE7avBt4Va89b/wZhp2wsYeLb1GEcS+zCF8n96Fn8CM9qwTah9f6EnMWfr2+hN/8D+vPX8Fvue7y0lvSYcIU/z7+uHa98V0KO5JqbE5Xpe7AtWy/UgemO8xPmrTUMozshL3AoSwm+t3yvDX+MnyiPkH3TNP217LP9DwAz72K1I+KDAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Lexer Performance"
        title="Lexer Performance"
        src="https://chillicream.com/static/64c1183409d96db4f97ebf220b09d746/5a190/lexer_perf.png"
        srcset="https://chillicream.com/static/64c1183409d96db4f97ebf220b09d746/772e8/lexer_perf.png 200w,
https://chillicream.com/static/64c1183409d96db4f97ebf220b09d746/e17e5/lexer_perf.png 400w,
https://chillicream.com/static/64c1183409d96db4f97ebf220b09d746/5a190/lexer_perf.png 800w,
https://chillicream.com/static/64c1183409d96db4f97ebf220b09d746/6937a/lexer_perf.png 1094w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://chillicream.com/static/b7dc8afffeb13b8da051f2c434fb604a/bb2fd/parser_mem.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 107%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAADaElEQVQ4y42Uz28bRRTHfQLEP4CQoEJCQhQJ9YIQF2499cCBhBZxASGhHioOlRDiDwAOSdpKVEiUVE0lClIIqXKooWnTOAEJteAmKUmd2HXSGtv1z7W9G9u73l8fZma9rh0nEk/+7uzOjD/z3sybFzEMg1K5TKVSoVwpo2ka6e1t1u7d434iwdraGusbG/wdjxPvKplMUq1WqQg9LhQoi/+bpom0yEbiPjcWFlhcWhKKcSu2KBQjthx8L//xO9dvzHPp8hTTMz8zM/sLE2fPcGFykis//cjYxDjXfo2Sy+cDoFx9bm6O6/PzXItGVRu/e1d5KL1bWV3ln/V1SqUSqQcpNjc3uX3nDlvJLeVdQUgy6o1GAJQTogK0ILycF7Cbol1ZWWF7O006nSaVSpHJZNTkvPCiqlXxPA/Hceh0OqpfLtZqtQKgjF3XdeRe6rpBc9fAarewLGtArudi2zae6xOaBEuTcNd1AyB7rCH6Mw0Lo67REAvVajV0Q1djNhYlM0+91qBerytJZ0JPfd8nIh+hxIOmAwXdQqvVqQmPtYZOY7cpPATTs9FMsZDR7I3tirEBYOiZAsowXEH0OwybHPc4yIZCVl4qosOX8TbHFuD4ks+7ix6jMZ9R8T4Svit5vHPL44Huq8U6tjMM9BTR4WjUIvKtGLwoQpjs6vs9rdR3Pn+WAqDVDwz3MASO3DSJXIJnr/g89cOwnhZ6Rihy2eevyh4Pw717Yh7HfmsTueARmXIFOJQ/qClfRXC7fICH7XabZtvEt5qcXIbnp+HwVXhlFl4WemHG58U+HRJ6btpnVWN4D2WCyuJQLBYxagZXczOMPfqabzLnGHv4FdOFWTQLHoucKpu+EBRbHgUhxwuAMrn3D1l8ju+cYiRxiI+2jjCaeInx7Mnubtjd9JGNG6gbYQ84cCgyz8Tv3M5nvL/5Op8k3+aDxBHOZk+ryR159dRccXQi7xz3AOCTPAyAZ3ZO817iVT7eeosTideY+PfT4Oo5du8CyER2/y/w/MMv+DD5BqdSR0XYb3I+9/kQUO57WBxk3743RWWhOK2ikaPi5Kl08uRbj6jb1QAoQ+6rMKFXsk+O7Q8Uk2zT6V5QcZq5Eo4VrJ7L5Wh0C6msgTIrpMmKk81mB4tDP1QF73s99Vek3pwDvv8DqaPvxPPxQh4AAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Parser Memory"
        title="Parser Memory"
        src="https://chillicream.com/static/b7dc8afffeb13b8da051f2c434fb604a/5a190/parser_mem.png"
        srcset="https://chillicream.com/static/b7dc8afffeb13b8da051f2c434fb604a/772e8/parser_mem.png 200w,
https://chillicream.com/static/b7dc8afffeb13b8da051f2c434fb604a/e17e5/parser_mem.png 400w,
https://chillicream.com/static/b7dc8afffeb13b8da051f2c434fb604a/5a190/parser_mem.png 800w,
https://chillicream.com/static/b7dc8afffeb13b8da051f2c434fb604a/bb2fd/parser_mem.png 1058w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://chillicream.com/static/c54a7fae6e81fa68fe27bb657dc13831/bb2fd/parser_perf.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 110.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAADwElEQVQ4y4VVS28bVRT2CrFgR6nEAnUBEhJ9IBYFWn4AeyREaas+3P4JaCV2wAb1BRWQVG1JlYd5FUKSRqg0aUOKEilpHNUzdqx23NqOnXjGM3bm/fg4544zuI1Rr/TNuXMe35x7zr13UugxbNuG67owTVNIz/MSne/7cBynVxiiKEKKjaqmQWt2QHNZliER7udyApIkYSmbxfz8PBYXF7GwsIByuYxWq4X62hoaqoqNjQ1BmqpUq/jz5k3cmp7CX1MEklO3p8X7renpDqbww7UBDA4P4Zfrv+L7/j58ffEbDI2M4My5sxjOZJBdXo4JV1dXMTo6iokbNzA+Po4/xsYwe3cW95aWRCYLnBHhoaKgsLJCmUuYm5sTePT4EZSSghytgDMWhLVaTRBNTk5iYmJCyL9nZ1EsFlFcKWKFSHgeBAEajQaq1YqY1+t1UR4euq4n8xQXmhWGYQjZMnRYbQMWNcHuwLIs0QzP9xB6kQhkUtZtzrlxgvDpTrG61I7QJmKDit5sNkXxOYjHmluGTjbWtTp2/mjSZX5sgh5wKK7UCrCuamg0DaxrTah6C24QIqSguktLNVrQSLeu6eRD5KYlbE9kKAhphJyJrZOCvhpYgE/bITApdZKOAbhWrGedsHXmpi6WvYXQ9Xyc+mcDR+5EODkT4PhtHydInpwJhUzf4fd4zjb2OUq+n9w1Rd23EvoBXss4SH1L6fdRTfrwDETC95VBG6btxIRMFnZluPc6fekK8PxAhOeeAfZh3z0/WTHhZmZJlynDXT+bSPWHSF32CUEPsC2KcYVwCXg9Y/2XYRiGcPjgU1EtUr4/Brw0DOz4kZYyQsg8iZdJ9+JwhG1DEbaTfGEQ2PdbFyF3h08MH0O+IAaUDM4o3+GCcgnnHvbhvNKPCyUCya8eXMTvtRmUqcFF3YNCe7ZETX6gWrCdXksOPHxa+AAfy6/iqLwLR+SdCY7ld+PD3A5crX0WO4cudyA+LY4trrWkKZvEnu/idP4wDklvIS3vxzH5XRwnsEzL7+FAbjcur34pfB3PRcCxNDetLsLubcOEp/IHcVDaQ0TvENHeBGki/ej+G0T4eWdHuEkcn/f/JTxdOITD+TeRzlN2+bcTnCjswwFpJ67WvxC+fuAnpWKy3oTUILmeRUEnNLOQ1XtCFvRl5LUlSOoiqq0SHOpou91OMuObyu51UvhKstr0z6CPB3YEtabBt+joB3xcbbQ1ExHZ+MqvVCpCcgzfh0y+hVA0SJQ5lkHo0zMU72EUUhMCPB3T3dh/AV6mDI/VOwxnAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Parser Performance"
        title="Parser Performance"
        src="https://chillicream.com/static/c54a7fae6e81fa68fe27bb657dc13831/5a190/parser_perf.png"
        srcset="https://chillicream.com/static/c54a7fae6e81fa68fe27bb657dc13831/772e8/parser_perf.png 200w,
https://chillicream.com/static/c54a7fae6e81fa68fe27bb657dc13831/e17e5/parser_perf.png 400w,
https://chillicream.com/static/c54a7fae6e81fa68fe27bb657dc13831/5a190/parser_perf.png 800w,
https://chillicream.com/static/c54a7fae6e81fa68fe27bb657dc13831/bb2fd/parser_perf.png 1058w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p><strong>What do these charts mean?</strong></p>
<p>The new <code class="language-text">Utf8GraphQLReader</code> is our new lexer implementation, it does not allocate any extra memory to do its work. All allocations are done on the stack which means that we produce less work for the garbage collector.</p>
<p>Also, we only need 1/4th of the time to lex a document compared to the <code class="language-text">GraphQL-DotNet</code> lexer.</p>
<p>What you can also see is that the <code class="language-text">GraphQL-DotNet</code> lexer is unable to lex the kitchen sink test query which is used by the reference implementation to verify that the parser and lexer implementation perform as specified.</p>
<p>Furthermore, the new UTF-8 GraphQL parser uses 1/3 of the memory that the <code class="language-text">GraphQL-DotNet</code> parser uses, meaning that we again produce less work for the GC which means that your server has more time to execute your business logic.</p>
<p><strong>Why does the parser still allocate some memory?</strong></p>
<p>The new parser still allocates some memory since we are producing a syntax tree here. The syntax tree is still the same syntax tree we produced with our old parser implementation in order to be compatible. This is where the allocation stems from. The parser itself is a <code class="language-text">ref struct</code> and lives on the stack. So, all the parser state is allocated also on the stack and is gone after the execution has finished.</p>
<p><strong>So, how do we compare to graphql-js?</strong></p>
<p>Since, graphql-js is the reference implementation all other implementations of GraphQL should compare themselves to it.</p>
<p>At the moment graphql-js parses round about 52000 kitchen sink queries a second on my MacBook Pro compared to our new parser that does 48000 kitchen sink queries a second.</p>
<p>So, with version 9.0.0 they are still a little faster.</p>
<p>With our new version 9.1 parser preview we are hitting about 54000 kitchen sink queries a second. While version 9 has become the fastest .Net GraphQL parser implementation version 9.1 will start to rival other platform implementations.</p>
<p>Apart from that we have started making our execution engine more efficient. We are just starting here and there will be a much larger investment with version 9.1 when we are introducing our new UTF-8 request parser and the new execution plans feature.</p>
<p>With our release today <em>Hot Chocolate</em> is depending on the use case at least to times faster in executing queries and uses half of the memory compared to GraphQL-DotNet. If you are using schema-first then the performance gains are more dramatic and you could look at up to 13 times faster execution performance compared to GraphQL-DotNet.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://chillicream.com/static/0fbdc6bb987029489a6d4b423f213bde/2e367/exec_mem.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 111.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAADXklEQVQ4y4VVXW/jRBT1f+IBiX+C+DMrJOCBB+ABFqmtBOV56Wa37UZV07Rp0gptW0VpyMemDTSfxHFix0n9NWMf7h3bSQMpjHR174xnztxzz8xYw4bmui5834fneSpOTQgBx3GUcfzPFkURNP4wmUxgkE2nU4x0HdVqFdXfq6jX66hUKrilfrlcxu3tLWr1Gq6urvCh1YJlWRgMh+h2u2otN40Hc/k82Ymyk9M8TgsF5AtnyJ/Fdl4q4YcfX2J7Z0d9++a7b/HT7i6yR0fYorGff9lF8aKUAM5mOD7J4TiXU/7o+Bgn+Rj0lEBPCfDsvIDXmQzevH1L4EX8ureHvcxrFGmji8tLFIrnqDfqMeDcnuPw8BD7+/vIZrPI0MISTWw2m2g0GsrXajVVwxltzvS4cZmGRFdKiXa7jfF4HANygW9ublRdrq/JyHOtOp0Oer2eMo5d11NC6VTjMAyxWCxgmhYJAVU/3kwB/kupDapHCBFG4bLPgHGTBCjX5mosdcjb0DLDA8oDG/qwj95gqHY1RgbGwQAPxj2G/b9UhqY5JXUNRE4b1riFbm+IwaCPIAhiwKemwEOhdueYs1l+ozjtPze+BijDmHD2DxefnSWkaCIXPqWa0uX5QqzopnO0TTflVcvGxwcGRR5NFJDCZzjlQxkQGtWOWIjAW8V0QZicxsiGYahjMBqP8Gi5eK8X8WnzE/z2eKk2CJYSMOxKPPEkljJmqTEFLv58Poc1M+E7IZqjAr6ufITG4CVgXiOYFBBZFxCTIuS0iNC8ICtBGOdxTGPCmz5P2evuAQca5DsNLnnvYOXTeK2/ryHQc6tjs7Sk4LbRgPfwPWRvB6K7DdHZQsgxedHdUuOyt42gk8Q0Jh77GwCT89i3BFL9wqR2/1XDWOXk+dpEeWCZpNojrSaVycsgjd3/V5nFGI1GsdEtsEwTD+afy0zCJ1mpDKV4cg7XY5UhHxu+Mvw6+z5lQasn+nsEdy8g21+R/wLB/ZeQ9y9I5RJkFBN+FnCdbJyL03kF5w0peKjBfxebmyEl7z5PCijWHolV/TeKAixmOuScHkznDnO9DGdSoR9NC47dhz1fqDmckUnlSdfxxWC22vpPJqYjRLh8xhwvgpdcFT+Q6h1M765t28sk+HLw2N9y0mvKS3YdlQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Execution Memory"
        title="Execution Memory"
        src="https://chillicream.com/static/0fbdc6bb987029489a6d4b423f213bde/5a190/exec_mem.png"
        srcset="https://chillicream.com/static/0fbdc6bb987029489a6d4b423f213bde/772e8/exec_mem.png 200w,
https://chillicream.com/static/0fbdc6bb987029489a6d4b423f213bde/e17e5/exec_mem.png 400w,
https://chillicream.com/static/0fbdc6bb987029489a6d4b423f213bde/5a190/exec_mem.png 800w,
https://chillicream.com/static/0fbdc6bb987029489a6d4b423f213bde/2e367/exec_mem.png 1066w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://chillicream.com/static/4b5b87ea53242bcab448e6b107947acd/97bfd/exec_perf.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 108.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAADnklEQVQ4y3VUS28bVRT2hkpI/BoWLFH5AywR6wohqFghQTcsWIHYsUBCVEJJmrQIdUEFOI/a1I82TQhiQesHiV9JGtuT8XhmPO+ZO+OPc+54XNspV/p0z70z9zvnfuecm8PKSJIEvu8jCAKJKzaB5zAMV49iOp0ilxFkBw3DQLvdRrfbxenp6dzudDpotVro9no4OTnB+fm5JHVdF47jyLM8cjoRPCqXUKqUJcrVCh7vP0GV8SSd9w+eYuveXfx8/z5928fa+jp+efAAD4sF3P3pHjY27+DpwcGMUNcliSQsp6R/lB5JJwy2y9Uq1jbWcWdzE5XHVfxw+zY2t7bkv7sP91Ckf57VnqeEk8kE+e1t7OzsoFAoIJ/P4/DwEM1mE/V6HY1GA7VaTUoxGo3Q7/elPD26+nA4hG3bUgL+Jgl5o0oRlCm6SoUiLZVwdHQkD2TodDvwA19qNRgM5EHDMKERSRRFcs+yrJSQMxPHMYSIEQtBqUoQU6J4f45kSvtpFpOFb3HCe+l+NnIy3bOFSpXwz8CGqgwwUFTpdXSpQUsGONM6UAaX0MYaTEOHohqA14KlnaA/UOX1Odpc5o1dcSAhu419Mjy4ng/P8+AFbLupTWANPY9r0oVP++5sX9ZhRpjImcMV+OovC1vHHhB5sEjjlCSQNcdI69aTmmb1a5pmGuGVckeCt3+Lcevv2TJe7ISYkGQrJLGYf2OnkpA9apoGwzSkPr7l4+vWN/jg+D18eXYDn3ffRzs4locEqzHN6NJ1lg/mmROOx2MZsq6P4VkhNnqf4ta/b+KL5nV81ngLLWOPrq8jck8Rey8wDfpI/AsI54wqIFomvHphwPnzXYjdHETxDYjC6wgL1xAUXlsB7e3lkDjNlNCxl7OcZToizdzWtxD1G4ganyCsf0TzTQhCVP9YQtqEsPYhRTucETrLhEmSimH5ES7sBZ1Wok8W1mKhhv/3ym6U4IUxISvENA4gQkfOXE6xCKmrQmmzdiLy510yJ+QMM1RVhaGbUHUFF56yFEU2uEW59bLHVFCrXiHMitUmUX2qJcul1hvuYjraRjzaQ6TkEWtFitKj3k37/lWETqbhq7LsHbyD6PccQsp0tEMoXgP87sIfL5/8bHDHsIPlLJPEgipX7/0Kq/U9rM6P0BrfwWyvwbVUmBNb1qq8EbUkS2XPWpMl4zm36o2fMC9MO46hmQJukHYEF7+iXEoduX+zx5bXMgf0CP8HLN9kwWPMlfgAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Execution Performance"
        title="Execution Performance"
        src="https://chillicream.com/static/4b5b87ea53242bcab448e6b107947acd/5a190/exec_perf.png"
        srcset="https://chillicream.com/static/4b5b87ea53242bcab448e6b107947acd/772e8/exec_perf.png 200w,
https://chillicream.com/static/4b5b87ea53242bcab448e6b107947acd/e17e5/exec_perf.png 400w,
https://chillicream.com/static/4b5b87ea53242bcab448e6b107947acd/5a190/exec_perf.png 800w,
https://chillicream.com/static/4b5b87ea53242bcab448e6b107947acd/97bfd/exec_perf.png 1078w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p><strong>What will the new UTF-8 request parser help?</strong></p>
<p>The UTF-8 request parser will be an integrated JSON and GraphQL parser that does not any longer parse first the JSON and then extract a string that is then being parsed by the GraphQL parser. The parser will be able to parse a GraphQL JSON request in one go.</p>
<p>Also, we will create a server benchmarking suite based on <em>GraphQL Bench</em> so that it is more transparent what we test and how we test.</p>
<p>We did our performance comparison against GraphQL-DotNet version 2.4 and 3.0.0-preview-1107.</p>
<h2 id="documentation" style="position:relative;"><a href="#documentation" aria-label="documentation permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a> Documentation</h2>
<p>As we promised in the past, we are adding more documentation with every release. With version 9 we are adding documentation for our type system and a completely new tutorial that starts from scratch and shows how to build a GraphQL server with mongo as a database. We know that the more effort we are putting into our documentation the easier we make the life for you.</p>
<p>With this release we have published a first draft of the new documentation and will add missing parts during this week.</p>
<h2 id="banana-cakepop" style="position:relative;"><a href="#banana-cakepop" aria-label="banana cakepop permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Banana Cakepop</h2>
<p>When we released <em>Hot Chocolate</em> version 8 we announced a new <em>Hot Chocolate Developer Tool</em>. Since that announcement we were heavily at work building that new tool.</p>
<p>Today we are anouncing <em>Banana Cake Pop</em>, a new tool that will help you explore and query GraphQL schemas.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="https://chillicream.com/static/12ed3d237223a3b0e5fd5a466c1722ee/01744/banana.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 60.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACa0lEQVQoz3WTy2oUQRSG+5FEFCELce8riIoIopuAOzdZuImJMXdMjElMFgZEEPUtXIiCkug4yWR6pmf63nPp+2U+T/ckGgkWHKq7qvo7/zl/tTL5bI+ptXc8Xn/Po+W3TK1/ZHn3A0ubeyxsvGbu+Q7TixtML7xgdmWThfVdnq5uMb+2w8zqNjMrWyzKucWXe6xsv0GZuL/Gp89f+L5/wLeDX1Xopo3leGgdHdMw8foD3H4fu+fRlXfLdnEcl6bhYlgOtuthyvmOYQnwziyNroVuGPTlgzDwybOMYRgTCiSViNIYPw0YJD5dSydJMxLXrfaGUU6cFZwO5fLNGb7WW+zX6rRaLSzLIggj0jQl7rkUec7ZUSpLZC3zfXpqC8fzCeKM0WhEUYxQLtx4wo+jFmq7jaZpGKI0CENRkRLoHWLPrQ6XASMp1yZMkjGwViO0nX8SKhdvzXGstnEdG8M0K2B/6BMlotB1RKXHqPhbUgkcBCGFtCWWsgM/lLLLFqUypyiXbs/TUDVsKbWElTGQ7EmWk4uSU9hYIWKAQKJIyisoZN8PYsxejO5FmF6IcuXu0hhonwUGpNm/vTsFlob4USxASSjgQID2IMYdxjgyKxP3Vs8p9ANxNEqIxJw8Csmln6MTcJKdB1r9MbQM5eqD9ROgWV0dw9DpDYcCDUnDoHK5irJ0UVma5ZeJ8oysAkYVyBlEVSjXJl/R1Axc6Y0ljpmWTSyG/G/kIvXPvZPyIzHE8XPcIEceUa4/3OCn2K+pR6jHh6iNQ4xum067SaNeo9moV+vlbHTa8ud00GXfltk2ujjmOHRNxdLb/AY7HW99we+/9QAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Banana Cake Pop"
        title="Banana Cake Pop"
        src="https://chillicream.com/static/12ed3d237223a3b0e5fd5a466c1722ee/5a190/banana.png"
        srcset="https://chillicream.com/static/12ed3d237223a3b0e5fd5a466c1722ee/772e8/banana.png 200w,
https://chillicream.com/static/12ed3d237223a3b0e5fd5a466c1722ee/e17e5/banana.png 400w,
https://chillicream.com/static/12ed3d237223a3b0e5fd5a466c1722ee/5a190/banana.png 800w,
https://chillicream.com/static/12ed3d237223a3b0e5fd5a466c1722ee/c1b63/banana.png 1200w,
https://chillicream.com/static/12ed3d237223a3b0e5fd5a466c1722ee/29007/banana.png 1600w,
https://chillicream.com/static/12ed3d237223a3b0e5fd5a466c1722ee/01744/banana.png 2830w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p><em>Banana Cake Pop</em> is <strong>NOT</strong> built on top of GraphiQL like all the other tools but built from the ground up with <strong>Monaco</strong> at its heart.</p>
<p>We plan to invest a lot more effort into <em>Banana Cake Pop</em> going forward. Our plan is to build this ultimate GraphQL developer tool that provides advanced schema browsing, querying GraphQL endpoints, creating runbooks and many more things.</p>
<p>We will provide a plugin model so that you can add your own extensions.</p>
<p>Moreover, as we are introducing our new schema registry with version 10 you will be able to configure your GraphQL gateway via drag&#x26;drop, see how each GraphQL server in your network performs, how long each resolver takes and how much memory a resolver uses.</p>
<p>We will start very soon with a private preview and as the version matures, we will release a public preview probably together with version 9.1. If you want to participate in our private preview head over to our <a href="https://join.slack.com/t/hotchocolategraphql/shared_invite/enQtNTA4NjA0ODYwOTQ0LTViMzA2MTM4OWYwYjIxYzViYmM0YmZhYjdiNzBjOTg2ZmU1YmMwNDZiYjUyZWZlMzNiMTk1OWUxNWZhMzQwY2Q">slack channel</a> and send a message to <code class="language-text">@rafael</code>.</p>
<h2 id="roadmap" style="position:relative;"><a href="#roadmap" aria-label="roadmap permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Roadmap</h2>
<p>With every release we are giving a little roadmap what we are working on and what is coming next.</p>
<p>As you might have noticed we have not delivered all the announced version 9 features yet. The reason for that is that we have decided to split version 9 into three releases. Version 9.0.0 focused mainly on the GraphQL core and brings all the new schema goodness with it.</p>
<h3 id="version-91" style="position:relative;"><a href="#version-91" aria-label="version 91 permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Version 9.1</h3>
<p>With version 9.1 we will now focus mainly on the server implementation, server performance and the new GraphQL filters.</p>
<h4 id="graphql-filters" style="position:relative;"><a href="#graphql-filters" aria-label="graphql filters permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>GraphQL Filters</h4>
<p>GraphQL filters or as we called them before Prisma filters will allow you to configure filter objects that are executed on <code class="language-text">IQueryable</code> with just a view lines of code. This will make it very easy to expose databases through GraphQL.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="543292472094369900"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class PersonFilterType
    : FilterType<Person>
{
    protected override void Configure(IFilterDescriptor<Person> descriptor)
    {
        descriptor.Filter(t => t.Name).AllowGreaterThan() ...
    }
}`, `543292472094369900`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonFilterType</span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">FilterType<span class="token punctuation">&lt;</span>Person<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IFilterDescriptor<span class="token punctuation">&lt;</span>Person<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Filter</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AllowGreaterThan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>As with all our types we will have an approach to infer possible filters and apply them to your API. You can declare that you want to define all filters explicitly or decide to override/limit specific filters. I myself are really keen on this one since it will safe you so much code. You will be able to pipeline filters with sorting and paging which makes this super powerful.</p>
<blockquote>
<p>Follow our work on filters <a href="https://github.com/ChilliCream/hotchocolate/pull/711">here</a>.</p>
</blockquote>
<h4 id="subscriptions" style="position:relative;"><a href="#subscriptions" aria-label="subscriptions permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Subscriptions</h4>
<p>We are supporting subscriptions for a long time now, but we were never really happy with the implementation.</p>
<p>The implementation was rushed and is not as we would have liked to implement it. With version 9.1 we are now swapping the implementation out with one built on top of the pipeline API of .Net Core.</p>
<p>This will create a very nice and clean API that will perform better with less memory usage. We pushed back subscription stitching in order to first get the backend sorted out and use a lot of the new code to build the subscription client we need for the stitching layer.</p>
<blockquote>
<p>Follow our work on subscriptions <a href="https://github.com/ChilliCream/hotchocolate/pull/807">here</a>.</p>
</blockquote>
<h4 id="execution-plans" style="position:relative;"><a href="#execution-plans" aria-label="execution plans permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Execution Plans</h4>
<p>The execution plan feature is our biggest endeavor in version 9.1 and will fundamentally change how we execute queries. As of now we are executing resolvers level by level.</p>
<p>With execution plans we will pre-analyze the query and create a plan that defines which part of the query should be executed in parallel, which parts of the query could be inlined and so on.</p>
<p>Think about <code class="language-text">@defer</code>.</p>
<p>With <code class="language-text">@defer</code> you will be able to defer the execution of parts of your query. In order to understand this let’s look at an example query:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="43105194243800150000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  blogpost {
    title
    text
    comments {
      user
      message
    }
  }
}`, `43105194243800150000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  blogpost <span class="token punctuation">{</span>
    title
    text
    comments <span class="token punctuation">{</span>
      user
      message
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The above query for instance represents a query to fetch a blog post with its comments. The query engine will return this query only after the blog and the comments are resolved. This means that the blog might have long loading times if it has many comments.</p>
<p>What if we could send this query like it is and get the blog data immediately and the comments once they have been resolved? This would let us specify a query once and profit from <strong>DataLoader</strong> usage and at the same time give us the most important data quickly.</p>
<p>This is what <code class="language-text">@defer</code> is basically for. <code class="language-text">@defer</code> lets me tell the query engine that some data can be delivered later so that the query engine can prioritize on the other parts of the query.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="91108948271807100000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  blogpost {
    title
    text
    comments @defer {
      user
      message
    }
  }
}`, `91108948271807100000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  blogpost <span class="token punctuation">{</span>
    title
    text
    comments <span class="token directive function">@defer</span> <span class="token punctuation">{</span>
      user
      message
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The execution engine can now branch this comment off and resolve it independently from the original query.</p>
<p>Also, execution plans will help make our stitching layer more powerful by being able to map out a plan what to get first and how to fold in data.</p>
<p>Execution plans can be created ahead of time and can be persisted so that consecutive calls will profit.</p>
<p>We will have a lot more to say about execution plans as we progress with this feature.</p>
<h4 id="batching" style="position:relative;"><a href="#batching" aria-label="batching permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Batching</h4>
<p>We are working to introduce batching and <code class="language-text">@export</code> support. Batching lets me send a couple of queries at once to the server. The queries can produce variables and consecutive queries can use those. This is super powerful when you have mutations where you need the output of one mutation to execute another mutation.</p>
<p>With batching you can do that without having to manage that flow on the client-side.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="63013257375200210000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`[
  {
    query: \`
      mutation (\$input: TokenizeCreditCardInput!) {
        tokenizeCreditCard(input: \$input) {
          paymentMethod {
            id @export(as: &quot;id&quot;)
          }
        }
      }
    \`,
    variables: { input: &quot;...&quot; },
  },
  {
    query: \`
      mutation (\$id: ID, \$transaction: TransactionInput!) {
        chargePaymentMethod(input: { id: \$id, transaction: \$transaction }) {
          transaction {
            id
            status
          }
        }
      }
    \`,
    variables: { transaction: &quot;...&quot; },
  },
];`, `63013257375200210000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    query<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      mutation ($input: TokenizeCreditCardInput!) {
        tokenizeCreditCard(input: $input) {
          paymentMethod {
            id @export(as: "id")
          }
        }
      }
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    variables<span class="token operator">:</span> <span class="token punctuation">{</span> input<span class="token operator">:</span> <span class="token string">"..."</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    query<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      mutation ($id: ID, $transaction: TransactionInput!) {
        chargePaymentMethod(input: { id: $id, transaction: $transaction }) {
          transaction {
            id
            status
          }
        }
      }
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    variables<span class="token operator">:</span> <span class="token punctuation">{</span> transaction<span class="token operator">:</span> <span class="token string">"..."</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></div>
<h4 id="apq-and-pq" style="position:relative;"><a href="#apq-and-pq" aria-label="apq and pq permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>APQ and PQ</h4>
<p>Another feature that is aimed at performance and bandwidth usage is automatic persisted queries and persisted queries.</p>
<p>Persisted queries are queries that you have stored with the hot chocolate service before deploying your application. With relay for instance you could export all your used APIs and export those to <em>Hot Chocolate</em>. The <em>Hot Chocolate</em> server could then validate and compile those once.</p>
<p>The frontend on the other hand has no longer to send the query to the server that it wants to execute but could just send a hash of that query.</p>
<p>Each execution then would fetch the prepared and optimized query from the cache or if not already on the cache from the query storage.</p>
<p>This saves time and bandwidth.</p>
<p>While persisted queries require you to setup some build scripts that extract the queries from your frontend and store them with the <em>Hot Chocolate</em> server, automatic persisted queries is a flow that you could use to add queries to the storage from the deployed frontend at runtime.</p>
<p>The automatic persisted queries work like the following:</p>
<p>The frontend will always assume that the query is already persisted with the server. So, by default we will just send in the hash instead of the query itself. This means that we basically do the same thing like with persisted queries.</p>
<p>If the server returns an error that it has no query stored with the specified has the client will send the request again, but this time with the hash and the full query.</p>
<p>So, while this will cause a slower execution for the first user of a query all consequtive users will profit.</p>
<p>We will have an abstraction for the query storage and a default implementation that will use redis.</p>
<h4 id="performance-1" style="position:relative;"><a href="#performance-1" aria-label="performance 1 permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Performance</h4>
<p>The performance focus for 9.1 will be to make the server implementation faster and use less memory.</p>
<p>Moreover, we want to optimize startup performance and will introduce lazy resolver compilation. This will compile resolvers on first use. You will be able to choose if you want resolvers to be compiled at startup or at first usage.</p>
<p>We also will add support for custom resolver compiles. This will allow you to write nice extensions and simplifications on top of the schema builder.</p>
<p>The main focus for performance will be our visitor implementation which is not really optimized at the moment.</p>
<h4 id="spec-features" style="position:relative;"><a href="#spec-features" aria-label="spec features permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Spec Features</h4>
<p>Specwise we will start implementing a new draft feature allowing interfaces to implement other interfaces.</p>
<p><a href="https://github.com/graphql/graphql-spec/pull/373">https://github.com/graphql/graphql-spec/pull/373</a></p>
<p>I just looked again, it is not yet draft, but we hope that this will be sorted out at the next GraphQL workgroup meeting.</p>
<h3 id="version-92" style="position:relative;"><a href="#version-92" aria-label="version 92 permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Version 9.2</h3>
<p>Version 9.2 will mainly focus on the stitching layer and will integrate the new execution plan feature. Also, we will finally do it and integrate subscription stitching.</p>
<p>On the experimental side, we will deliver our new GraphQL C# client. We have already started on this one but want to have a first release ready with version 9.2. We also want to have it compatible with Blazor and show case this with the that release.</p>
<h3 id="version-10" style="position:relative;"><a href="#version-10" aria-label="version 10 permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Version 10</h3>
<p>Version 10 will be a huge release. It will take about three to four months to complete and we might decide to split it like version 9.</p>
<p>Version 10 will finally introduce our long-promised schema registry and allow to stitch together schemas without needing to code. Also, we will not need your microservices to have any knowledge about the registry or that they are rewritten into a larger schema.</p>
<p>With version 10 we will also release a production ready version of our C# client.</p>
<p>Last but not least as another new addition we will support automatic database mapping. This means that you can come with your database and we will make a GraphQL server from it.</p>
<p>We will support two things with that, building a database with GraphQL just like Prisma does. Moreover, we will support generating a GraphQL schema from your database. So, this will be pretty interesting stuff.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GraphQL - Hot Chocolate 9.0.0 - Performance Improvements]]></title>
            <link>https://chillicream.com/blog/2019/05/08/performance</link>
            <guid>/blog/2019/05/08/performance</guid>
            <pubDate>Wed, 08 May 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Today we release preview 27 of version 9 and we are heading toward RC status which we are planning to hit next week. This post will describe…]]></description>
            <content:encoded><![CDATA[<p>Today we release preview 27 of version 9 and we are heading toward RC status which we are planning to hit next week.</p>
<p>This post will describe what we have done since preview 9 and where we are heading.</p>
<p>One of the main focuses on the second part of this release was performance. Performance will stay one big focus point for us going forward. This means that every new release should be faster then the previous.</p>
<p>Lets have a look at what we did with version 9 and what we are planing to do in this area in the next releases.</p>
<h2 id="parser" style="position:relative;"><a href="#parser" aria-label="parser permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Parser</h2>
<p>The version 8 parser that we have built and maintained since version 1 was a very close port of the nodejs parser of <code class="language-text">graphql-js</code>. <code class="language-text">graphql-js</code> is the reference implementation of <em>GraphQL</em> and also is basically the core of <em>Apollo</em> and <em>relayjs</em>.</p>
<p>The problem that we had with the approach of the parser was that it parsed a string. Basically, the parser tokenized the string which meant that there was a lot of substrings creating new strings and so on.</p>
<p>Each time we use the V8 parser to parse a <em>GraphQL</em> request we basically created a lot of objects. Instead of just producing our parsed <em>GraphQL</em> document we have created a lot of garbage for the runtime to clean up.</p>
<p>With version 9 we wrote the parser from scratch to be allocation free. This means that we only use memory to create our GraphQL document tree but not for the actual parsing.</p>
<p>In order to do that we are no longer parsing using a string but a <code class="language-text">ReadOnlySpan&lt;byte&gt;</code>. With spans on byte we can basically read the query from a binary stream and produce the GraphQL document without producing string objects. Also, the span allows us to slice the incoming data and create new windows on the underlying memory. So, each time we slice the data, we no longer create new string objects that the GC has to get rid of. All of the GraphQL keywords in a GraphQL document that is being parsed are never transformed to a string representation, but will only be represented to the parser as one byte on which the parser makes a decision on what the parsed token means. Also, comments and descriptions will only become strings if they are consumed saving us from unescaping those and more. On a production GraphQL server we do not have the need to consume comment tokens for instance, so we can just skip over them.</p>
<p>Furthermore, unescaping strings is now much more efficient since we create the string representation just once, all the escape logic is done on the span. We still have to get a second array on which we insert the escaped data but this second byte array can be rented if to large or in the best of cases be allocated on the stack with stackaloc.</p>
<p>But again the parser will only escape a string sequence and create an actual string object if needed.</p>
<p>Moreover, our new parser is now a <code class="language-text">ref struct</code> meaning that all the memory we allocate for the parser state is allocated on the stack.</p>
<p>We still will keep our old parser around and will update both parsers going forward.</p>
<p>But we did not stop here. Actually, the GraphQL HTTP request is really bad to be processed efficiently. So, with version 9 we are actually still parsing from a string with our new parser.</p>
<p><strong>GraphQL Request Example</strong>:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="36396647489479107000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  &quot;query&quot;: &quot;...&quot;,
  &quot;operationName&quot;: &quot;...&quot;,
  &quot;variables&quot;: { &quot;myVariable&quot;: &quot;someValue&quot;, ... }
}`, `36396647489479107000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token string">"..."</span><span class="token punctuation">,</span>
  <span class="token property">"operationName"</span><span class="token operator">:</span> <span class="token string">"..."</span><span class="token punctuation">,</span>
  <span class="token property">"variables"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"myVariable"</span><span class="token operator">:</span> <span class="token string">"someValue"</span><span class="token punctuation">,</span> ... <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The issue here is that we first have to parse the server request which is JSON and then can use the GraphQL query stored as string in the JSON structure to parse the actual GraphQL query document.</p>
<p>This means that with version 9 we are around 2 to 3 times faster than any .Net parser implementation.</p>
<p>But as I said we are <strong>NOT</strong> stopping here, we are working on a new specialized request parser that will integrate the JSON parser with the GraphQL parser. That means that we are able to read the GraphQL request directly from the network stream and parse it without any manifestation to a string object.</p>
<p>Version 9 will bring the new <code class="language-text">Utf8GraphQLParser</code> and we will follow that up with the <code class="language-text">Utf8GraphQLRequestParser</code> in version 9.1.</p>
<p>In our experiments we see that this new request parser is about 10 times faster then the GraphQL-DotNet parser combined with Json.Net.</p>
<p>Also, as a side note the version 9 parser now supports all the GraphQL draft features and represents the most GraphQL spec compliant implementation on the .Net platform.</p>
<h2 id="resolver-compiler" style="position:relative;"><a href="#resolver-compiler" aria-label="resolver compiler permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Resolver Compiler</h2>
<p>With version 9 we have removed the Roslyn compiler and are now using the expression compiler to compile our resolvers. This change was done since Roslyn caused the server to consume a lot of memory. Most of the memory was consumed by native metadata references and we were not able to solve that memory consumption issue. At Microsoft Build I talked to David Fowler about that and he knew about the issue and recommended that we move to expressions. The downside here is that the resolvers produced by the expression compiler are actually a little bit slower than resolvers compiled with roslyn. This has many reasons I do not want to go in here.</p>
<p>With version 9.1 we will further optimize the resolver compilation by allowing lazy compilation, this will improve startup performance and memory usage.</p>
<h2 id="execution-engine" style="position:relative;"><a href="#execution-engine" aria-label="execution engine permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Execution Engine</h2>
<p>We have updated our execution engine to use less memory and execute faster. The new execution engine is at least 2.3 times faster and uses half of the memory GraphQL-DotNet does to execute a query. If you are using schema first we are actually seeing 8.9 times faster executon of queries with <em>Hot Chocolate</em> compared to GraphQL-DotNet.</p>
<p>GraphQL-DotNet is still faster when validating queries, but this is offset since we are caching validation results. Validation will be one of the things we will work on for version 9.1. So, expect improvements here.</p>
<p>Also, we are putting a lot of work in our new execution plan feature. With execution plans we are seeing 3 times faster query executions compared to the current <em>Hot Chocolate</em> version 9 preview bits.</p>
<p>The execution plan feature allows us to pre-analyze the query graph and in many cases optimize the execution of resolvers significantly. We will talk about this in more detail after we have shipped version 9.</p>
<h2 id="serialization" style="position:relative;"><a href="#serialization" aria-label="serialization permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Serialization</h2>
<p>The serialization of query results is one of the areas we want to improve. Microsoft did a lot of work in this area and we are waiting here for the new UTF8 APIs that will ship with .Net Core 3. We are completely removing Json.Net over the next releases in order to improve performance further.</p>
<h2 id="summary" style="position:relative;"><a href="#summary" aria-label="summary permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Summary</h2>
<p>We are investing heavily in performance and stability and see perfomance as feature. One other area we are working on is the subscription implementation. We will replace the current implementation with one built on top of the Microsoft pipeline API, this is why we are moving again subscription stitching to the next version.</p>
<p>Stitching is also one area we will start to improve performance-wise once we have the execution plan feature implemented.</p>
<p>The bottom line here is that if you go with <em>Hot Chocolate</em> you will get the most spec compliant and most performant GraphQL server on the .Net platform.</p>
<p>Each time a GraphQL spec element hits draft status we will go ahead and implement it with <em>Hot Chocolate</em>, this means that with <em>Hot Chocolate</em> you will always get the latest GraphQL features.</p>
<p>Also, we are working to have all the benchmarkings ready with GraphQL-Bench. This will make it more transparant what we are testing and will let us more easily assess where we are heading performance wise.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GraphQL - Hot Chocolate 9.0.0 - Type System]]></title>
            <link>https://chillicream.com/blog/2019/04/12/type-system</link>
            <guid>/blog/2019/04/12/type-system</guid>
            <pubDate>Fri, 12 Apr 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Originally, I wanted to write a little post about what we are currently working on in version 9 and how those things are coming along, but…]]></description>
            <content:encoded><![CDATA[<p>Originally, I wanted to write a little post about what we are currently working on in version 9 and how those things are coming along, but every time I started writing on this post it got longer and longer and it felt a bit too messy.</p>
<p>Starting with this post we will start talking about version 9 in more detail. We will split this into several blog posts that will cover different parts of the new version. This post will focus on the type system improvements.</p>
<p>We started with version 9.0.0-preview.9 to deliver more and more parts of the new type system. With version 9.0.0-preview.11 we are delivering a ton of bug fixes and many more new features.</p>
<h2 id="schema-builder" style="position:relative;"><a href="#schema-builder" aria-label="schema builder permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Schema Builder</h2>
<p>The most prominent API that we are introducing is the new <code class="language-text">SchemaBuilder</code>. The <code class="language-text">SchemaBuilder</code> provides us with a new way to define schemas. Do not worry the current <code class="language-text">ISchemaConfiguration</code> API is still supported and will not go away. In fact, <code class="language-text">ISchemaConfiguration</code> now is just an interface over <code class="language-text">SchemaBuilder</code> and we will evolve both APIs over time so that you can pick the one that you like more.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="72814384387205240000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`ISchema schema = SchemaBuilder.New()
    .AddQueryType<FooType>()
    .Create();`, `72814384387205240000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name">ISchema</span> schema <span class="token operator">=</span> SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>FooType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><strong>So, why did we introduce a new API to define a schema?</strong></p>
<p>First, we wanted the builder API to be decoupled from the actual schema, we wanted to be able to start adding schema types and other parts to a schema builder without being forced to create the schema.</p>
<p>With the schema builder we are now more flexible in scenarios like schema stitching.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="20596073006696636000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`ISchema schema = SchemaBuilder.New()
    .AddQueryType<FooType>()
    .AddDirectiveType<BarType>()
    .AddSchemaFromFile(&quot;./Schema.graphql&quot;)
    .AddContextData(&quot;foo&quot;, &quot;bar&quot;)
    .ModifyOptions(options => {  })
    .AddServices(services_a)
    .AddServices(services_b)
    .Create();`, `20596073006696636000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name">ISchema</span> schema <span class="token operator">=</span> SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>FooType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDirectiveType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>BarType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddSchemaFromFile</span><span class="token punctuation">(</span><span class="token string">"./Schema.graphql"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddContextData</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ModifyOptions</span><span class="token punctuation">(</span>options <span class="token operator">=></span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddServices</span><span class="token punctuation">(</span>services_a<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddServices</span><span class="token punctuation">(</span>services_b<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2 id="conventions" style="position:relative;"><a href="#conventions" aria-label="conventions permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Conventions</h2>
<p>With our new schema builder, we did a lot of work underneath and introduced the ability to use services during type construction.</p>
<p><strong>For what is that useful?</strong></p>
<p>For one you can now register our new <code class="language-text">INamingConverions</code> with the dependency injection and then the new <code class="language-text">SchemaBuilder</code> will use your naming conventions instead of the built-in naming conventions.</p>
<p>Also, you can register our new <code class="language-text">ITypeInspector</code> and override how we infer schema types from POCOs. This will allow you for instance to add support for custom attributes, so no need to pollute your API with our attributes anymore.</p>
<p>But fear not, you do not have to implement the whole <code class="language-text">INamingConverions</code> interface for instance since you can override each part of our default implementation.</p>
<p>Since, in many cases we just want to tune existing naming conventions we can inherit from the default implementation <code class="language-text">DefaultNamingConventions</code> and overwrite just what we want to change.</p>
<p>So, if we wanted to add to all the input type names the prefix <code class="language-text">super</code> we could do this like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="78141585310536320000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class MyNamingConventions
{
    public override NameString GetTypeName(Type type, TypeKind kind)
    {
        if (type == null)
        {
            throw new ArgumentNullException(nameof(type));
        }

        if (kind == TypeKind.InputObject)
        {
            if (!name.EndsWith(&quot;Super&quot;, StringComparison.Ordinal))
            {
                name = name + &quot;Super&quot;;
            }
        }

        return base.GetTypeName(type, kind);
    }
}`, `78141585310536320000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyNamingConventions</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name">NameString</span> <span class="token function">GetTypeName</span><span class="token punctuation">(</span><span class="token class-name">Type</span> type<span class="token punctuation">,</span> <span class="token class-name">TypeKind</span> kind<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentNullException</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>kind <span class="token operator">==</span> TypeKind<span class="token punctuation">.</span>InputObject<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>name<span class="token punctuation">.</span><span class="token function">EndsWith</span><span class="token punctuation">(</span><span class="token string">"Super"</span><span class="token punctuation">,</span> StringComparison<span class="token punctuation">.</span>Ordinal<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                name <span class="token operator">=</span> name <span class="token operator">+</span> <span class="token string">"Super"</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">GetTypeName</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> kind<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Like with the naming conventions we provide a default implementation to <code class="language-text">ITypeInspector</code> where we can replace or extend parts that we want to modify.</p>
<p>In order to register our conventions with the schema builder we can do the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="67671958429498515000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void ConfigureServices(IServiceCollection services)
{
    services.AddSingleton<INamingConverions, MyNamingConventions>();
    services.AddGraphQL(sp => Schema.Create(c =>
    {
        c.RegisterServiceProvider(sp);
        c.RegisterQuerType<Foo>();
    }));

}`, `67671958429498515000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>INamingConverions<span class="token punctuation">,</span> MyNamingConventions<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>sp <span class="token operator">=></span> Schema<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        c<span class="token punctuation">.</span><span class="token function">RegisterServiceProvider</span><span class="token punctuation">(</span>sp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterQuerType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span></code></pre></div>
<p>Or we could do it like the following with the new schema builder:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="58286666125273330000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void ConfigureServices(IServiceCollection services)
{
    services.AddSingleton<INamingConverions, MyNamingConventions>();
    services.AddGraphQL(sp => SchemaBuilder.New()
        .AddQueryType<Foo>()
        .AddServices(sp));
}`, `58286666125273330000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>INamingConverions<span class="token punctuation">,</span> MyNamingConventions<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>sp <span class="token operator">=></span> SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">AddServices</span><span class="token punctuation">(</span>sp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="extending-types" style="position:relative;"><a href="#extending-types" aria-label="extending types permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Extending Types</h2>
<p>One other major reason to rethink our type system was that many of you wanted to extend on types. One common thing that people wanted to do is to introduce generic types. We did something like this with our relay types. GraphQL does not really have generic types but the idea here is that you could have a type like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="30499213472679920000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class EdgeType<TSchemaType>
    : ObjectType<IEdge>
    where TSchemaType : IOutputType
{
}`, `30499213472679920000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EdgeType<span class="token punctuation">&lt;</span>TSchemaType<span class="token punctuation">></span></span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType<span class="token punctuation">&lt;</span>IEdge<span class="token punctuation">></span></span></span>
    <span class="token keyword">where</span> <span class="token class-name">TSchemaType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IOutputType</span></span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span></code></pre></div>
<p>If we for instance put in the <code class="language-text">StringType</code> as TSchemaType then the edge type would become <code class="language-text">StringEdge</code> in the schema. While this is not so difficult if our <code class="language-text">StringType</code> has a fixed name, it becomes more difficult if <code class="language-text">StringType</code> would create its name also depending on another type.</p>
<p>With version 9 we redesigned the schema initialization process so, that you can register dependencies for a type with the <code class="language-text">SchemaBuilder</code>. This way the <code class="language-text">SchemaBuilder</code> knows which type has to be initialized in which order.</p>
<p>So, let us have a look at how we would create our edge type with version 9:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="18452453059191054000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class EdgeType<TSchemaType>
    : ObjectType<IEdge>
    where T : IOutputType
{
    protected override void Configure(
        IObjectTypeDescriptor<IEdge> descriptor)
    {
        descriptor.Name(dependency => dependency.Name + &quot;Edge&quot;)
            .DependsOn<TSchemaType>();
    }
}`, `18452453059191054000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EdgeType<span class="token punctuation">&lt;</span>TSchemaType<span class="token punctuation">></span></span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType<span class="token punctuation">&lt;</span>IEdge<span class="token punctuation">></span></span></span>
    <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IOutputType</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span>
        <span class="token class-name">IObjectTypeDescriptor<span class="token punctuation">&lt;</span>IEdge<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span>dependency <span class="token operator">=></span> dependency<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">"Edge"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DependsOn</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TSchemaType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>With the new <code class="language-text">Name</code> extension on the type descriptors we are now able to define a delegate that represents the naming algorithm for that type. Moreover, we can now express on which type this algorithm depends.</p>
<p>This new <code class="language-text">Name</code> descriptor extension is built upon our new descriptor extension API that provides a new way to extend our descriptors without needing to create a new base class.</p>
<h3 id="extending-descriptors" style="position:relative;"><a href="#extending-descriptors" aria-label="extending descriptors permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Extending Descriptors</h3>
<p>Each descriptor now provides a new method called <code class="language-text">Extend</code>. <code class="language-text">Extend</code> returns an extension descriptor that allows us to integrate some logic with the type initialization pipeline.</p>
<p>Types are created in three phases:</p>
<ul>
<li>Create Instance
The initializer creates the type instance and the type definition.
The type definition contains all information to create and initialize a type.
After this step the type instance exists and is associated with a native .net type.
The native .net type can be object but can also be something more specific.
In this phase the type will also report all of its dependencies to the schema builder.</li>
<li>Complete Name
After all types are created the names of the types will be completed.</li>
<li>Complete Type
In the last step the types will be completed, this means that for instance the fields are assigned, or the directives are retrieved and associated with a type etc.
After this the type is completed and becomes immutable.</li>
</ul>
<p>The extension descriptor provides extension points to these three phases:</p>
<ul>
<li>OnBeforeCreate
OnBeforeCreate will allow you to customize the type definition.
It is important to know that this step is not allowed to be dependent on another type object. Also, at this point you will not have access to the type completion context.</li>
<li>OnBeforeNaming
OnBeforeNaming allows to provide logic to generate the name of a type.
You can declare two kinds of dependencies in this step, either the dependency has to be named first or the dependency is allowed to be in any state.</li>
<li>OnBeforeCompletion
OnBeforeCompletion allows to provide further logic that modifies the type definition. For instance, we could be dependent on another type in order to generate fields based on the fields of that other type.
You can declare two kinds of dependencies in this step, either the dependency has to be completed first or the dependency is allowed to be in any state.</li>
</ul>
<p>Let us have a look at how we implemented our own <code class="language-text">Name</code> extension method in order to understand what <code class="language-text">Extend</code> is useful for:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="17497924617106975000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`descriptor
  .Extend()
  .OnBeforeNaming((ctx, definition) =>
  {
      INamedType type = ctx.GetType<INamedType>(
          ClrTypeReference.FromSchemaType(typeInfo.ClrType));
      definition.Name = createName(type);
  })
  .DependsOn(dependency, mustBeNamed:true);`, `17497924617106975000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">descriptor
  <span class="token punctuation">.</span><span class="token function">Extend</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">OnBeforeNaming</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> definition<span class="token punctuation">)</span> <span class="token operator">=></span>
  <span class="token punctuation">{</span>
      <span class="token class-name">INamedType</span> type <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>INamedType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>
          ClrTypeReference<span class="token punctuation">.</span><span class="token function">FromSchemaType</span><span class="token punctuation">(</span>typeInfo<span class="token punctuation">.</span>ClrType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      definition<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token function">createName</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">DependsOn</span><span class="token punctuation">(</span>dependency<span class="token punctuation">,</span> <span class="token named-parameter punctuation">mustBeNamed</span><span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Let us pic that example apart in order to understand what we did here. First, we called <code class="language-text">Extend</code>, <code class="language-text">Extend</code> returns the <code class="language-text">IDescriptorExtension&lt;T&gt;</code> which allows us to register some code with the descriptor events that I have described earlier.</p>
<p>Each event will provide us with the type definition and the completion context. The <code class="language-text">ICompletionContext</code> is the API to request information from the schema builder. In the case of our <code class="language-text">Name</code> extension we are requesting the type instance for our <code class="language-text">TSchemaType</code>. After that we call the naming algorithm with the resolved schema type.</p>
<p>Also, we added a dependency with <code class="language-text">DependsOn</code>. The Boolean argument on <code class="language-text">DependsOn</code> declares that the type has to be named before our delegate can be executed. We can declare as many dependencies as we want, so we are not bound to have just one.</p>
<p>Let me sum that up. The new <code class="language-text">Extend</code> method on the descriptors allow us to extend the type descriptors without the need to create a new type base class. This is nice because you can now create extension methods that work across multiple solutions without forcing the user of that extension to opt into a new type base class. This makes it easy to consume those extensions. It is important to know here that <code class="language-text">Extend</code> is available on all descriptors, so it is available on field descriptors, argument descriptors, or type descriptors.</p>
<h3 id="replacing-descriptors" style="position:relative;"><a href="#replacing-descriptors" aria-label="replacing descriptors permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Replacing Descriptors</h3>
<p>Though <code class="language-text">Extend</code> is very capable, in some cases we might want to limit what is available through our descriptor. This basically means we want to remove functionality or replace the descriptor entirely. Let us assume we want to introduce an input type that describes the filter capabilities that can be applied to an output type. Basically, we want to introduce a filter input type like Prisma does.</p>
<p>So, if we had a type like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="9906877329033170000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Foo {
  bar: String!
}`, `9906877329033170000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  <span class="token attr-name">bar</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We would want to be able to describe the filter capabilities that are available to the user of our API. This could look something like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="60570760750919710000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class FooFilterType
    : FilterType<Foo>
{
    public void Configure(IFilterDescriptor descriptor)
    {
        descriptor.Filter(t => t.Bar).AllowSmallerThan();
    }
}`, `60570760750919710000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FooFilterType</span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">FilterType<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IFilterDescriptor</span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Filter</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Bar<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AllowSmallerThan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The <code class="language-text">FilterType&lt;Foo&gt;</code> inherits from <code class="language-text">InputObjectType</code> and can with version 9 add its own descriptor. In order to replace the descriptor on our input type we would have to replace the configure method and introduce our new filter descriptor:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="88981024995506620000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class FilterType<T>
    : InputObjectType
{
    private readonly Action<IFilterTypeDescriptor<T>> _configure;

    public FilterType()
    {
        _configure = Configure;
    }

    public FilterType(Action<IFilterTypeDescriptor<T>> configure)
    {
        _configure = configure
            ?? throw new ArgumentNullException(nameof(configure));
    }

    #region Configuration

    protected override InputObjectTypeDefinition CreateDefinition(
        IInitializationContext context)
    {
        var descriptor =
            FilterTypeDescriptor.New<T>(
                DescriptorContext.Create(context.Services));
        _configure(descriptor);
        return descriptor.CreateDefinition();
    }

    protected virtual void Configure(
        IFilterTypeDescriptor<T> descriptor)
    {
    }

    protected sealed override void Configure(
        IInputObjectTypeDescriptor descriptor)
    {
        throw new NotSupportedException();
    }

    #endregion
}`, `88981024995506620000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterType<span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">InputObjectType</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">Action<span class="token punctuation">&lt;</span>IFilterTypeDescriptor<span class="token punctuation">&lt;</span>T<span class="token punctuation">></span><span class="token punctuation">></span></span> _configure<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">FilterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _configure <span class="token operator">=</span> Configure<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">FilterType</span><span class="token punctuation">(</span><span class="token class-name">Action<span class="token punctuation">&lt;</span>IFilterTypeDescriptor<span class="token punctuation">&lt;</span>T<span class="token punctuation">></span><span class="token punctuation">></span></span> configure<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _configure <span class="token operator">=</span> configure
            <span class="token operator">??</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentNullException</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>configure<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token preprocessor property">#<span class="token directive keyword">region</span> Configuration</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name">InputObjectTypeDefinition</span> <span class="token function">CreateDefinition</span><span class="token punctuation">(</span>
        <span class="token class-name">IInitializationContext</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> descriptor <span class="token operator">=</span>
            FilterTypeDescriptor<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">New</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>
                DescriptorContext<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>Services<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">_configure</span><span class="token punctuation">(</span>descriptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> descriptor<span class="token punctuation">.</span><span class="token function">CreateDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span>
        <span class="token class-name">IFilterTypeDescriptor<span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">sealed</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span>
        <span class="token class-name">IInputObjectTypeDescriptor</span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NotSupportedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>
<span class="token punctuation">}</span></code></pre></div>
<p>Like the descriptor extend logic we basically can override those three type initialization events.</p>
<p>In order to replace the old descriptor, we sealed of the old <code class="language-text">Configure</code> method. Also, we introduced our new <code class="language-text">Configure</code> method with the new descriptor.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="46091569086197980000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`protected virtual void Configure(
    IFilterTypeDescriptor<T> descriptor)
{
}

protected sealed override void Configure(
    IInputObjectTypeDescriptor descriptor)
{
    throw new NotSupportedException();
}`, `46091569086197980000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">protected</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span>
    <span class="token class-name">IFilterTypeDescriptor<span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">protected</span> <span class="token keyword">sealed</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span>
    <span class="token class-name">IInputObjectTypeDescriptor</span> descriptor<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NotSupportedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In order to initialize our new descriptor, we overrode the <code class="language-text">CreateDefinition</code> method. Our descriptor has to produce a <code class="language-text">InputObjectTypeDefinition</code> in order to abide to the <code class="language-text">InputType</code> interface. If you want your descriptor extendable like our descriptors, all you have to do is inherit from our descriptor base. With version 9 all descriptor and type definition classes are now public, and we strongly recommend basing your descriptors on our base classes.</p>
<h2 id="context-data-support-on-types" style="position:relative;"><a href="#context-data-support-on-types" aria-label="context data support on types permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Context Data Support on Types</h2>
<p>Also, with the new version we added the context data dictionary to all types, fields and arguments. You can use this to add custom metadata to objects of the type system. Context data can be declared on the type definition and will be copied to the corresponding type object.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="15181132448441815000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`descriptor
  .Extend()
  .OnBeforeCreate(definition =>
  {
      definition.ContextData[&quot;Foo&quot;] = &quot;Bar&quot;;
  });`, `15181132448441815000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">descriptor
  <span class="token punctuation">.</span><span class="token function">Extend</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">OnBeforeCreate</span><span class="token punctuation">(</span>definition <span class="token operator">=></span>
  <span class="token punctuation">{</span>
      definition<span class="token punctuation">.</span>ContextData<span class="token punctuation">[</span><span class="token string">"Foo"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Bar"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>You can access the context data on a type object like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="36103726146269090000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`schema.GetType<ObjectType>(&quot;Query&quot;).ContextData.ContainsKey(&quot;Foo&quot;);`, `36103726146269090000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">schema<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ObjectType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"Query"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ContextData<span class="token punctuation">.</span><span class="token function">ContainsKey</span><span class="token punctuation">(</span><span class="token string">"Foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2 id="improved-relay-support" style="position:relative;"><a href="#improved-relay-support" aria-label="improved relay support permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Improved Relay Support</h2>
<p>With version 9 we are making creating relay compliant schemas a breeze. Lets have a look at the relay server spec parts and see how those translate to <em>Hot Chocolate</em>:</p>
<p>In order to activate relayjs support you can do now the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="33512189215135210000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`SchemaBuilder.New()
    .EnableRelaySupport()
    .AddQueryType<Foo>()
    .Create()`, `33512189215135210000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">EnableRelaySupport</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p><code class="language-text">EnableRelaySupport</code> will add the node field to your query type and setup the general logic of how your nodes will be resolved using an id value. Moreover, this activates the id value serialization and deserialization. The schema will now have opaque identifiers, but you will not have to deal with those in your API.</p>
<p>In <code class="language-text">ObjectType</code>s you can now declare a type as node type. That means this type will implement the node interface and can be resolved through the node field:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="804913587122202400"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class FooType
    : ObjectType<Foo>
{
    protected override void Configure(IObjectTypeDescriptor<Foo> descriptor)
    {
        descriptor.AsNode<Foo,int>((ctx, id) =>
            ctx.Service<IMyRepository>().GetById(id));
    }
}`, `804913587122202400`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FooType</span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IObjectTypeDescriptor<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AsNode</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Foo<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> id<span class="token punctuation">)</span> <span class="token operator">=></span>
            ctx<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Service</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IMyRepository<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Ok, this is basically all you have to do to fulfill spec item <code class="language-text">A mechanism for refetching an object.</code>.</p>
<p>The other spec items for the relay spec were already quite good with version 8. It felt always odd to expose so much logic about those node resolvers to the developers that we refined our current APIs. We used the new <code class="language-text">Extend</code> mechanism to provide extensions that help you along the way without forcing you to use a special base class.</p>
<h2 id="code-first-type-extensions" style="position:relative;"><a href="#code-first-type-extensions" aria-label="code first type extensions permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Code-First Type Extensions</h2>
<p>The last thing I want to talk about in this post are code-first type extensions. We already supported the <code class="language-text">extend</code> keyword in the stitching layer but had no real code-first API for this. Also, we only supported this in the stitching layer. With version 9 you can now extend code-first and schema-first. Moreover, type extensions are not bound to the stitching layer and work also on a standard schema.</p>
<p>Let us say we have the type <code class="language-text">FooType</code> that has one field <code class="language-text">description</code>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="66594505205007920000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class FooType
    : ObjectType<Foo>
{
    protected override void Configure(
        IObjectTypeDescriptor<Foo> descriptor)
    {
        descriptor.Field(t => t.Description);
    }
}`, `66594505205007920000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FooType</span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span>
        <span class="token class-name">IObjectTypeDescriptor<span class="token punctuation">&lt;</span>Foo<span class="token punctuation">></span></span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Description<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We can now introduce a type extension for our <code class="language-text">FooType</code> that adds for instance a new field <code class="language-text">test</code>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="34280574308391465000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class FooTypeExtension
    : ObjectTypeExtension
{
    protected override void Configure(
        IObjectTypeDescriptor descriptor)
    {
        descriptor.Name(&quot;Foo&quot;);
        descriptor.Field(&quot;test&quot;)
            .Resolver(() => new List<string>())
            .Type<ListType<StringType>>();
    }
}`, `34280574308391465000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FooTypeExtension</span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectTypeExtension</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span>
        <span class="token class-name">IObjectTypeDescriptor</span> descriptor<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token string">"Foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        descriptor<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Resolver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Type</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ListType<span class="token punctuation">&lt;</span>StringType<span class="token punctuation">></span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The code-first extension types can do much more then, the schema-first variant. For instance, with code-first you can add middleware parts to a field replace or update a field, replace the resolver, add or replace directives on fields, arguments and so on. Also, you have all the extension functionality that you have on normal types. In fact, since the type extension and the type are using the same descriptor you can apply the same extensions to both.</p>
<p>Also, you can define multiple type extensions for a single type.</p>
<p>So, let us have a look of how we add type extensions to our schema:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="76073661401209370000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`ISchema schema = SchemaBuilder.New()
  .AddQueryType<FooType>()
  .AddType<FooTypeExtension>();
  .Create()`, `76073661401209370000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name">ISchema</span> schema <span class="token operator">=</span> SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>FooType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>FooTypeExtension<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p>The schema builder basically treats them as types, so there is nothing special that you have to do in order to register them.</p>
<p>As we go forward, we will also introduce generic variants of the extension types. This will be quite nice in the stitching layer since you can provide a .Net type that we will use to deserialize the object. This means that you can write your resolvers against strong types instead of the generic types that we use per default in the stitching layer.</p>
<h2 id="wrapping-it-up" style="position:relative;"><a href="#wrapping-it-up" aria-label="wrapping it up permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Wrapping it up</h2>
<p>This is just the first bunch of features that are included with version 9. The best thing, all of what I have showed you today is already included in version 9.0.0-preview.11 which we have released alongside this blog post.</p>
<p>The next few posts will focus on execution plan support in our query engine. Execution plans can be cached and persisted and will make stitching so much faster. Also, we need the new execution plan feature to introduce support for <code class="language-text">@defer</code>.</p>
<p>Furthermore, we will give a peek at our new high-performance parser.</p>
<p>Also, we will have a look at subscription stitching and our reworked subscription implementation that is now based on the pipeline API of .Net Core.</p>
<p>Last but not least, we hope we are be able to squeeze in our new <code class="language-text">FilterType</code> feature with version 9.</p>
<p>As you can see version 9 will bring quite a few improvements, so stay tuned for our next post on V9 and try out our previews. Also, join our slack channel and give us your take on GraphQL, tell us what you would like to see next in <em>Hot Chocolate</em>.</p>
<p>With <em>Hot Chocolate</em> we are building a GraphQL server for the community, so join and help us along.</p>
<p>We value any kind of contribution, whether you give us a star, a feedback, find a bug, a typo, or whether you contribute code. Every bit matters and makes our project better.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GraphQL - How to write integration tests against Hot Chocolate]]></title>
            <link>https://chillicream.com/blog/2019/04/11/integration-tests</link>
            <guid>/blog/2019/04/11/integration-tests</guid>
            <pubDate>Thu, 11 Apr 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Today I was asked in our slack channel how one could write an integration test against Hot Chocolate without setting up an ASP.Net Core…]]></description>
            <content:encoded><![CDATA[<p>Today I was asked in our slack channel how one could write an integration test against <em>Hot Chocolate</em> without setting up an ASP.Net Core <em>TestServer</em>.
Though the ASP.Net Core <em>TestServer</em> API is quite nice, it is much more cumbersome to test a schema this way.</p>
<p>For full integration tests through all the layers we could in fact setup a test GraphQL endpoint with the complete ASP.net core pipeline by using the ASP.Net core <em>TestServer</em> API.</p>
<p>With this approach we could ensure that the GraphQL endpoint is correctly configured and works well within our service. In many cases this seems too much since we only want to test parts of the schema.</p>
<blockquote>
<p>If you want to read more about the ASP.Net Core <em>TestServer</em> API there is a nice article on the <a href="https://visualstudiomagazine.com/articles/2017/07/01/testserver.aspx">Visual Studio Magazine</a>.</p>
</blockquote>
<h2 id="setup" style="position:relative;"><a href="#setup" aria-label="setup permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Setup</h2>
<p>Before we get started, assume we have a simple query class representing our GraphQL <code class="language-text">Query</code> type:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="54635287757307930000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Query
{
    public string SayHello() => &quot;Hello&quot;;
}`, `54635287757307930000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token string">"Hello"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In order to create a schema from that simple type we could just do the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="44459345596748270000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`ISchema schema = Schema.Create(c => c.RegisterQueryType<Query>());`, `44459345596748270000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name">ISchema</span> schema <span class="token operator">=</span> Schema<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>c <span class="token operator">=></span> c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>OK, now we have a schema against which we can write our tests.</p>
<p>Let`s take a step back and let us think about what we want to actually test before we go into the how.</p>
<p>Most of the times we want to write tests that ensure that our internal services are correctly hooked up with the GraphQL layer. Basically, we want to test that our business logic works well in the context of GraphQL and that all data is passed correctly. This means that we want to write queries and assert the results of our query.</p>
<p>The second thing that might be worth to ensure is that our schema is correctly expressed, so that all the default values are ,correct and no unexpected field is exposed.</p>
<p>Last but not least we might want to test a query- or field-middleware in various situations.</p>
<h2 id="integration-tests" style="position:relative;"><a href="#integration-tests" aria-label="integration tests permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Integration Tests</h2>
<p>All right, let us get started with the integration tests first. In order to write queries against our schema we need to create a query executor:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="25327774642865197000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`IQueryExecutor executor = schema.MakeExecutable();`, `25327774642865197000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name">IQueryExecutor</span> executor <span class="token operator">=</span> schema<span class="token punctuation">.</span><span class="token function">MakeExecutable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>The next thing that is important when testing the query engine in isolation is dependency injection.</p>
<p>Dependency injection is provided through <code class="language-text">IServiceProvider</code>, this makes it really easy to provide the services to the execution engine that we might need like our data layer or so on.</p>
<p>The easiest way ist to create a service collection and setup whatever we need.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="70109933730606550000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`IServiceProvider serviceProvider =
    new ServiceCollection()
        .AddSingleton<Foo, Bar>()
        .BuildServiceProvider();`, `70109933730606550000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name">IServiceProvider</span> serviceProvider <span class="token operator">=</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Foo<span class="token punctuation">,</span> Bar<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">BuildServiceProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>The second thing we have to ensure is that we did not use <code class="language-text">HttpContext</code> in our resolver- or middleware-logic.</p>
<p><strong>Wait a minute, but how are we able to access properties from <code class="language-text">HttpContext</code> when we are not allowed to access it?</strong></p>
<p>Agreed, in some cases we really need to have access to properties on the <code class="language-text">HttpContext</code> like the current <code class="language-text">HttpContext.User</code> or some header value. In these cases, we need to access some parts of the <code class="language-text">HttpContext</code> and copy those parts we need to our context data. The context data dictionary is thread-safe and can be accessed in query-, field-middleware and the field-resolver. This makes it easy to abstract the user context from ASP.Net Core dependencies like <code class="language-text">HttpContext</code>. By doing this we will make our schema more testable and less dependant on the service layer.</p>
<p>We can do this by writing a query middleware that copies these properties to our context or by using our <code class="language-text">OnCreateRequestAsync</code> hook. I will show how this can be done at the end of this post.</p>
<p>For now, let us assume we have done that already, then the only thing that we would need to do is to set the context data when we create our request. So, lets put a simple test together to see how we can write a test:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="95521724556709480000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`[Fact]
public async Task SayHello_HelloIsReturned()
{
    // arrange
    IServiceProvider serviceProvider =
        new ServiceCollection()
            .AddSingleton<IDataLayer, MyDataLayer>()
            .BuildServiceProvider();

    IQueryExecutor executor = Schema.Create(c =>
    {
        c.RegisterQueryType<Query>();
    })
    .MakeExecutable();

    IReadOnlyQueryRequest request =
        QueryRequestBuilder.New()
            .SetQuery(&quot;{ sayHello }&quot;)
            .SetServices(serviceProvider)
            .AddProperty(&quot;Key&quot;, &quot;value&quot;)
            .Create();

    // act
    IExecutionResult result = await executor.ExecuteAsync(request);

    // assert
    // so how do we assert this thing???
}`, `95521724556709480000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">SayHello_HelloIsReturned</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// arrange</span>
    <span class="token class-name">IServiceProvider</span> serviceProvider <span class="token operator">=</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDataLayer<span class="token punctuation">,</span> MyDataLayer<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">BuildServiceProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">IQueryExecutor</span> executor <span class="token operator">=</span> Schema<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">MakeExecutable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">IReadOnlyQueryRequest</span> request <span class="token operator">=</span>
        QueryRequestBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">SetQuery</span><span class="token punctuation">(</span><span class="token string">"{ sayHello }"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">SetServices</span><span class="token punctuation">(</span>serviceProvider<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">AddProperty</span><span class="token punctuation">(</span><span class="token string">"Key"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// act</span>
    <span class="token class-name">IExecutionResult</span> result <span class="token operator">=</span> <span class="token keyword">await</span> executor<span class="token punctuation">.</span><span class="token function">ExecuteAsync</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// assert</span>
    <span class="token comment">// so how do we assert this thing???</span>
<span class="token punctuation">}</span></code></pre></div>
<p>That does look good already, but how do we assert the result and what is the result.</p>
<p>The query executor will return an execution result, depending on the type of operation it could be a <code class="language-text">IResponseStream</code> or a <code class="language-text">IReadOnlyQueryResult</code>.</p>
<p>An <code class="language-text">IReadOnlyQueryResult</code> contains basically the result graph of the query, but asserting this could be very tiresome.</p>
<p>My good friend <a href="https://github.com/nscheibe">Normen</a> who works at Swiss Life created a snapshot testing library that basically works like <a href="https://jestjs.io">jestjs</a>. We use <em>Snapshooter</em> internally to test the <em>Hot Chocolate</em> core.</p>
<p><a href="https://github.com/SwissLife-OSS/snapshooter">Snapshooter</a> will create a snapshot at the first execution of the test. The snapshots are saved in a folder <code class="language-text">__snapshot__</code> that is co-located with our test class. Every consecutive test run will be validated against that first snapshot. If the snapshots do not match the test will fail and tell us what part did not match.</p>
<p>So, let us have a look how our test would look like with this assertion in place.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="59889684554093090000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`[Fact]
public async Task SayHello_HelloIsReturned()
{
    // arrange
    IServiceProvider serviceProvider =
        new ServiceCollection()
            .AddSingleton<IDataLayer, MyDataLayer>()
            .BuildServiceProvider();

    IQueryExecutor executor = Schema.Create(c =>
    {
        c.RegisterQueryType<Query>();
    })
    .MakeExecutable();

    IReadOnlyQueryRequest request =
        QueryRequestBuilder.New()
            .SetQuery(&quot;{ sayHello }&quot;)
            .SetServices(serviceProvider)
            .AddProperty(&quot;Key&quot;, &quot;value&quot;)
            .Create();

    // act
    IExecutionResult result = await executor.ExecuteAsync(request);

    // assert
    result.MatchSnapshot();
}`, `59889684554093090000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">SayHello_HelloIsReturned</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// arrange</span>
    <span class="token class-name">IServiceProvider</span> serviceProvider <span class="token operator">=</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDataLayer<span class="token punctuation">,</span> MyDataLayer<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">BuildServiceProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">IQueryExecutor</span> executor <span class="token operator">=</span> Schema<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">MakeExecutable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">IReadOnlyQueryRequest</span> request <span class="token operator">=</span>
        QueryRequestBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">SetQuery</span><span class="token punctuation">(</span><span class="token string">"{ sayHello }"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">SetServices</span><span class="token punctuation">(</span>serviceProvider<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">AddProperty</span><span class="token punctuation">(</span><span class="token string">"Key"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// act</span>
    <span class="token class-name">IExecutionResult</span> result <span class="token operator">=</span> <span class="token keyword">await</span> executor<span class="token punctuation">.</span><span class="token function">ExecuteAsync</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// assert</span>
    result<span class="token punctuation">.</span><span class="token function">MatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This test looks very clean now, the snapshots are serializing to json which makes them easy to read.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="36314453984857020000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  &quot;Data&quot;: {
    &quot;sayHello&quot;: &quot;hello&quot;
  },
  &quot;Extensions&quot;: {},
  &quot;Errors&quot;: []
}`, `36314453984857020000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"Data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"sayHello"</span><span class="token operator">:</span> <span class="token string">"hello"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"Extensions"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"Errors"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The awesome thing with snapshooter is that we can ignore parts of our result-graph or validate one property of the result-graph in a special way.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="73646753709004930000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`result.MatchSnapshot(o =>
    o.IgnoreField(&quot;Extensions.SomeProperty&quot;));`, `73646753709004930000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">result<span class="token punctuation">.</span><span class="token function">MatchSnapshot</span><span class="token punctuation">(</span>o <span class="token operator">=></span>
    o<span class="token punctuation">.</span><span class="token function">IgnoreField</span><span class="token punctuation">(</span><span class="token string">"Extensions.SomeProperty"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>For more information about how snapshooter works head over to their repository:</p>
<p><a href="https://github.com/SwissLife-OSS/snapshooter">https://github.com/SwissLife-OSS/snapshooter</a></p>
<h2 id="schema-tests" style="position:relative;"><a href="#schema-tests" aria-label="schema tests permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Schema Tests</h2>
<p>Ok, lets have a look at our second category. This I think is the simplest test we will write and probably we will just have one or two of those tests.</p>
<p><em>Hot Chocolate</em> lets us print our schema as GraphQL SDL, this means that we can create a simple SDL representation like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="96741796649971450000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  sayHello: String
}`, `96741796649971450000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">sayHello</span><span class="token punctuation">:</span> String
<span class="token punctuation">}</span></code></pre></div>
<p>In order to get this representation we just have to do the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="4232898446140565000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`Schema.Create(c => c.RegisterQueryType<Query>()).ToString();`, `4232898446140565000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">Schema<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>c <span class="token operator">=></span> c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>That`s quite simple, just calling <code class="language-text">ToString()</code> on the schema will return the schema SDL representation.</p>
<p>The good thing with <em>Snapshooter</em> is that we also can create snapshots of scalar values like a string. <em>Snapshooter</em> will than just save the raw scalar as snapshot, so our SDL will <strong>NOT</strong> be polluted with JSON escape characters.</p>
<p>Our test could look like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="25258371133449064000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`[Fact]
public async Task Ensure_Schema_IsCorrect()
{
    // arrange
    ISchema schema = Schema.Create(c =>
    {
        c.RegisterQueryType<Query>();
    });

    // act
    string schemaSDL = schema.ToString();

    // assert
    schemaSDL.MatchSnapshot();
}`, `25258371133449064000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">Ensure_Schema_IsCorrect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// arrange</span>
    <span class="token class-name">ISchema</span> schema <span class="token operator">=</span> Schema<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// act</span>
    <span class="token class-name"><span class="token keyword">string</span></span> schemaSDL <span class="token operator">=</span> schema<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// assert</span>
    schemaSDL<span class="token punctuation">.</span><span class="token function">MatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="middlewareresolver-tests" style="position:relative;"><a href="#middlewareresolver-tests" aria-label="middlewareresolver tests permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Middleware/Resolver Tests</h2>
<p>The last category concerns our middleware logic. I would strongly suggest testing a middleware with a unit test and not by firing a query against the query engine. You can use <a href="https://github.com/Moq/moq4/wiki/Quickstart">Moq</a> to create a <code class="language-text">IResolverContext</code> mock.</p>
<p>In cases that you want to test a resolver or middleware pipeline of a field you can retrieve those from that type like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="63148986354318740000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`[Fact]
public async Task SayHello_HelloIsReturned()
{
    // arrange
    IServiceProvider serviceProvider =
        new ServiceCollection()
            .AddSingleton<IDataLayer, MyDataLayer>()
            .BuildServiceProvider();

    ISchema schema = Schema.Create(c =>
    {
        c.RegisterQueryType<Query>();
    });

    ObjectType type = schema.GetType<ObjectType>(&quot;Query&quot;);
    ObjectField field = type.Fields[&quot;sayHello&quot;];

    Mock<IResolverContext> contextMock = new Mock<IResolverContext>();
    // note that depending on what you are using in your resolver you will
    // have to setup properties for your mock.

    // act
    object result = await field.Resolver(contextMock.Object)

    // assert
    result.MatchSnapshot();
}`, `63148986354318740000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">SayHello_HelloIsReturned</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// arrange</span>
    <span class="token class-name">IServiceProvider</span> serviceProvider <span class="token operator">=</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDataLayer<span class="token punctuation">,</span> MyDataLayer<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">BuildServiceProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">ISchema</span> schema <span class="token operator">=</span> Schema<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">ObjectType</span> type <span class="token operator">=</span> schema<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ObjectType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"Query"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ObjectField</span> field <span class="token operator">=</span> type<span class="token punctuation">.</span>Fields<span class="token punctuation">[</span><span class="token string">"sayHello"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token class-name">Mock<span class="token punctuation">&lt;</span>IResolverContext<span class="token punctuation">></span></span> contextMock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Mock<span class="token punctuation">&lt;</span>IResolverContext<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// note that depending on what you are using in your resolver you will</span>
    <span class="token comment">// have to setup properties for your mock.</span>

    <span class="token comment">// act</span>
    <span class="token class-name"><span class="token keyword">object</span></span> result <span class="token operator">=</span> <span class="token keyword">await</span> field<span class="token punctuation">.</span><span class="token function">Resolver</span><span class="token punctuation">(</span>contextMock<span class="token punctuation">.</span>Object<span class="token punctuation">)</span>

    <span class="token comment">// assert</span>
    result<span class="token punctuation">.</span><span class="token function">MatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The resolver-property will just have the isolated resolver logic. In order to access the middleware pipeline, use the <code class="language-text">Middleware</code> property on the field. The middleware represents the compiled middleware pipeline including the resolver.</p>
<h2 id="httpcontext-abstraction" style="position:relative;"><a href="#httpcontext-abstraction" aria-label="httpcontext abstraction permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>HttpContext Abstraction</h2>
<p>So, lets come back the question about the <code class="language-text">HttpContext</code>. In order to copy properties from the <code class="language-text">HttpContext</code> to your GraphQL request I said that we can use <code class="language-text">OnCreateRequestAsync</code>. This is actually the simplest way to do it.</p>
<p>Let us grab the user from the <code class="language-text">HttpContext</code> and copy it to our context data dictionary as an example.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="25573582969006203000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`app.UseGraphQL(new QueryMiddlewareOptions
{
    OnCreateRequest = (context, builder, ct) =>
    {
        builder.SetProperty(&quot;user&quot;, context.User);
        return Task.CompletedTask;
    }
})`, `25573582969006203000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">app<span class="token punctuation">.</span><span class="token function">UseGraphQL</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">QueryMiddlewareOptions</span>
<span class="token punctuation">{</span>
    OnCreateRequest <span class="token operator">=</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> builder<span class="token punctuation">,</span> ct<span class="token punctuation">)</span> <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        builder<span class="token punctuation">.</span><span class="token function">SetProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> context<span class="token punctuation">.</span>User<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Task<span class="token punctuation">.</span>CompletedTask<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>The second way is a little bit more complicated but easier to test and feels cleaner.</p>
<p>We could write a little query middleware. The middleware could be provided as delegate like the upper example or we could take the extra effort to make a class.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="80155756227786900000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class CopyUserMiddleware
{
    private readonly QueryDelegate _next;

    public CopyVariablesToResolverContextMiddleware(QueryDelegate next)
    {
        _next = next ?? throw new ArgumentNullException(nameof(next));
    }

    public Task InvokeAsync(IQueryContext context)
    {
        IHttpContextAccessor accessor = context.Services.GetService<IHttpContextAccessor>();
        context.ContextData[&quot;user&quot;] = accessor.HttpContext.User;
        return _next.Invoke(context);
    }
}`, `80155756227786900000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CopyUserMiddleware</span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">QueryDelegate</span> _next<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">CopyVariablesToResolverContextMiddleware</span><span class="token punctuation">(</span><span class="token class-name">QueryDelegate</span> next<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _next <span class="token operator">=</span> next <span class="token operator">??</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentNullException</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">Task</span> <span class="token function">InvokeAsync</span><span class="token punctuation">(</span><span class="token class-name">IQueryContext</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">IHttpContextAccessor</span> accessor <span class="token operator">=</span> context<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IHttpContextAccessor<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span>ContextData<span class="token punctuation">[</span><span class="token string">"user"</span><span class="token punctuation">]</span> <span class="token operator">=</span> accessor<span class="token punctuation">.</span>HttpContext<span class="token punctuation">.</span>User<span class="token punctuation">;</span>
        <span class="token keyword">return</span> _next<span class="token punctuation">.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>So, this code does the same as our first example but is now easily testable and can be integrated like the following to our GraphQL execution pipeline:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="67363621304353160000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddGraphQL(Schema.Create(c =>
    {
        c.RegisterQueryType<Query>();
    })
    .MakeExecutable(b => b.Use<CopyUserMiddleware>().UseDefaultPipeline()));`, `67363621304353160000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>Schema<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">MakeExecutable</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Use</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CopyUserMiddleware<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UseDefaultPipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>I hope this little post will help when you start writing tests for your schema. If you run into any issues or if you have further questions/suggestions head over to our <a href="https://join.slack.com/t/hotchocolategraphql/shared_invite/enQtNTA4NjA0ODYwOTQ0LTViMzA2MTM4OWYwYjIxYzViYmM0YmZhYjdiNzBjOTg2ZmU1YmMwNDZiYjUyZWZlMzNiMTk1OWUxNWZhMzQwY2Q">slack channel</a> and we will be happy to help you.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GraphQL - Hot Chocolate 0.8.1]]></title>
            <link>https://chillicream.com/blog/2019/03/31/hot-chocolate-0.8.1</link>
            <guid>/blog/2019/03/31/hot-chocolate-0.8.1</guid>
            <pubDate>Sun, 31 Mar 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Today we release version 8.1 (0.8.1) of Hot Chocolate. This release brings improvements and bug fixes to the current version 8 release…]]></description>
            <content:encoded><![CDATA[<p>Today we release version 8.1 (0.8.1) of <em>Hot Chocolate</em>. This release brings improvements and bug fixes to the current version 8 release.</p>
<h2 id="instrumentation" style="position:relative;"><a href="#instrumentation" aria-label="instrumentation permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Instrumentation</h2>
<p>One focus of this release was to open up our diagnostic events to be used by developers. When we started thinking about how <em>Hot Chocolate</em> should provide information about its inner workings to users of the library, we opted against using one specific logging framework.</p>
<p>Instead we have looked at what Microsoft was doing in ASP.Net core and other components with diagnostic sources. Diagnostic sources let us create events that have non-serializable payloads.</p>
<p>This means that we can provide an event that gives full access to our context objects like the <code class="language-text">IQueryContext</code> or the <code class="language-text">IResolverContext</code>.</p>
<p>This enables you to add your own logger to your GraphQL server and grab exactly the information from the <em>Hot Chocolate</em> diagnostic events that you need to make your tracing solution work.</p>
<p>In order to read more on this subject checkout our blog: <a href="2019-03-19-logging-with-hotchocolate.md">Tracing with Hot Chocolate</a> or head over to our <a href="https://hotchocolate.io/docs/instrumentation">documentation</a>.</p>
<h2 id="stitching-refinements" style="position:relative;"><a href="#stitching-refinements" aria-label="stitching refinements permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Stitching Refinements</h2>
<p>One new feature that is now available in the stitching layer is support of error filters. This means that you can now write error filters like on a local schema and transform or enrich query errors that were extracted from remote queries.</p>
<p>In order to make it easier to use error filters we have changed the error structure of remote errors and provide the original error object as an extension property:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="12167352363077843000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`serviceCollection.AddStitchedSchema(builder =>
    builder.AddSchemaFromHttp(&quot;messages&quot;)
        .AddSchemaFromHttp(&quot;users&quot;)
        .AddSchemaFromHttp(&quot;analytics&quot;))
        .AddExecutionConfiguration(b =>
        {
            b.AddErrorFilter(error =>
            {
                if(error.Extensions.TryGetValue(&quot;remote&quot;, out object o)
                  && o is IError originalError)
                {
                    return error.AddExtension(
                      &quot;remote_code&quot;,
                      originalError.Code);
                }
                return error;
            });
        }));`, `12167352363077843000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">serviceCollection<span class="token punctuation">.</span><span class="token function">AddStitchedSchema</span><span class="token punctuation">(</span>builder <span class="token operator">=></span>
    builder<span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">AddExecutionConfiguration</span><span class="token punctuation">(</span>b <span class="token operator">=></span>
        <span class="token punctuation">{</span>
            b<span class="token punctuation">.</span><span class="token function">AddErrorFilter</span><span class="token punctuation">(</span>error <span class="token operator">=></span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span><span class="token function">TryGetValue</span><span class="token punctuation">(</span><span class="token string">"remote"</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">object</span></span> o<span class="token punctuation">)</span>
                  <span class="token operator">&amp;&amp;</span> o <span class="token keyword">is</span> <span class="token class-name">IError</span> originalError<span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> error<span class="token punctuation">.</span><span class="token function">AddExtension</span><span class="token punctuation">(</span>
                      <span class="token string">"remote_code"</span><span class="token punctuation">,</span>
                      originalError<span class="token punctuation">.</span>Code<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> error<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>We also refined the default rewrite logic so that errors in most cases will now be correctly associated with the causing field.</p>
<h2 id="bug-fixes" style="position:relative;"><a href="#bug-fixes" aria-label="bug fixes permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Bug Fixes</h2>
<p><code class="language-text">DateTime</code> scalars are now correctly handled in the stitching layer, with version 8 we had some issues when <code class="language-text">DateTime</code> scalars were provided through variables.</p>
<p>For more information on what other bugs we fixed head over to our <a href="https://github.com/ChilliCream/hotchocolate/blob/master/CHANGELOG.md">changelog</a>.</p>
<h2 id="version-9-development" style="position:relative;"><a href="#version-9-development" aria-label="version 9 development permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Version 9 Development</h2>
<p>We have made a lot of headway with the new type system that is coming with version 9. Also, we are working on the <code class="language-text">@defer</code> directive at the moment. We will give a more detailed update on the next major version in a sperate blog post. Version 9 is really shaping up to become our biggest release so far.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GraphQL - Tracing with Hot Chocolate]]></title>
            <link>https://chillicream.com/blog/2019/03/19/logging-with-hotchocolate</link>
            <guid>/blog/2019/03/19/logging-with-hotchocolate</guid>
            <pubDate>Tue, 19 Mar 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[One common question that comes up on our slack channel is if Hot Chocolate supports some kind of logging infrastructure. My personal opinion…]]></description>
            <content:encoded><![CDATA[<p>One common question that comes up on our slack channel is if <em>Hot Chocolate</em> supports some kind of logging infrastructure. My personal opinion here is that logging/tracing is often very project specific and an API should not force one specific logging solution onto its users.</p>
<p>Instead we have opted to provide diagnostic events through Microsoft`s diagnostic source which does not force us to serialize any payloads. This in turn gives you the ability to pick and choose the information that best fits your need for your tracing/logging solution.</p>
<p>This post will walk you through on how to add a logger of your choice to <em>Hot Chocolate</em> and get exactly the right amount of information for your project.</p>
<p>In this blog we will use the ASP.Net core logging API to show how a logger can be attached to our diagnostic events.</p>
<h2 id="setup" style="position:relative;"><a href="#setup" aria-label="setup permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Setup</h2>
<p>But before we can get started let us first setup a web project with <em>Hot Chocolate</em>:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="27587699414485890000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`mkdir logging
cd logging
dotnet new web
dotnet add package HotChocolate.AspNetCore:9.0.0-preview.5
dotnet add package HotChocolate.AspNetCore.Playground:9.0.0-preview.5`, `27587699414485890000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">mkdir</span> logging
<span class="token builtin class-name">cd</span> logging
dotnet new web
dotnet <span class="token function">add</span> package HotChocolate.AspNetCore:9.0.0-preview.5
dotnet <span class="token function">add</span> package HotChocolate.AspNetCore.Playground:9.0.0-preview.5</code></pre></div>
<h2 id="configure-the-logger" style="position:relative;"><a href="#configure-the-logger" aria-label="configure the logger permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Configure the Logger</h2>
<p>After our project is setup let us start with setting up the ASP.net core logging infrastructure. This is fairly easy with ASP.net core. Head over to the <code class="language-text">Program.cs</code> and replace the builder configuration with the following one.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="49258555826983444000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public static IWebHostBuilder CreateWebHostBuilder(string[] args) =>
    WebHost.CreateDefaultBuilder(args)
        .ConfigureLogging((hostingContext, logging) =>
        {
            logging.ClearProviders();
            logging.AddConsole();
        })
        .UseStartup<Startup>();`, `49258555826983444000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">IWebHostBuilder</span> <span class="token function">CreateWebHostBuilder</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span> <span class="token operator">=></span>
    WebHost<span class="token punctuation">.</span><span class="token function">CreateDefaultBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">ConfigureLogging</span><span class="token punctuation">(</span><span class="token punctuation">(</span>hostingContext<span class="token punctuation">,</span> logging<span class="token punctuation">)</span> <span class="token operator">=></span>
        <span class="token punctuation">{</span>
            logging<span class="token punctuation">.</span><span class="token function">ClearProviders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            logging<span class="token punctuation">.</span><span class="token function">AddConsole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UseStartup</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Startup<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><code class="language-text">ConfigureLogging</code> configures the various logging providers that are then available throughout our <code class="language-text">WebHost</code>. In our simple example we clear all the providers and then add only the console logger.</p>
<p>Next head over to the <code class="language-text">Startup.cs</code> and register the logger with the dependency injection by adding the following line to <code class="language-text">ConfigureServices</code>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="12870634741412190000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddLogging();`, `12870634741412190000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddLogging</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Perfect, now we have setup all the basics and can get started.</p>
<h2 id="diagnostic-observer" style="position:relative;"><a href="#diagnostic-observer" aria-label="diagnostic observer permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Diagnostic Observer</h2>
<p>The <em>Hot Chocolate</em> server provides diagnostic events through a diagnostic source. We can subscribe to these events by providing a diagnostic observer. A diagnostic observer is basically any class that implements our marker interface <code class="language-text">IDiagnosticObserver</code>.</p>
<p>Into this class we can add public methods that are subscribed to the actual diagnostic listener. The methods that shall subscribe to an event have to be annotated to with the <code class="language-text">DiagnosticNameAttribute</code>.</p>
<p>We have listed the various available events and their payloads in our documentation that can be found <a href="https://hotchocolate.io/docs/next/instrumentation">here</a>.</p>
<p>Let us say that in our case we want to write a message to the console whenever a request begins. Moreover, if the request is a query or mutation then we also want to write the result to the console.</p>
<p>Before we add the actual event methods, let us create a class called <code class="language-text">DiagnosticObserver</code>. In order to write events to the logger we need to inject a concrete logger to our class. So, our class could look like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="92676421425258840000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class DiagnosticObserver
    : IDiagnosticObserver
{
    private readonly ILogger _logger;

    public DiagnosticObserver(ILogger<DiagnosticObserver> logger)
    {
        _logger = logger ?? throw new ArgumentNullException(nameof(logger));
    }
}`, `92676421425258840000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DiagnosticObserver</span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IDiagnosticObserver</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">ILogger</span> _logger<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">DiagnosticObserver</span><span class="token punctuation">(</span><span class="token class-name">ILogger<span class="token punctuation">&lt;</span>DiagnosticObserver<span class="token punctuation">></span></span> logger<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _logger <span class="token operator">=</span> logger <span class="token operator">??</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentNullException</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>logger<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Next, let us add our two event methods.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="76826930470934680000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class DiagnosticObserver
        : IDiagnosticObserver
{
    private readonly ILogger _logger;

    public DiagnosticObserver(ILogger<DiagnosticObserver> logger)
    {
        _logger = logger ?? throw new ArgumentNullException(nameof(logger));
    }

    [DiagnosticName(&quot;HotChocolate.Execution.Query&quot;)]
    public void OnQuery(IQueryContext context)
    {
        // This method is used as marker to enable begin and end events
        // in the case that you want to explicitly track the start and the
        // end of this event.
    }

    [DiagnosticName(&quot;HotChocolate.Execution.Query.Start&quot;)]
    public void BeginQueryExecute(IQueryContext context)
    {
        _logger.LogInformation(context.Request.Query);
    }

    [DiagnosticName(&quot;HotChocolate.Execution.Query.Stop&quot;)]
    public void EndQueryExecute(IQueryContext context)
    {
        if(context.Result is IReadOnlyQueryResult result)
        {
            using (var stream = new MemoryStream())
            {
                var resultSerializer = new JsonQueryResultSerializer();
                resultSerializer.SerializeAsync(
                    result, stream).Wait();
                _logger.LogInformation(
                    Encoding.UTF8.GetString(stream.ToArray()));
            }
        }
    }
}`, `76826930470934680000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DiagnosticObserver</span>
        <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IDiagnosticObserver</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">ILogger</span> _logger<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">DiagnosticObserver</span><span class="token punctuation">(</span><span class="token class-name">ILogger<span class="token punctuation">&lt;</span>DiagnosticObserver<span class="token punctuation">></span></span> logger<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _logger <span class="token operator">=</span> logger <span class="token operator">??</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentNullException</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>logger<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DiagnosticName</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Query"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnQuery</span><span class="token punctuation">(</span><span class="token class-name">IQueryContext</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// This method is used as marker to enable begin and end events</span>
        <span class="token comment">// in the case that you want to explicitly track the start and the</span>
        <span class="token comment">// end of this event.</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DiagnosticName</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Query.Start"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">BeginQueryExecute</span><span class="token punctuation">(</span><span class="token class-name">IQueryContext</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _logger<span class="token punctuation">.</span><span class="token function">LogInformation</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Query<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DiagnosticName</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Query.Stop"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">EndQueryExecute</span><span class="token punctuation">(</span><span class="token class-name">IQueryContext</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>Result <span class="token keyword">is</span> <span class="token class-name">IReadOnlyQueryResult</span> result<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MemoryStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token class-name"><span class="token keyword">var</span></span> resultSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">JsonQueryResultSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                resultSerializer<span class="token punctuation">.</span><span class="token function">SerializeAsync</span><span class="token punctuation">(</span>
                    result<span class="token punctuation">,</span> stream<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                _logger<span class="token punctuation">.</span><span class="token function">LogInformation</span><span class="token punctuation">(</span>
                    Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span>stream<span class="token punctuation">.</span><span class="token function">ToArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In order to enable start/stop events we have to add a third method that represents the subscription to the event.</p>
<p>This is only needed when subscribing to activities that consist of a start event and a stop event. These start and stop events allow for measuring performance.</p>
<p>Apart from our standard payloads that are described in our documentation we can also inject the <code class="language-text">Activity</code> instance to your start/stop event and use the high precision time measurement that the diagnostics APIs provide.</p>
<p>The events always provide you with the full context objects that are available in the query and field middleware pipeline. You basically have full access to all the data that you would have access to in a middleware and by this you are able to pick the information you need for your tracing/logging solution and create the logging messages in a structure that fits your needs.</p>
<p>Moreover, you also can use the <code class="language-text">ContextData</code> dictionary on the context objects to share information between your subscription events like a request identifier.</p>
<p>After we have implemented our observer, we have to register it as a service.</p>
<p>Add the following line to the <code class="language-text">ConfigureServices</code> method in our <code class="language-text">Startup.cs</code>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="54568322112907410000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddDiagnosticObserver<DiagnosticObserver>();`, `54568322112907410000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDiagnosticObserver</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DiagnosticObserver<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>With that our logger is ready to receive events. We now just need a GraphQL API that produces events.</p>
<p>For this we add a simple query type:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="54341873713192570000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Query
{
    public string Hello() => &quot;world&quot;;
}`, `54341873713192570000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Query</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token string">"world"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Next we register the query type with our schema by adding the following line to the <code class="language-text">ConfigureServices</code> method in our <code class="language-text">Startup.cs</code>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="25086572793250796000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddGraphQL(c =>
{
    c.RegisterQueryType<Query>();
});`, `25086572793250796000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
<span class="token punctuation">{</span>
    c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Last but not least we have to add our <code class="language-text">GraphQL</code> middleware and in order to write some queries our <code class="language-text">Playground</code> middleware.</p>
<p>Replace the <code class="language-text">Configure</code> method in our <code class="language-text">Startup.cs</code> with the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="61596338010419150000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public void Configure(IApplicationBuilder app, IHostingEnvironment env)
{
    if (env.IsDevelopment())
    {
        app.UseDeveloperExceptionPage();
    }

    app.UseGraphQL();
    app.UsePlayground();

    app.Run(async (context) =>
    {
        await context.Response.WriteAsync(&quot;Hello World!&quot;);
    });
}`, `61596338010419150000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">,</span> <span class="token class-name">IHostingEnvironment</span> env<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token function">IsDevelopment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        app<span class="token punctuation">.</span><span class="token function">UseDeveloperExceptionPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    app<span class="token punctuation">.</span><span class="token function">UseGraphQL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token punctuation">.</span><span class="token function">UsePlayground</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">await</span> context<span class="token punctuation">.</span>Response<span class="token punctuation">.</span><span class="token function">WriteAsync</span><span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>You should now be able to start the GraphQL server.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="76352466590707710000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet run`, `76352466590707710000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet run</code></pre></div>
<p>The server should be accessible through plaground under the following URL <code class="language-text">http://127.0.0.1:5000/playground</code>.</p>
<p>Add the following query and execute it:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="92516943163051230000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  hello
}`, `92516943163051230000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  hello
<span class="token punctuation">}</span></code></pre></div>
<p>The query and the result should now be printed to your console.</p>
<p>This is just a simple example of how to subscribe to our diagnostic events. Checkout our documentation for a list of all of the events available <a href="https://hotchocolate.io/docs/next/instrumentation">here</a>.</p>
<p>We have added this example project to our example repo <a href="https://github.com/ChilliCream/hotchocolate-examples/tree/master/Instrumentation">here</a>.</p>
<p>Also, we have a more complex implementation of a Hot Chocolate ETW event source <a href="https://github.com/ChilliCream/thor-client/tree/master/src/Clients/HotChocolate">here</a>.</p>
<p>Another example is our <a href="https://github.com/ChilliCream/hotchocolate/blob/master/src/Core/Core/Execution/Instrumentation/ApolloTracingDiagnosticObserver.cs">Apollo Tracing implementation</a> that is also based on our instrumentation API.</p>
<p>I hope this little field trip into our instrumentation API gives a little outlook of an often-overlooked feature that is coming with version 9. All of what I showed in this blog is available with preview 5 (9.0.0-preview.5) that we released today.</p>
<p>We will add stitching related events with the next view preview builds.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GraphQL - Hot Chocolate 0.8.0]]></title>
            <link>https://chillicream.com/blog/2019/03/04/hot-chocolate-0.8.0</link>
            <guid>/blog/2019/03/04/hot-chocolate-0.8.0</guid>
            <pubDate>Mon, 04 Mar 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Today we are releasing Hot Chocolate version 8 (0.8.0) which mainly focused on schema stitching and brings our stitching layer to a whole…]]></description>
            <content:encoded><![CDATA[<p>Today we are releasing Hot Chocolate version 8 (0.8.0) which mainly focused on schema stitching and brings our stitching layer to a whole new level.</p>
<h2 id="schema-stitching" style="position:relative;"><a href="#schema-stitching" aria-label="schema stitching permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Schema Stitching</h2>
<p>Since, my last blog post we were heavily at work ironing out bugs and making schema stitching easier.</p>
<p>Now, with the release finished, schema stitching with ASP.Net core has become super easy and feels quite nice to use.</p>
<p>Head over to our new documentation for <a href="https://hotchocolate.io/docs/stitching">schema stitching</a>.</p>
<h2 id="voyager" style="position:relative;"><a href="#voyager" aria-label="voyager permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Voyager</h2>
<p>With version 8 we now provide a GraphQL Voyager middleware. GraphQL Voyager is a nice schema explorer that can be useful during development time. If you want to know more about GraphQL Voyager head over to their <a href="https://github.com/APIs-guru/graphql-voyager">GitHub repo</a>.</p>
<h2 id="authorization" style="position:relative;"><a href="#authorization" aria-label="authorization permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Authorization</h2>
<p>Also, with version 8 we have invested some time to smooth out the <code class="language-text">@authorize</code>-directive.</p>
<p>The <code class="language-text">@authorize</code>-directive does now mirror almost the behavior of the authorize directive.</p>
<p>In contrast to the ASP.Net attribute we can specify the directive on field definitions and thereby have a fine-grained control over what data we want to give access to.</p>
<p>If you are using ASP.Net core then you can use authorization-policies with your <code class="language-text">@authorize</code>-directive giving you even more control over your data.</p>
<p>Head over to our <a href="https://hotchocolate.io/docs/authorization">authorization documentation</a> to learn more.</p>
<h2 id="version-9" style="position:relative;"><a href="#version-9" aria-label="version 9 permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Version 9</h2>
<p>We have already started on quite a few areas for our next release. I can tell you already that, version 9 will be big.</p>
<h3 id="type-system" style="position:relative;"><a href="#type-system" aria-label="type system permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Type System</h3>
<p>The most requested features from users of our API at the moment is to open up the type system. In the beginning we did keep a lot of extension points internal in order to give us some more time to figure out how to make certain areas extendable.</p>
<p>With version 9 we will reinvent the type system. Do not fret, there will be no breaking changes to the public APIs since the APIs that we are changing and making public are currently internal.</p>
<p>With version 9 you will be able to create your own base classes that expose your own descriptors to the users. This will allow for instance to introduce prisma-like filter APIs, or dynamic types that generate members on the base of other schema types.</p>
<h3 id="prisma-like-filtering-for-iqueryable" style="position:relative;"><a href="#prisma-like-filtering-for-iqueryable" aria-label="prisma like filtering for iqueryable permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Prisma-like Filtering for IQueryable</h3>
<p>On top of the new type system we will add new filter types that will allow you to configure filter and sorting inputs that can be used with the paging middleware. If you never heard of Prisma then head over to their web page and checkout their approach to filtering and sorting:</p>
<p><a href="https://www.prisma.io/docs/prisma-graphql-api/reference/queries-qwe1/">Prisma</a></p>
<h3 id="advanced-relay-support" style="position:relative;"><a href="#advanced-relay-support" aria-label="advanced relay support permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Advanced Relay Support</h3>
<p>With version 9 creating relay compliant schemas will be as easy as eating pie. You will no longer be bothered handling schema unique identifiers, since <em>Hot Chocolate</em> will do all of that for you. Also, the node field on the <code class="language-text">Query</code> type will be automatically integrated. So, what we are doing here is removing boilerplate code for you so that you can focus on implementing a great API without having to worry about the relay server spec details.</p>
<h3 id="subscription-stitching" style="position:relative;"><a href="#subscription-stitching" aria-label="subscription stitching permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Subscription Stitching</h3>
<p>We originally envisioned this feature for version 8 but moved this one into version 9 due to the fact that we needed some changes in the type system to handle it. This will make the schema stitching even more complete.</p>
<h3 id="relay-schema-stitching" style="position:relative;"><a href="#relay-schema-stitching" aria-label="relay schema stitching permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Relay Schema Stitching</h3>
<p>With the schema stitching version 8 you have to handle the node field on your own when you stitch multiple relay compliant schemas together. With version 9 we will keep track which id belongs to which remote schema and from which remote schema we have to fetch the data.</p>
<h3 id="hot-chocolate-ui" style="position:relative;"><a href="#hot-chocolate-ui" aria-label="hot chocolate ui permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Hot Chocolate UI</h3>
<p>GraphQL is really awesome, but we are really not happy with the tooling situation. As of now we support GraphiQL, Playground and Voyager for <em>Hot Chocolate</em>, but none of these is a complete solution.</p>
<p>We have started some time ago to create a new developer tool for GraphQL that will replace all of these. We did not base our new UI on GraphiQL since we want to achieve more and create something unique. Look for instance at the tooling around rest, with <em>Postman</em> developers have quite a good tool that enables them to do a lot.</p>
<p>The <em>Hot Chocolate UI</em> will be a developer focused tool that will be able to replace all the GraphQL UIs out there. It already is my favorite tool and we cannot wait to show you the first preview versions of it.</p>
<p>By the way, we are still looking for a cool new chillicream compliant name like Hot Chocolate or Green Donut. So, if you have any cool or funny ideas head over to our slack channel</p>
<h3 id="graphql-compatibility-acceptance-tests" style="position:relative;"><a href="#graphql-compatibility-acceptance-tests" aria-label="graphql compatibility acceptance tests permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>GraphQL Compatibility Acceptance Tests</h3>
<p>With version 8 we have started to invest in the GraphQL Compatibility Acceptance Tests and plan to have them fully implemented and integrated with version 11. This does not mean that we wait until version 11 to use them. Already now we are able to generate some of the test cases. Hopefully, we will have all the parser tests integrated with version 9. This subject is an ongoing effort and we will keep you posted on this one.</p>
<p>For more information on GraphQL Cats visit their <a href="https://github.com/graphql-cats/graphql-cats">GitHub repository</a>.</p>
<h3 id="versioning" style="position:relative;"><a href="#versioning" aria-label="versioning permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Versioning</h3>
<p>With version 9 we will change our versioning and follow the example of react in swapping the leading zero with the nine. So, the version number of version 9 will actually be 9.0.0.</p>
<h2 id="version-10" style="position:relative;"><a href="#version-10" aria-label="version 10 permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Version 10</h2>
<p>With version 10 is in the early planning stages, we will build on the new type system and introduce two new services that will turn Hot Chocolate from a simple server into a GraphQL platform.</p>
<h3 id="schema-registry" style="position:relative;"><a href="#schema-registry" aria-label="schema registry permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Schema Registry</h3>
<p>The schema registry will keep track of the schemas in your company. Moreover, with version 10 of our new <code class="language-text">Hot Chocolate UI</code> you will be able to configure your GraphQL gateways with drag&#x26;drop. This means you will be able to stitch schemas together with an awesome UI and deploy new stitched schemas in seconds.</p>
<h3 id="performance-and-schema-warehouse" style="position:relative;"><a href="#performance-and-schema-warehouse" aria-label="performance and schema warehouse permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Performance and Schema Warehouse</h3>
<p>The second service will collect performance data from all your schemas. You will be able to analyze with the <code class="language-text">Hot Chocolate UI</code> how good or bad you GraphQL servers are performing, which queries are the most used or which queries use the most resources. Furthermore, you will be able to drill into the query tracing results and see which resolvers are performing well or which resolvers are causing issues.</p>
<h2 id="wrapping-things-up" style="position:relative;"><a href="#wrapping-things-up" aria-label="wrapping things up permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Wrapping things up</h2>
<p>We are planning around four to six weeks for version 9 with the first previews coming out in around two weeks.</p>
<p>We will really start hammering out the details on version 9 in the next three weeks.</p>
<p>If you have ideas or suggestions pleas head over to our <a href="https://join.slack.com/t/hotchocolategraphql/shared_invite/enQtNTA4NjA0ODYwOTQ0LTViMzA2MTM4OWYwYjIxYzViYmM0YmZhYjdiNzBjOTg2ZmU1YmMwNDZiYjUyZWZlMzNiMTk1OWUxNWZhMzQwY2Q">slack channel</a> and join the discussion.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GraphQL - Schema Stitching with Version 8]]></title>
            <link>https://chillicream.com/blog/2019/02/20/schema-stitching</link>
            <guid>/blog/2019/02/20/schema-stitching</guid>
            <pubDate>Wed, 20 Feb 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[With version 8 of Hot Chocolate we have mainly focused on schema stitching. One of the most requested features in this area was auto…]]></description>
            <content:encoded><![CDATA[<p>With version 8 of Hot Chocolate we have mainly focused on schema stitching. One of the most requested features in this area was auto-stitching. Auto-stitching will enable us to automatically pull in schemas from other GraphQL servers and merge those into one schema.</p>
<p><strong>What is schema stitching actually?</strong></p>
<p>Schema stitching is the capability to merge multiple GraphQL schemas into one schema that can be queried.</p>
<h2 id="introduction" style="position:relative;"><a href="#introduction" aria-label="introduction permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Introduction</h2>
<p><strong>So, for what is that useful?</strong></p>
<p>In our case we have lots of specialized services that serve data for specific problem domains. Some of these services are GraphQL services, some of them are REST services and yes sadly a little portion of those are still SOAP services.</p>
<p>With <em>Hot Chocolate</em> schema stitching we are able to create a gateway that bundles all those services into one GraphQL schema.</p>
<p><strong>Is schema stitching basically just putting two schemas together?</strong></p>
<p>Just putting two schemas into one and avoid name collisions is simple. But what we want to achieve with schema stitching is one consistent schema.</p>
<p><em>Hot Chocolate</em> schema stitching allows us to really integrate services into one schema by folding types into one another and even renaming or removing parts.</p>
<p>With this we can create a consistent GraphQL schema that hides the implementation details of our backend services and provides the consumer of our endpoint with the capability to fetch the data they need with one call, no under- or over-fetching and most importantly no repeated fetching because we first needed to fetch that special id with which we now can fetch this other thingy.</p>
<h2 id="getting-started" style="position:relative;"><a href="#getting-started" aria-label="getting started permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Getting Started</h2>
<p>In order to showcase how schema stitching works and what the problems are let us assume we have a service like twitter, where a user can post messages.</p>
<p>Moreover, let us assume we have three teams working on internal micro-/domain-services that handle certain aspects of that service.</p>
<p>The first service is handling the message stream and has the following schema:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="42878916971047110000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  messages(userId: ID!): [Message!]
  message(messageId: ID!): Message
}

type Mutation {
  newMessage(input: NewMessageInput!): NewMessagePayload!
}

type Message {
  id: ID!
  text: String!
  createdBy: ID!
  createdAt: DateTime!
  tags: [String!]
}

type NewMessageInput {
  text: String!
  tags: [String!]
}

type NewMessagePayload {
  message: Message
}`, `42878916971047110000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">messages</span><span class="token punctuation">(</span><span class="token attr-name">userId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Message<span class="token operator">!</span><span class="token punctuation">]</span>
  <span class="token attr-name">message</span><span class="token punctuation">(</span><span class="token attr-name">messageId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Message
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Mutation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">newMessage</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> NewMessageInput<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> NewMessagePayload<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">text</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">createdBy</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">createdAt</span><span class="token punctuation">:</span> DateTime<span class="token operator">!</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>String<span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewMessageInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">text</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>String<span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewMessagePayload</span> <span class="token punctuation">{</span>
  <span class="token attr-name">message</span><span class="token punctuation">:</span> Message
<span class="token punctuation">}</span></code></pre></div>
<p>The second service is handling the users of the services and has the following schema:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="14002426098549981000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  user(userId: ID!): User!
  users: [User!]
}

type Mutation {
  newUser(input: NewUserInput!): NewUserPayload!
  resetPassword(input: ResetPasswordInput!): ResetPasswordPayload!
}

type NewUserInput {
  username: String!
  password: String!
}

type ResetPasswordInput {
  username: String!
  password: String!
}

type NewUserPayload {
  user: User
}

type ResetPasswordPayload {
  user: User
}

type User {
  id: ID!
  username: String!
}`, `14002426098549981000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">user</span><span class="token punctuation">(</span><span class="token attr-name">userId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> User<span class="token operator">!</span>
  <span class="token attr-name">users</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>User<span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Mutation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">newUser</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> NewUserInput<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> NewUserPayload<span class="token operator">!</span>
  <span class="token attr-name">resetPassword</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> ResetPasswordInput<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> ResetPasswordPayload<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewUserInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">username</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">password</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ResetPasswordInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">username</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">password</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewUserPayload</span> <span class="token punctuation">{</span>
  <span class="token attr-name">user</span><span class="token punctuation">:</span> User
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ResetPasswordPayload</span> <span class="token punctuation">{</span>
  <span class="token attr-name">user</span><span class="token punctuation">:</span> User
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">username</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Last but not least we have a third service handling the message analytics. In our example case we keep it simple and our analytics service just tracks three different counters per message. The schema for this service looks like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="83680624894130010000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  analytics(messageId: ID!, type: CounterType!): MessageAnalytics
}

type MessageAnalytics {
  id: ID!
  messageId: ID!
  count: Int!
  type: CounterType!
}

enum CounterType {
  VIEWS
  LIKES
  REPLIES
}`, `83680624894130010000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">analytics</span><span class="token punctuation">(</span><span class="token attr-name">messageId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token attr-name">type</span><span class="token punctuation">:</span> CounterType<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> MessageAnalytics
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">MessageAnalytics</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">messageId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">count</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
  <span class="token attr-name">type</span><span class="token punctuation">:</span> CounterType<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">CounterType</span> <span class="token punctuation">{</span>
  <span class="token constant">VIEWS</span>
  <span class="token constant">LIKES</span>
  <span class="token constant">REPLIES</span>
<span class="token punctuation">}</span></code></pre></div>
<p>With those three separate schemas our UI team would have to fetch from multiple endpoints.</p>
<p>Even worse for our UI team, in order to build a stream view that shows the message text and the name of the user who posted the message, they would have to first fetch all the messages and could only then fetch the names of the users.</p>
<p>This is actually one of the very things GraphQL tries to solve.</p>
<h2 id="setting-up-our-server" style="position:relative;"><a href="#setting-up-our-server" aria-label="setting up our server permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Setting up our server</h2>
<p>Before we start with stitching itself let`s get into how to setup our server.</p>
<p>Every <em>Hot Chocolate</em> server can be a stitching server. This means in order to get started we can just use the <em>Hot Chocolate</em> GraphQL server template and modify it a little bit to make the server a stitching server.</p>
<p>If you do not have the <em>Hot Chocolate</em> GraphQL server template installed execute first the following command.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="71763101329018890000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet new -i HotChocolate.Templates.Server`, `71763101329018890000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet new -i HotChocolate.Templates.Server</code></pre></div>
<p>After that we will create a new folder and add a new server to that folder.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="25444223018227130000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`mkdir stitching-demo
cd stitching-demo
dotnet new graphql-server`, `25444223018227130000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">mkdir</span> stitching-demo
<span class="token builtin class-name">cd</span> stitching-demo
dotnet new graphql-server</code></pre></div>
<p>With this we have now a functioning GraphQL server with a simple hello world example.</p>
<p>In order to make this server a stitching server we now have to add the <em>Hot Chocolate</em> stitching engine.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="25035818969360646000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet add package HotChocolate.Stitching`, `25035818969360646000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet <span class="token function">add</span> package HotChocolate.Stitching</code></pre></div>
<p>Now that our GraphQL server is ready we can start to configure the endpoints of our remote schemas.</p>
<blockquote>
<p>Remote schemas are what we call the GraphQL schemas that we want to include into our merged schema. Remote schemas can be any GraphQL Spec compliant server (Apollo, Sangria, Hot Chocolate etc.) that serves its schema over HTTP. Also we can include local schemas that are created with the <em>Hot Chocolate</em> .net API.</p>
</blockquote>
<p>The endpoints are declared by using a named <code class="language-text">HttpClient</code> via the HttpClient factory that is included with ASP.net core.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="65878822343270425000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddHttpClient(&quot;messages&quot;, (sp, client) =>
{
  client.BaseAddress = new Uri(&quot;http://127.0.0.1:5050&quot;);
});
services.AddHttpClient(&quot;users&quot;, (sp, client) =>
{
  client.BaseAddress = new Uri(&quot;http://127.0.0.1:5051&quot;);
});
services.AddHttpClient(&quot;analytics&quot;, (sp, client) =>
{
  client.BaseAddress = new Uri(&quot;http://127.0.0.1:5052&quot;);
});`, `65878822343270425000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddHttpClient</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>sp<span class="token punctuation">,</span> client<span class="token punctuation">)</span> <span class="token operator">=></span>
<span class="token punctuation">{</span>
  client<span class="token punctuation">.</span>BaseAddress <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1:5050"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
services<span class="token punctuation">.</span><span class="token function">AddHttpClient</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>sp<span class="token punctuation">,</span> client<span class="token punctuation">)</span> <span class="token operator">=></span>
<span class="token punctuation">{</span>
  client<span class="token punctuation">.</span>BaseAddress <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1:5051"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
services<span class="token punctuation">.</span><span class="token function">AddHttpClient</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>sp<span class="token punctuation">,</span> client<span class="token punctuation">)</span> <span class="token operator">=></span>
<span class="token punctuation">{</span>
  client<span class="token punctuation">.</span>BaseAddress <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1:5052"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Now let`s remove the parts from the server template that we don't need.</p>
<blockquote>
<p>We will show some strategies of how to handle authenticated services later on.</p>
</blockquote>
<div
              class="gatsby-code-button-container"
              data-toaster-id="26147003344433470000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddDataLoaderRegistry();

services.AddGraphQL(sp => Schema.Create(c =>
{
    c.RegisterQueryType<Query>();
}));`, `26147003344433470000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddDataLoaderRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>sp <span class="token operator">=></span> Schema<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
<span class="token punctuation">{</span>
    c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterQueryType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Query<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2 id="stitching-builder" style="position:relative;"><a href="#stitching-builder" aria-label="stitching builder permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Stitching Builder</h2>
<p>The stitching builder is the main API to configure a stitched GraphQL schema (GraphQL gateway). In order to have a simple auto-merge we have just to provide all the necessary schema names and the stitching layer will fetch the remote schemas via introspection on the first call to the stitched schema.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="38119024590595015000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddStitchedSchema(builder => builder
  .AddSchemaFromHttp(&quot;messages&quot;)
  .AddSchemaFromHttp(&quot;users&quot;)
  .AddSchemaFromHttp(&quot;analytics&quot;));`, `38119024590595015000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddStitchedSchema</span><span class="token punctuation">(</span>builder <span class="token operator">=></span> builder
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Since a stitched schema is essentially no different to any other GraphQL schema, we can configure custom types, add custom middleware or do any other thing that we could do with a <em>Hot Chocolate</em> GraphQL schema.</p>
<p>In our example we are stitching together schemas that come with non-spec scalar types like <code class="language-text">DateTime</code>. So, the stitching layer would report a schema error when stitching the above three schemas together since the <code class="language-text">DateTime</code> scalar is unknown.</p>
<p>In order to declare this custom scalar we can register the extended scalar set like with a regular <em>Hot Chocolate</em> GraphQL schema through the <code class="language-text">AddSchemaConfiguration</code>-method on the stitching builder.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="12434246981665309000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddStitchedSchema(builder => builder
  .AddSchemaFromHttp(&quot;messages&quot;)
  .AddSchemaFromHttp(&quot;users&quot;)
  .AddSchemaFromHttp(&quot;analytics&quot;))
  .AddSchemaConfiguration(c =>
  {
    c.RegisterExtendedScalarTypes();
  })`, `12434246981665309000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddStitchedSchema</span><span class="token punctuation">(</span>builder <span class="token operator">=></span> builder
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaConfiguration</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
  <span class="token punctuation">{</span>
    c<span class="token punctuation">.</span><span class="token function">RegisterExtendedScalarTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<blockquote>
<p>More information about our scalars can be found <a href="https://hotchocolate.io/docs/custom-scalar-types">here</a>.</p>
</blockquote>
<p>With this in place our stitched schema now looks like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="71045515482748445000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  messages(userId: ID!): [Message!]
  message(messageId: ID!): Message
  user(userId: ID!): User!
  users: [User!]
  analytics(messageId: ID!, type: CounterType!): MessageAnalytics
}

type Mutation {
  newMessage(input: NewMessageInput!): NewMessagePayload!
  newUser(input: NewUserInput!): NewUserPayload!
  resetPassword(input: ResetPasswordInput!): ResetPasswordPayload!
}

type Message {
  id: ID!
  text: String!
  createdBy: ID!
  createdAt: DateTime!
  tags: [String!]
}

type NewMessageInput {
  text: String!
  tags: [String!]
}

type NewMessagePayload {
  message: Message
}

type NewUserInput {
  username: String!
  password: String!
}

type ResetPasswordInput {
  username: String!
  password: String!
}

type NewUserPayload {
  user: User
}

type ResetPasswordPayload {
  user: User
}

type User {
  id: ID!
  username: String!
}

type MessageAnalytics {
  id: ID!
  messageId: ID!
  count: Int!
  type: CounterType!
}

enum CounterType {
  VIEWS
  LIKES
  REPLIES
}`, `71045515482748445000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">messages</span><span class="token punctuation">(</span><span class="token attr-name">userId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Message<span class="token operator">!</span><span class="token punctuation">]</span>
  <span class="token attr-name">message</span><span class="token punctuation">(</span><span class="token attr-name">messageId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Message
  <span class="token attr-name">user</span><span class="token punctuation">(</span><span class="token attr-name">userId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> User<span class="token operator">!</span>
  <span class="token attr-name">users</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>User<span class="token operator">!</span><span class="token punctuation">]</span>
  <span class="token attr-name">analytics</span><span class="token punctuation">(</span><span class="token attr-name">messageId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token attr-name">type</span><span class="token punctuation">:</span> CounterType<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> MessageAnalytics
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Mutation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">newMessage</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> NewMessageInput<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> NewMessagePayload<span class="token operator">!</span>
  <span class="token attr-name">newUser</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> NewUserInput<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> NewUserPayload<span class="token operator">!</span>
  <span class="token attr-name">resetPassword</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> ResetPasswordInput<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> ResetPasswordPayload<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">text</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">createdBy</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">createdAt</span><span class="token punctuation">:</span> DateTime<span class="token operator">!</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>String<span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewMessageInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">text</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>String<span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewMessagePayload</span> <span class="token punctuation">{</span>
  <span class="token attr-name">message</span><span class="token punctuation">:</span> Message
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewUserInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">username</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">password</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ResetPasswordInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">username</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">password</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewUserPayload</span> <span class="token punctuation">{</span>
  <span class="token attr-name">user</span><span class="token punctuation">:</span> User
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ResetPasswordPayload</span> <span class="token punctuation">{</span>
  <span class="token attr-name">user</span><span class="token punctuation">:</span> User
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">username</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">MessageAnalytics</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">messageId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">count</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
  <span class="token attr-name">type</span><span class="token punctuation">:</span> CounterType<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">CounterType</span> <span class="token punctuation">{</span>
  <span class="token constant">VIEWS</span>
  <span class="token constant">LIKES</span>
  <span class="token constant">REPLIES</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We have just achieved a simple schema merge without doing a lot of work. But honestly we would like to change some of the types. While the stitching result is nice, we would like to integrate the types with each other.</p>
<h3 id="extending-types" style="position:relative;"><a href="#extending-types" aria-label="extending types permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Extending Types</h3>
<p>So, the first thing that we would like to have is a new field on the query that is called <code class="language-text">me</code>. The <code class="language-text">me</code> field shall represent the currently signed in user of our service.</p>
<p>Further, the user type should expose the message stream of the user, this way we could fetch the messages of the signed in user like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="78568045938757860000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  me {
    messages {
      text
      tags
    }
  }
}`, `78568045938757860000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  me <span class="token punctuation">{</span>
    messages <span class="token punctuation">{</span>
      text
      tags
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In order to extend types in a stitched schema we can use the new GraphQL extend syntax that was introduced with the 2018 spec.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="96024054710929400000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`extend type Query {
  me: User! @delegate(schema: &quot;users&quot;, path: &quot;user(id: \$contextData:UserId)&quot;)
}

extend type User {
  messages: [Message!]
  @delegate(schema: &quot;messages&quot;, path: &quot;messages(userId: \$fields:Id)&quot;)
}`, `96024054710929400000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">me</span><span class="token punctuation">:</span> User<span class="token operator">!</span> <span class="token directive function">@delegate</span><span class="token punctuation">(</span><span class="token attr-name">schema</span><span class="token punctuation">:</span> <span class="token string">"users"</span><span class="token punctuation">,</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token string">"user(id: $contextData:UserId)"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">messages</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Message<span class="token operator">!</span><span class="token punctuation">]</span>
  <span class="token directive function">@delegate</span><span class="token punctuation">(</span><span class="token attr-name">schema</span><span class="token punctuation">:</span> <span class="token string">"messages"</span><span class="token punctuation">,</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token string">"messages(userId: $fields:Id)"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>With just that and no further code needed we have specified how the GraphQL stitching engine shall rewrite our schema.</p>
<p>Let us dissect the above GraphQL SDL in order to understand what it does.</p>
<p>First, let us have a look at the <code class="language-text">Query</code> extension. We declared a field like we would do with the schema-first approach. After that we annotated the field with the <code class="language-text">delegate</code> directive. The <code class="language-text">delegate</code> directive basically works like a middleware that delegates calls to to a remote schema.</p>
<p>The <code class="language-text">path</code>-argument on the <code class="language-text">delegate</code> directive specifies how to fetch the data from the remote schema. The selection path can have multiple levels. So, if we wanted to fetch just the username we could do that like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="92438373730054620000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`user(id: \$contextData:UserId).username`, `92438373730054620000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql">user<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token variable">$contextData</span><span class="token punctuation">:</span>UserId<span class="token punctuation">)</span>.username</code></pre></div>
<p>Moreover, we are using a special variable that can access the resolver context.</p>
<p>Currently this variable has four scopes:</p>
<ul>
<li>
<p>Arguments</p>
<p>Access arguments of the annotated field field: <code class="language-text">$arguments:ArgumentName</code></p>
</li>
<li>
<p>Fields</p>
<p>Access fields of the declaring type: <code class="language-text">$fields:FieldName</code></p>
</li>
<li>
<p>ContextData</p>
<p>Access properties of the request context data map: <code class="language-text">$contextData:Key</code></p>
</li>
<li>
<p>ScopedContextData</p>
<p>Access properties of the scoped field context data map: <code class="language-text">$contextData:Key</code></p>
</li>
</ul>
<p>The context data can be used to map custom properties into our GraphQL resolvers. In our case we will use it to map the internal user ID from the user claims into our context data map. This allows us to have some kind of abstraction between the actual HttpRequest and the data that is needed to process a GraphQL request.</p>
<blockquote>
<p>Documentation on how to add custom context data from a http request can be found <a href="https://hotchocolate.io/docs/custom-context">here</a></p>
</blockquote>
<p>OK, let`s sum this up, with the <code class="language-text">delegate</code> directive we are able to create powerful stitching resolvers without writing one line of c# code. Furthermore, we are able to create new types that make the API richer without those types having any representation in any of the remote schemas.</p>
<p>In order to get our extensions integrated we need to add the extensions to our stitching builder. Like with the schema we have multiple extension methods to load the GraphQL SDL from a file or a string and so on.</p>
<p>In our case let`s say we are loading it from a file called <code class="language-text">Extensions.graphql</code>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="86529717079642210000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddStitchedSchema(builder => builder
  .AddSchemaFromHttp(&quot;messages&quot;)
  .AddSchemaFromHttp(&quot;users&quot;)
  .AddSchemaFromHttp(&quot;analytics&quot;))
  .AddExtensionsFromFile(&quot;./graphql/Extensions.graphql&quot;)
  .AddSchemaConfiguration(c =>
  {
    c.RegisterExtendedScalarTypes();
  })`, `86529717079642210000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddStitchedSchema</span><span class="token punctuation">(</span>builder <span class="token operator">=></span> builder
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddExtensionsFromFile</span><span class="token punctuation">(</span><span class="token string">"./graphql/Extensions.graphql"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaConfiguration</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
  <span class="token punctuation">{</span>
    c<span class="token punctuation">.</span><span class="token function">RegisterExtendedScalarTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>Now with all of this in place our schema looks like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="65839536193554490000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  me: User!
  messages(userId: ID!): [Message!]
  message(messageId: ID!): Message
  user(userId: ID!): User!
  users: [User!]
  analytics(messageId: ID!, type: CounterType!): MessageAnalytics
}

type Mutation {
  newMessage(input: NewMessageInput!): NewMessagePayload!
  newUser(input: NewUserInput!): NewUserPayload!
  resetPassword(input: ResetPasswordInput!): ResetPasswordPayload!
}

type Message {
  id: ID!
  text: String!
  createdBy: ID!
  createdAt: DateTime!
  tags: [String!]
}

type NewMessageInput {
  text: String!
  tags: [String!]
}

type NewMessagePayload {
  message: Message
}

type NewUserInput {
  username: String!
  password: String!
}

type ResetPasswordInput {
  username: String!
  password: String!
}

type NewUserPayload {
  user: User
}

type ResetPasswordPayload {
  user: User
}

type User {
  id: ID!
  username: String!
  messages: [Message!]
}

type MessageAnalytics {
  id: ID!
  messageId: ID!
  count: Int!
  type: CounterType!
}

enum CounterType {
  VIEWS
  LIKES
  REPLIES
}`, `65839536193554490000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">me</span><span class="token punctuation">:</span> User<span class="token operator">!</span>
  <span class="token attr-name">messages</span><span class="token punctuation">(</span><span class="token attr-name">userId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Message<span class="token operator">!</span><span class="token punctuation">]</span>
  <span class="token attr-name">message</span><span class="token punctuation">(</span><span class="token attr-name">messageId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Message
  <span class="token attr-name">user</span><span class="token punctuation">(</span><span class="token attr-name">userId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> User<span class="token operator">!</span>
  <span class="token attr-name">users</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>User<span class="token operator">!</span><span class="token punctuation">]</span>
  <span class="token attr-name">analytics</span><span class="token punctuation">(</span><span class="token attr-name">messageId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token attr-name">type</span><span class="token punctuation">:</span> CounterType<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> MessageAnalytics
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Mutation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">newMessage</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> NewMessageInput<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> NewMessagePayload<span class="token operator">!</span>
  <span class="token attr-name">newUser</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> NewUserInput<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> NewUserPayload<span class="token operator">!</span>
  <span class="token attr-name">resetPassword</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> ResetPasswordInput<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> ResetPasswordPayload<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">text</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">createdBy</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">createdAt</span><span class="token punctuation">:</span> DateTime<span class="token operator">!</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>String<span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewMessageInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">text</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>String<span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewMessagePayload</span> <span class="token punctuation">{</span>
  <span class="token attr-name">message</span><span class="token punctuation">:</span> Message
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewUserInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">username</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">password</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ResetPasswordInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">username</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">password</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewUserPayload</span> <span class="token punctuation">{</span>
  <span class="token attr-name">user</span><span class="token punctuation">:</span> User
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ResetPasswordPayload</span> <span class="token punctuation">{</span>
  <span class="token attr-name">user</span><span class="token punctuation">:</span> User
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">username</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">messages</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Message<span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">MessageAnalytics</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">messageId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">count</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
  <span class="token attr-name">type</span><span class="token punctuation">:</span> CounterType<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">CounterType</span> <span class="token punctuation">{</span>
  <span class="token constant">VIEWS</span>
  <span class="token constant">LIKES</span>
  <span class="token constant">REPLIES</span>
<span class="token punctuation">}</span></code></pre></div>
<h3 id="renaming-and-removing-types" style="position:relative;"><a href="#renaming-and-removing-types" aria-label="renaming and removing types permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Renaming and Removing Types</h3>
<p>Though this is nice, we would like to go even further and enhance our <code class="language-text">Message</code> type like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="46633851640450570000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Message {
  id: ID!
  text: String!
  createdBy: User
  createdById: ID!
  createdAt: DateTime!
  tags: [String!]
  views: Int!
  likes: Int!
  replies: Int!
}`, `46633851640450570000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">text</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">createdBy</span><span class="token punctuation">:</span> User
  <span class="token attr-name">createdById</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">createdAt</span><span class="token punctuation">:</span> DateTime<span class="token operator">!</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>String<span class="token operator">!</span><span class="token punctuation">]</span>
  <span class="token attr-name">views</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
  <span class="token attr-name">likes</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
  <span class="token attr-name">replies</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Moreover, we would like to remove the <code class="language-text">analytics</code> field from our query type since we have integrated the analytics data directly into our <code class="language-text">Message</code> type.</p>
<p>Since with the root field gone we have no way of accessing <code class="language-text">MessageAnalytics</code> and <code class="language-text">CounterType</code>, let`s also get rid of these types.</p>
<p>The stitching builder has powerful refactoring functions that even can be extended by writing custom document- and type-rewriters.</p>
<p>In order to remove a field or a type we can tell the stitching builder to ignore them by calling one of the ignore extension methods.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="61346748605356786000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddStitchedSchema(builder => builder
  .AddSchemaFromHttp(&quot;messages&quot;)
  .AddSchemaFromHttp(&quot;users&quot;)
  .AddSchemaFromHttp(&quot;analytics&quot;))
  .AddExtensionsFromFile(&quot;./graphql/Extensions.graphql&quot;)
  .IgnoreField(&quot;analytics&quot;, &quot;Query&quot;, &quot;analytics&quot;)
  .IgnoreType(&quot;analytics&quot;, &quot;MessageAnalytics&quot;)
  .IgnoreType(&quot;analytics&quot;, &quot;CounterType&quot;)
  .AddSchemaConfiguration(c =>
  {
    c.RegisterExtendedScalarTypes();
  })`, `61346748605356786000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddStitchedSchema</span><span class="token punctuation">(</span>builder <span class="token operator">=></span> builder
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddExtensionsFromFile</span><span class="token punctuation">(</span><span class="token string">"./graphql/Extensions.graphql"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">IgnoreField</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token string">"Query"</span><span class="token punctuation">,</span> <span class="token string">"analytics"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">IgnoreType</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token string">"MessageAnalytics"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">IgnoreType</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token string">"CounterType"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaConfiguration</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
  <span class="token punctuation">{</span>
    c<span class="token punctuation">.</span><span class="token function">RegisterExtendedScalarTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<blockquote>
<p>There are also methods for renaming types and fields where the stitching engine will take care that the schema is consitently rewritten so that all the type references will refer to the corrent new type/field name.</p>
</blockquote>
<p>With that we have removed the types from our stitched schema. Now, let us move on to extend our message type.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="37480410450120140000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`extend type Message {
  createdBy: User!
  @delegate(schema: &quot;users&quot;, path: &quot;user(id: \$fields:createdById)&quot;)
  views: Int! @delegate(schema: &quot;analytics&quot;, path: &quot;analytics(id: \$fields:id)&quot;)
  likes: Int! @delegate(schema: &quot;analytics&quot;, path: &quot;analytics(id: \$fields:id)&quot;)
  replies: Int!
  @delegate(schema: &quot;analytics&quot;, path: &quot;analytics(id: \$fields:id)&quot;)
}`, `37480410450120140000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span>
  <span class="token attr-name">createdBy</span><span class="token punctuation">:</span> User<span class="token operator">!</span>
  <span class="token directive function">@delegate</span><span class="token punctuation">(</span><span class="token attr-name">schema</span><span class="token punctuation">:</span> <span class="token string">"users"</span><span class="token punctuation">,</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token string">"user(id: $fields:createdById)"</span><span class="token punctuation">)</span>
  <span class="token attr-name">views</span><span class="token punctuation">:</span> Int<span class="token operator">!</span> <span class="token directive function">@delegate</span><span class="token punctuation">(</span><span class="token attr-name">schema</span><span class="token punctuation">:</span> <span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token string">"analytics(id: $fields:id)"</span><span class="token punctuation">)</span>
  <span class="token attr-name">likes</span><span class="token punctuation">:</span> Int<span class="token operator">!</span> <span class="token directive function">@delegate</span><span class="token punctuation">(</span><span class="token attr-name">schema</span><span class="token punctuation">:</span> <span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token string">"analytics(id: $fields:id)"</span><span class="token punctuation">)</span>
  <span class="token attr-name">replies</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
  <span class="token directive function">@delegate</span><span class="token punctuation">(</span><span class="token attr-name">schema</span><span class="token punctuation">:</span> <span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token string">"analytics(id: $fields:id)"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Since we introduced a new field <code class="language-text">createdBy</code> that basically overwrites the field that we have already declared on our original <code class="language-text">Message</code> type, we need to rename the original field <code class="language-text">createdBy</code> to <code class="language-text">createdById</code> so that we are still able to use it.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="57024876168849040000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddStitchedSchema(builder => builder
  .AddSchemaFromHttp(&quot;messages&quot;)
  .AddSchemaFromHttp(&quot;users&quot;)
  .AddSchemaFromHttp(&quot;analytics&quot;))
  .AddExtensionsFromFile(&quot;./graphql/Extensions.graphql&quot;)
  .IgnoreField(&quot;analytics&quot;, &quot;Query&quot;, &quot;analytics&quot;)
  .IgnoreType(&quot;analytics&quot;, &quot;MessageAnalytics&quot;)
  .IgnoreType(&quot;analytics&quot;, &quot;CounterType&quot;)
  .RenameField(&quot;messages&quot;, &quot;Message&quot;, &quot;createdBy&quot;, &quot;createdById&quot;)
  .AddSchemaConfiguration(c =>
  {
    c.RegisterExtendedScalarTypes();
  })`, `57024876168849040000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddStitchedSchema</span><span class="token punctuation">(</span>builder <span class="token operator">=></span> builder
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddExtensionsFromFile</span><span class="token punctuation">(</span><span class="token string">"./graphql/Extensions.graphql"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">IgnoreField</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token string">"Query"</span><span class="token punctuation">,</span> <span class="token string">"analytics"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">IgnoreType</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token string">"MessageAnalytics"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">IgnoreType</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token string">"CounterType"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">RenameField</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">,</span> <span class="token string">"Message"</span><span class="token punctuation">,</span> <span class="token string">"createdBy"</span><span class="token punctuation">,</span> <span class="token string">"createdById"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaConfiguration</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
  <span class="token punctuation">{</span>
    c<span class="token punctuation">.</span><span class="token function">RegisterExtendedScalarTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<blockquote>
<p>It is important to now that the document- and type-rewriters are executed before the schemas are merged and the extensions integrated.</p>
</blockquote>
<p>Our new schema now looks like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="37486154678926040000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  me: User!
  messages(userId: ID!): [Message!]
  message(messageId: ID!): Message
  user(userId: ID!): User!
  users: [User!]
}

type Mutation {
  newMessage(input: NewMessageInput!): NewMessagePayload!
  newUser(input: NewUserInput!): NewUserPayload!
  resetPassword(input: ResetPasswordInput!): ResetPasswordPayload!
}

type Message {
  id: ID!
  text: String!
  createdBy: User
  createdById: ID!
  createdAt: DateTime!
  tags: [String!]
  views: Int!
  likes: Int!
  replies: Int!
}

type NewMessageInput {
  text: String!
  tags: [String!]
}

type NewMessagePayload {
  message: Message
}

type NewUserInput {
  username: String!
  password: String!
}

type ResetPasswordInput {
  username: String!
  password: String!
}

type NewUserPayload {
  user: User
}

type ResetPasswordPayload {
  user: User
}

type User {
  id: ID!
  username: String!
  messages: [Message!]
}`, `37486154678926040000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">me</span><span class="token punctuation">:</span> User<span class="token operator">!</span>
  <span class="token attr-name">messages</span><span class="token punctuation">(</span><span class="token attr-name">userId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Message<span class="token operator">!</span><span class="token punctuation">]</span>
  <span class="token attr-name">message</span><span class="token punctuation">(</span><span class="token attr-name">messageId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Message
  <span class="token attr-name">user</span><span class="token punctuation">(</span><span class="token attr-name">userId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> User<span class="token operator">!</span>
  <span class="token attr-name">users</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>User<span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Mutation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">newMessage</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> NewMessageInput<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> NewMessagePayload<span class="token operator">!</span>
  <span class="token attr-name">newUser</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> NewUserInput<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> NewUserPayload<span class="token operator">!</span>
  <span class="token attr-name">resetPassword</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> ResetPasswordInput<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> ResetPasswordPayload<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">text</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">createdBy</span><span class="token punctuation">:</span> User
  <span class="token attr-name">createdById</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">createdAt</span><span class="token punctuation">:</span> DateTime<span class="token operator">!</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>String<span class="token operator">!</span><span class="token punctuation">]</span>
  <span class="token attr-name">views</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
  <span class="token attr-name">likes</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
  <span class="token attr-name">replies</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewMessageInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">text</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>String<span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewMessagePayload</span> <span class="token punctuation">{</span>
  <span class="token attr-name">message</span><span class="token punctuation">:</span> Message
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewUserInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">username</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">password</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ResetPasswordInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">username</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">password</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewUserPayload</span> <span class="token punctuation">{</span>
  <span class="token attr-name">user</span><span class="token punctuation">:</span> User
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ResetPasswordPayload</span> <span class="token punctuation">{</span>
  <span class="token attr-name">user</span><span class="token punctuation">:</span> User
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">username</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">messages</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Message<span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<h3 id="query-rewriter" style="position:relative;"><a href="#query-rewriter" aria-label="query rewriter permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Query Rewriter</h3>
<p>As can be seen, it is quite simple to stitch multiple schemas together and enhance them with the stitching builder.</p>
<p><strong>But how can we go further and hook into the query rewriter of the stitching engine?</strong></p>
<p>Let us for instance try to get rid of the <code class="language-text">createdById</code> field of the <code class="language-text">Message</code> type as we actually do not want to expose this field to the consumer of the stitched schema.</p>
<p>Since our resolver for the newly introduced <code class="language-text">createdBy</code> field is dependent on the <code class="language-text">createdById</code> field in order to fetch the <code class="language-text">User</code> from the remote schema, we would need to be able to request it as some kind of a hidden field whenever a <code class="language-text">Message</code> object is resolved.</p>
<p>We could then write a little field middleware that copies us the hidden field data into our scoped context data, so that we are consequently able to use the id in our <code class="language-text">delegate</code> directive by accessing the <code class="language-text">createdById</code> via the scoped context data instead of referring to a field of the <code class="language-text">Message</code> type.</p>
<p>The stitching engine allows us to hook into the the query rewrite process and add our own rewrite logic that could add fields or even large sub-queries.</p>
<p>The first thing we need to do here is to create a new class that inherits from <code class="language-text">QueryDelegationRewriterBase</code>.</p>
<p>The base class exposes two virtual methods <code class="language-text">OnRewriteField</code> and <code class="language-text">OnRewriteSelectionSet</code>.</p>
<p>A selection set describes a selection of fields and fragments on a certain type.</p>
<p>So, in order to fetch a hidden field every time a certain type is requested we would want to overwrite <code class="language-text">OnRewriteSelectionSet</code>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="21019363205851517000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`private class AddCreatedByIdQueryRewriter
    : QueryDelegationRewriterBase
{
    public override SelectionSetNode OnRewriteSelectionSet(
        NameString targetSchemaName,
        IOutputType outputType,
        IOutputField outputField,
        SelectionSetNode selectionSet)
    {
        if(outputType.NamedType() is ObjectType objectType
          && objectType.Name.Equals(&quot;Message&quot;))
        {
            return selectionSet.AddSelection(
                new FieldNode
                (
                    null,
                    new NameNode(&quot;createdBy&quot;),
                    new NameNode(&quot;createdById&quot;),
                    Array.Empty<DirectiveNode>(),
                    Array.Empty<ArgumentNode>(),
                    null
                ));
        }

        return selectionSet;
    }
}`, `21019363205851517000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">AddCreatedByIdQueryRewriter</span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">QueryDelegationRewriterBase</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name">SelectionSetNode</span> <span class="token function">OnRewriteSelectionSet</span><span class="token punctuation">(</span>
        <span class="token class-name">NameString</span> targetSchemaName<span class="token punctuation">,</span>
        <span class="token class-name">IOutputType</span> outputType<span class="token punctuation">,</span>
        <span class="token class-name">IOutputField</span> outputField<span class="token punctuation">,</span>
        <span class="token class-name">SelectionSetNode</span> selectionSet<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>outputType<span class="token punctuation">.</span><span class="token function">NamedType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token class-name">ObjectType</span> objectType
          <span class="token operator">&amp;&amp;</span> objectType<span class="token punctuation">.</span>Name<span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span><span class="token string">"Message"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> selectionSet<span class="token punctuation">.</span><span class="token function">AddSelection</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FieldNode</span>
                <span class="token punctuation">(</span>
                    <span class="token keyword">null</span><span class="token punctuation">,</span>
                    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NameNode</span><span class="token punctuation">(</span><span class="token string">"createdBy"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NameNode</span><span class="token punctuation">(</span><span class="token string">"createdById"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    Array<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Empty</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DirectiveNode<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    Array<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Empty</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ArgumentNode<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token keyword">null</span>
                <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> selectionSet<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The syntax nodes have a lot of little rewrite helpers like <code class="language-text">AddSelection</code>. These helper methods basically branch of the syntax tree and return a new version that contains the applied change.</p>
<p>In our case we get a new <code class="language-text">SelectionSetNode</code> that now also contains a field <code class="language-text">createdBy</code> with an alias <code class="language-text">createdById</code>. In a real-world implementation we should use a more complex alias name like <code class="language-text">___internal_field_createdById</code> in order to avoid collisions with field selections of the query.</p>
<p>Query delegation rewriters are registered with the dependency injection and not with our stitching builder.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="61843728479289100000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddQueryDelegationRewriter<AddCreatedByIdQueryRewriter>();`, `61843728479289100000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddQueryDelegationRewriter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AddCreatedByIdQueryRewriter<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<blockquote>
<p>Query delegation rewriters are hosted as scoped services and can be injected with <code class="language-text">IStitchingContext</code> and <code class="language-text">ISchema</code> in order to access the remote schemas or the stitched schema for advanced type information.</p>
</blockquote>
<p>With that in place, the stitching engine will always fetch the requested field for us whenever a <code class="language-text">Message</code> object is requested.</p>
<p>So, now let us move on to write a little middleware that copies this data into our scoped resolver context data map. The data in this map will only be available to the resolvers in the subtree of the message type.</p>
<p>A field middleware has to be declared via the stitching builder.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="47310517100395310000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddStitchedSchema(builder => builder
  .AddSchemaFromHttp(&quot;messages&quot;)
  .AddSchemaFromHttp(&quot;users&quot;)
  .AddSchemaFromHttp(&quot;analytics&quot;))
  .AddExtensionsFromFile(&quot;./graphql/Extensions.graphql&quot;)
  .IgnoreField(&quot;analytics&quot;, &quot;Query&quot;, &quot;analytics&quot;)
  .IgnoreType(&quot;analytics&quot;, &quot;MessageAnalytics&quot;)
  .IgnoreType(&quot;analytics&quot;, &quot;CounterType&quot;)
  .IgnoreField(&quot;messages&quot;, &quot;Message&quot;, &quot;createdBy&quot;)
  .AddSchemaConfiguration(c =>
  {
    c.RegisterExtendedScalarTypes();

    c.Use(next => async context =>
    {
        await next.Invoke(context);

        if(context.Field.Type.NamedType() is ObjectType objectType
          && objectType.Name.Equals(&quot;Message&quot;)
          && context.Result is IDictionary<string, object> data
          && data.TryGetValue(&quot;createdById&quot;, out object value))
        {
            context.ScopedContextData =
                context.ScopedContextData.SetItem(&quot;createdById&quot;, value);
        }
    })
  })`, `47310517100395310000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddStitchedSchema</span><span class="token punctuation">(</span>builder <span class="token operator">=></span> builder
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"users"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaFromHttp</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddExtensionsFromFile</span><span class="token punctuation">(</span><span class="token string">"./graphql/Extensions.graphql"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">IgnoreField</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token string">"Query"</span><span class="token punctuation">,</span> <span class="token string">"analytics"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">IgnoreType</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token string">"MessageAnalytics"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">IgnoreType</span><span class="token punctuation">(</span><span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token string">"CounterType"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">IgnoreField</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">,</span> <span class="token string">"Message"</span><span class="token punctuation">,</span> <span class="token string">"createdBy"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">AddSchemaConfiguration</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
  <span class="token punctuation">{</span>
    c<span class="token punctuation">.</span><span class="token function">RegisterExtendedScalarTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    c<span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span>next <span class="token operator">=></span> <span class="token keyword">async</span> context <span class="token operator">=></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">await</span> next<span class="token punctuation">.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>Field<span class="token punctuation">.</span>Type<span class="token punctuation">.</span><span class="token function">NamedType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token class-name">ObjectType</span> objectType
          <span class="token operator">&amp;&amp;</span> objectType<span class="token punctuation">.</span>Name<span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span><span class="token string">"Message"</span><span class="token punctuation">)</span>
          <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">.</span>Result <span class="token keyword">is</span> <span class="token class-name">IDictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token punctuation">></span></span> data
          <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span><span class="token function">TryGetValue</span><span class="token punctuation">(</span><span class="token string">"createdById"</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">object</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            context<span class="token punctuation">.</span>ScopedContextData <span class="token operator">=</span>
                context<span class="token punctuation">.</span>ScopedContextData<span class="token punctuation">.</span><span class="token function">SetItem</span><span class="token punctuation">(</span><span class="token string">"createdById"</span><span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<blockquote>
<p>We could also declare a field middleware as class. More about what can be done with a field middleware can be found <a href="https://hotchocolate.io/docs/middleware">here</a>.</p>
</blockquote>
<p>With all of this in place we can now rewrite our <code class="language-text">Message</code> type extension and access the <code class="language-text">createdById</code> from the scoped context data:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="14773997786453518000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`extend type Message {
  createdBy: User!
  @delegate(schema: &quot;users&quot;, path: &quot;user(id: \$scopedContextData:createdById)&quot;)
  views: Int! @delegate(schema: &quot;analytics&quot;, path: &quot;analytics(id: \$fields:id)&quot;)
  likes: Int! @delegate(schema: &quot;analytics&quot;, path: &quot;analytics(id: \$fields:id)&quot;)
  replies: Int!
  @delegate(schema: &quot;analytics&quot;, path: &quot;analytics(id: \$fields:id)&quot;)
}`, `14773997786453518000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span>
  <span class="token attr-name">createdBy</span><span class="token punctuation">:</span> User<span class="token operator">!</span>
  <span class="token directive function">@delegate</span><span class="token punctuation">(</span><span class="token attr-name">schema</span><span class="token punctuation">:</span> <span class="token string">"users"</span><span class="token punctuation">,</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token string">"user(id: $scopedContextData:createdById)"</span><span class="token punctuation">)</span>
  <span class="token attr-name">views</span><span class="token punctuation">:</span> Int<span class="token operator">!</span> <span class="token directive function">@delegate</span><span class="token punctuation">(</span><span class="token attr-name">schema</span><span class="token punctuation">:</span> <span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token string">"analytics(id: $fields:id)"</span><span class="token punctuation">)</span>
  <span class="token attr-name">likes</span><span class="token punctuation">:</span> Int<span class="token operator">!</span> <span class="token directive function">@delegate</span><span class="token punctuation">(</span><span class="token attr-name">schema</span><span class="token punctuation">:</span> <span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token string">"analytics(id: $fields:id)"</span><span class="token punctuation">)</span>
  <span class="token attr-name">replies</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
  <span class="token directive function">@delegate</span><span class="token punctuation">(</span><span class="token attr-name">schema</span><span class="token punctuation">:</span> <span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token string">"analytics(id: $fields:id)"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<h3 id="customizing-stitching-builder" style="position:relative;"><a href="#customizing-stitching-builder" aria-label="customizing stitching builder permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Customizing Stitching Builder</h3>
<p>The stitching builder can be extended on multiple levels by writing different kinds of schema syntax rewriter.</p>
<h4 id="source-schema-rewriter" style="position:relative;"><a href="#source-schema-rewriter" aria-label="source schema rewriter permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Source Schema Rewriter</h4>
<p>The refactoring methods that we provide like <code class="language-text">IgnoreField</code> or <code class="language-text">RenameType</code> and so on rewrite the source schemas before they are merged.</p>
<p>In order to rewrite the source schema we can opt to create a <code class="language-text">IDocumentRewriter</code> that is able to rewrite the whole schema document, or a <code class="language-text">ITypeRewriter</code> that only can rewrite parts of a type definition.</p>
<p>If we wanted to delete a type or write a rewriter that also refactors the impacted types of a change then the <code class="language-text">IDocumentRewriter</code> would be the way to go.</p>
<p>If we wanted to rewrite just parts of a type like adding some documentation or adding new fields to a type, basically things that do not impact other types, we could opt for the <code class="language-text">ITypeRewriter</code>.</p>
<p>In both types we could opt to use the rewriter and visitor base classes that are included in our parser package.</p>
<blockquote>
<p>Information about our parser can be found <a href="https://hotchocolate.io/docs/parser">here</a>.</p>
</blockquote>
<h4 id="merged-schema-rewriter" style="position:relative;"><a href="#merged-schema-rewriter" aria-label="merged schema rewriter permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Merged Schema Rewriter</h4>
<p>Apart from the source schema rewriters we can also rewrite the schema document after it has been merged:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="17119639698019730000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`IStitchingBuilder AddMergedDocumentRewriter(Func<DocumentNode, DocumentNode> rewrite);`, `17119639698019730000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token return-type class-name">IStitchingBuilder</span> <span class="token function">AddMergedDocumentRewriter</span><span class="token punctuation">(</span><span class="token class-name">Func<span class="token punctuation">&lt;</span>DocumentNode<span class="token punctuation">,</span> DocumentNode<span class="token punctuation">></span></span> rewrite<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This can be very useful if we want to first let all source schema rewriters do their work and annotate the types. With the annotations in place we could write complex rewriters that further enhance our stitched schema.</p>
<p>Also, if we just wanted to validate the schema for merge errors or collect information on the rewritten schema we are able to add schema visitors that run after all schema modifications are done.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="10517288228826006000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`IStitchingBuilder AddMergedDocumentVisitor(Action<DocumentNode> visit);`, `10517288228826006000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token return-type class-name">IStitchingBuilder</span> <span class="token function">AddMergedDocumentVisitor</span><span class="token punctuation">(</span><span class="token class-name">Action<span class="token punctuation">&lt;</span>DocumentNode<span class="token punctuation">></span></span> visit<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h4 id="merge-rules" style="position:relative;"><a href="#merge-rules" aria-label="merge rules permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Merge Rules</h4>
<p>In most cases the default merge rules should be enough. But with more domain knowledge about the source schemas one could write more aggressive merge rules.</p>
<p>The merge rules are chained and pass along what they cannot handle. The types of the various schemas are bucketed by name and passed to the merge rule chain.</p>
<h2 id="authentication" style="position:relative;"><a href="#authentication" aria-label="authentication permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Authentication</h2>
<p>In many cases schemas will be protected by some sort of authentication. In most cases http requests are authenticated with bearer tokens that are passed along as <code class="language-text">Authorization</code> header.</p>
<p>Moreover, the most common case that we have seen so far is that people want to pass the tokens along to the remote schema.</p>
<p>The stitching engine creates a lazy query executor that will only start merging the schemas on the first call to the GraphQL gateway. This allows us to use the token of an incoming call to execute the introspection queries on the remote schemas. This also safes us from having to store some kind of service token with the GraphQL gateway.</p>
<p>In order to pass on the incoming <code class="language-text">Authorization</code> header to our registered HttpClients we need to first register the HttpContext accessor from ASP.net core.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="45274880660936990000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddHttpContextAccessor();`, `45274880660936990000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddHttpContextAccessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Next, we need to update our HttpClient factory declaration:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="12226253295268096000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddHttpClient(&quot;messages&quot;, (sp, client) =>
{
    HttpContext context = sp.GetRequiredService<IHttpContextAccessor>().HttpContext;

    if (context.Request.Headers.ContainsKey(&quot;Authorization&quot;))
    {
        client.DefaultRequestHeaders.Authorization =
            AuthenticationHeaderValue.Parse(
                context.Request.Headers[&quot;Authorization&quot;]
                    .ToString());
    }

    client.BaseAddress = new Uri(&quot;http://127.0.0.1:5050&quot;);
});`, `12226253295268096000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddHttpClient</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>sp<span class="token punctuation">,</span> client<span class="token punctuation">)</span> <span class="token operator">=></span>
<span class="token punctuation">{</span>
    <span class="token class-name">HttpContext</span> context <span class="token operator">=</span> sp<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRequiredService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IHttpContextAccessor<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>HttpContext<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Headers<span class="token punctuation">.</span><span class="token function">ContainsKey</span><span class="token punctuation">(</span><span class="token string">"Authorization"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        client<span class="token punctuation">.</span>DefaultRequestHeaders<span class="token punctuation">.</span>Authorization <span class="token operator">=</span>
            AuthenticationHeaderValue<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>
                context<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Headers<span class="token punctuation">[</span><span class="token string">"Authorization"</span><span class="token punctuation">]</span>
                    <span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    client<span class="token punctuation">.</span>BaseAddress <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1:5050"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Another variant can also be to store service tokens for the remote schemas with our GraphQL gateway.</p>
<p>How you want to implement authentication strongly depends on your needs. With the reliance on the HttpClient factory from the ASP.net core foundation we are very flexible and can handle multiple scenarios.</p>
<h2 id="batching" style="position:relative;"><a href="#batching" aria-label="batching permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Batching</h2>
<p>The stitching layer transparently batches queries to the remote schemas. So, if you extend types like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="61092912443234470000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`extend type Message {
  views: Int! @delegate(schema: &quot;analytics&quot;, path: &quot;analytics(id: \$fields:id)&quot;)
  likes: Int! @delegate(schema: &quot;analytics&quot;, path: &quot;analytics(id: \$fields:id)&quot;)
  replies: Int!
  @delegate(schema: &quot;analytics&quot;, path: &quot;analytics(id: \$fields:id)&quot;)
}`, `61092912443234470000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span>
  <span class="token attr-name">views</span><span class="token punctuation">:</span> Int<span class="token operator">!</span> <span class="token directive function">@delegate</span><span class="token punctuation">(</span><span class="token attr-name">schema</span><span class="token punctuation">:</span> <span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token string">"analytics(id: $fields:id)"</span><span class="token punctuation">)</span>
  <span class="token attr-name">likes</span><span class="token punctuation">:</span> Int<span class="token operator">!</span> <span class="token directive function">@delegate</span><span class="token punctuation">(</span><span class="token attr-name">schema</span><span class="token punctuation">:</span> <span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token string">"analytics(id: $fields:id)"</span><span class="token punctuation">)</span>
  <span class="token attr-name">replies</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
  <span class="token directive function">@delegate</span><span class="token punctuation">(</span><span class="token attr-name">schema</span><span class="token punctuation">:</span> <span class="token string">"analytics"</span><span class="token punctuation">,</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token string">"analytics(id: $fields:id)"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We do send only a single request to your remote schema instead of three. The batching mechanism works not only within one type but extends to all requests that are executed in a resolver batch.</p>
<p>Furthermore, we are also including calls that are done through direct calls on the <code class="language-text">IStitchingContext</code>.</p>
<p>Batching works very similar to <em>DataLoader</em> where the stitching engine sends requests through the <code class="language-text">IRemoteQueryClient</code> which consequently only fetches the data once the query engine signals that all resolvers have been enqueued and have registered their calls against the remote schemas. This reduces the calls to the remote-schemas significantly and improves the overall performance.</p>
<p>So, if we had two query calls:</p>
<p>Query 1:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="7309455500094652000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  customer(id: &quot;abc&quot;) {
    name
    contracts {
      id
    }
  }
}`, `7309455500094652000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  customer<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token string">"abc"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
    contracts <span class="token punctuation">{</span>
      id
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Query 2:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="70990088369556640000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  customer(id: &quot;def&quot;) {
    name
    contracts {
      id
    }
  }
}`, `70990088369556640000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  customer<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token string">"def"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
    contracts <span class="token punctuation">{</span>
      id
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We would merge those two queries into one:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="29751037579935625000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  __1: customer(id: &quot;abc&quot;) {
    name
    contracts {
      id
    }
  }
  __2: customer(id: &quot;def&quot;) {
    name
    contracts {
      id
    }
  }
}`, `29751037579935625000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  <span class="token attr-name">__1</span><span class="token punctuation">:</span> customer<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token string">"abc"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
    contracts <span class="token punctuation">{</span>
      id
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token attr-name">__2</span><span class="token punctuation">:</span> customer<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token string">"def"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
    contracts <span class="token punctuation">{</span>
      id
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This lets the remote schema optimize the calls much better since now the remote schema could take advantage of things like <em>DataLoader</em> etc.</p>
<h2 id="root-types" style="position:relative;"><a href="#root-types" aria-label="root types permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Root Types</h2>
<p>We are currently supporting stitching <code class="language-text">Query</code> and <code class="language-text">Mutation</code>.</p>
<p>With Version 9 we will introduce stitching the <code class="language-text">Subscription</code> type.</p>
<p>Stitching queries is straight forward and works like described earlier. Mutations are also quite straight forward, but it is often overlooked that mutations are executed with a different execution strategy.</p>
<p>Query resolvers are executed in parallel when possible. All fields of a query have to be side-effect free.</p>
<p><a href="https://facebook.github.io/graphql/June2018/#sec-Normal-and-Serial-Execution">https://facebook.github.io/graphql/June2018/#sec-Normal-and-Serial-Execution</a></p>
<blockquote>
<p>Normally the executor can execute the entries in a grouped field set in whatever order it chooses (normally in parallel). Because the resolution of fields other than top‐level mutation fields must always be side effect‐free and idempotent, the execution order must not affect the result, and hence the server has the freedom to execute the field entries in whatever order it deems optimal.</p>
</blockquote>
<p>The top‐level mutation fields are executed serially which guarantees that the top-level fields are executed one after the other.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="18581459951432188000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`mutation {
  createUser(userName: &quot;foo&quot;) {
    someFields
  }
  addUserToGroup(userName: &quot;foo&quot;, groupName: &quot;bar&quot;) {
    someFields
  }
}`, `18581459951432188000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">mutation</span> <span class="token punctuation">{</span>
  createUser<span class="token punctuation">(</span><span class="token attr-name">userName</span><span class="token punctuation">:</span> <span class="token string">"foo"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    someFields
  <span class="token punctuation">}</span>
  addUserToGroup<span class="token punctuation">(</span><span class="token attr-name">userName</span><span class="token punctuation">:</span> <span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token attr-name">groupName</span><span class="token punctuation">:</span> <span class="token string">"bar"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    someFields
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The above example first creates a user and then adds the created user to a group. This means that mutations can only be stitched on the top level. Everything, that you stitch in the lower levels is delegating the request to a <code class="language-text">Query</code> type.</p>
<p>Or, even simpler put, only fields that are declared on the mutation type can delegate to a mutation field on a remote query.</p>
<p>Let's put that in a context.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="26608588157647170000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Mutation {
  newUser(input: NewUserInput!): NewUserPayload! @delegate(schema: &quot;users&quot;)
}

type NewUserInput {
  username: String!
  password: String!
}

type NewUserPayload {
  user: User
}

type User {
  id: ID!
  username: String!
  messages: [Message!]
  @delegate(schema: &quot;messages&quot;, path: &quot;messages(userId: \$fields:Id)&quot;)
}`, `26608588157647170000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Mutation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">newUser</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> NewUserInput<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> NewUserPayload<span class="token operator">!</span> <span class="token directive function">@delegate</span><span class="token punctuation">(</span><span class="token attr-name">schema</span><span class="token punctuation">:</span> <span class="token string">"users"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewUserInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">username</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">password</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NewUserPayload</span> <span class="token punctuation">{</span>
  <span class="token attr-name">user</span><span class="token punctuation">:</span> User
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">username</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">messages</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Message<span class="token operator">!</span><span class="token punctuation">]</span>
  <span class="token directive function">@delegate</span><span class="token punctuation">(</span><span class="token attr-name">schema</span><span class="token punctuation">:</span> <span class="token string">"messages"</span><span class="token punctuation">,</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token string">"messages(userId: $fields:Id)"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In the above example we have a mutation that delegates the <code class="language-text">newUser</code> field to the <code class="language-text">newUser</code> mutation of the <code class="language-text">users</code> schema. The mutation returns the <code class="language-text">NewUserPayload</code> which has a field <code class="language-text">user</code> that returns the newly created user. The <code class="language-text">User</code> object delegates the <code class="language-text">messages</code> field to the message schema. Since this field is resolved in the third level it will delegated to the query type of the <code class="language-text">messages</code> schema.</p>
<p>This also means that we cannot group mutations like we could group queries. So, something like the following would not work since it is not spec-compliant:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="12005096171221540000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Mutation {
  userMutations: UserMutations
}

type UserMutations {
  newUser(input: NewUserInput): NewUserPayload
}`, `12005096171221540000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Mutation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">userMutations</span><span class="token punctuation">:</span> UserMutations
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">UserMutations</span> <span class="token punctuation">{</span>
  <span class="token attr-name">newUser</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> NewUserInput<span class="token punctuation">)</span><span class="token punctuation">:</span> NewUserPayload
<span class="token punctuation">}</span></code></pre></div>
<h2 id="stitching-context" style="position:relative;"><a href="#stitching-context" aria-label="stitching context permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Stitching Context</h2>
<p>The stitching engine provides a lot of extension points, but if we wanted to write the stitching for one specific resolver by ourselves then we could do that by using the <code class="language-text">IStitchingContext</code> which is a scoped service and can be resolved through the resolver context.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="72230862188102795000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`IStitchingContext stitchingContext = context.Service<IStichingContext>();
IRemoteQueryClient remoteQueryClient = stitchingContext.GetRemoteQueryClient(&quot;messages&quot;);
IExecutionResult result = remoteQueryClient.ExecuteAsync(&quot;{ foo { bar } }&quot;)`, `72230862188102795000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name">IStitchingContext</span> stitchingContext <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Service</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IStichingContext<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">IRemoteQueryClient</span> remoteQueryClient <span class="token operator">=</span> stitchingContext<span class="token punctuation">.</span><span class="token function">GetRemoteQueryClient</span><span class="token punctuation">(</span><span class="token string">"messages"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">IExecutionResult</span> result <span class="token operator">=</span> remoteQueryClient<span class="token punctuation">.</span><span class="token function">ExecuteAsync</span><span class="token punctuation">(</span><span class="token string">"{ foo { bar } }"</span><span class="token punctuation">)</span></code></pre></div>
<h2 id="example" style="position:relative;"><a href="#example" aria-label="example permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Example</h2>
<p>We have a simple stitching example <a href="https://github.com/ChilliCream/hotchocolate-examples/tree/master/Stitching">here</a>.</p>
<h2 id="version-9" style="position:relative;"><a href="#version-9" aria-label="version 9 permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Version 9</h2>
<p>We originally wanted to include subscription stitching with version 8, but are now moving this feature to next version.</p>
<p>Apart from that, Version 9 will mainly focus on schema improvements.</p>
<p>If you have feedback or feature requests for our schema stitching we love to talk to you about it. Head over to our <a href="https://join.slack.com/t/hotchocolategraphql/shared_invite/enQtNTA4NjA0ODYwOTQ0LTViMzA2MTM4OWYwYjIxYzViYmM0YmZhYjdiNzBjOTg2ZmU1YmMwNDZiYjUyZWZlMzNiMTk1OWUxNWZhMzQwY2Q">slack channel</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GraphQL - Hot Chocolate 0.7.0]]></title>
            <link>https://chillicream.com/blog/2019/02/04/hot-chocolate-0.7.0</link>
            <guid>/blog/2019/02/04/hot-chocolate-0.7.0</guid>
            <pubDate>Mon, 04 Feb 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Today we have released Hot Chocolate version 0.7.0 which brings a lot of new features, improvements and bug fixes. With this post I walk you…]]></description>
            <content:encoded><![CDATA[<p>Today we have released Hot Chocolate version 0.7.0 which brings a lot of new features, improvements and bug fixes. With this post I walk you through the major changes.</p>
<p>The main focus of this release was to make the execution engine more extendable.</p>
<p>The execution engine in version 0.6.0 was closed and as a user of Hot Chocolate you didn't really have any chance to change it's behavior.</p>
<p>The only way to write field middleware components was through directives. With our new release this will fundamentally change.</p>
<h2 id="queryexecutionbuilder" style="position:relative;"><a href="#queryexecutionbuilder" aria-label="queryexecutionbuilder permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>QueryExecutionBuilder</h2>
<p>With version 0.7.0 we opened up the field middleware pipeline to be extended.</p>
<p>Moreover, we broke the query execution pipeline into query middleware components that can be swapped out or extended by writing a query middleware.</p>
<p>This all can be done with the new <code class="language-text">QueryExecutionBuilder</code> that provides a simple to use API to customize how the query executor works.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="55855204569440150000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`  IQueryExecutor executor = QueryExecutionBuilder.New()
    .Use(next => context =>
    {
      // ...
    })
    .UseDefaultPipeline()
    .Build(schema);`, `55855204569440150000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">  <span class="token class-name">IQueryExecutor</span> executor <span class="token operator">=</span> QueryExecutionBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span>next <span class="token operator">=></span> context <span class="token operator">=></span>
    <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">UseDefaultPipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>schema<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Instead of using the default pipeline we can also add the included middleware components one by one and swap out the ones that we do want to replace.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="51016053024348060000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`  IQueryExecutor executor = QueryExecutionBuilder.New()
    .AddOptions(options)
    .AddErrorHandler()
    .AddQueryValidation()
    .AddDefaultValidationRules()
    .AddQueryCache(options.QueryCacheSize)
    .AddExecutionStrategyResolver()
    .AddDefaultParser()
    .Use(next => context =>
    {
      // ...
    })
    .UseInstrumentation(options.TracingPreference)
    .UseRequestTimeout()
    .UseExceptionHandling()
    .UseQueryParser()
    .UseValidation()
    .UseOperationResolver()
    .UseMaxComplexity()
    .UseOperationExecutor();
    .Build(schema);`, `51016053024348060000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">  <span class="token class-name">IQueryExecutor</span> executor <span class="token operator">=</span> QueryExecutionBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddOptions</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddErrorHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddQueryValidation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddDefaultValidationRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddQueryCache</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>QueryCacheSize<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddExecutionStrategyResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddDefaultParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span>next <span class="token operator">=></span> context <span class="token operator">=></span>
    <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">UseInstrumentation</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>TracingPreference<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">UseRequestTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">UseExceptionHandling</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">UseQueryParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">UseValidation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">UseOperationResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">UseMaxComplexity</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">UseOperationExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>schema<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>On top of the new execution pipeline we build features like:</p>
<ul>
<li>Apollo Tracing</li>
<li>Schema Stitching</li>
<li>Pagination Support</li>
</ul>
<p>More about this can be read <a href="https://hotchocolate.io/docs/middleware">here</a>.</p>
<h2 id="syntax-rewriter" style="position:relative;"><a href="#syntax-rewriter" aria-label="syntax rewriter permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Syntax Rewriter</h2>
<p>We also invested in our parser and added a lot of visitor and rewriter base classes that make working with the syntax tree less effort.</p>
<p><strong>What are visitors and rewriter good for?</strong></p>
<p>We started really thinking about this feature when we conceived the new schema stitching. We wanted to branch of parts of the query and rewrite them to become a query for another schema that is located somewhere else.</p>
<p>Rewriters are basically visitors that walk the graph and as they do that create a new query. Basically you pass in a syntax node and the rewriter returns a new syntax node that represents the rewritten node.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="5864072004572418000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`FieldNode newField = rewriter.Rewrite(originalField);`, `5864072004572418000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token class-name">FieldNode</span> newField <span class="token operator">=</span> rewriter<span class="token punctuation">.</span><span class="token function">Rewrite</span><span class="token punctuation">(</span>originalField<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This can be very useful if we want to map a graph to a database or create something like a schema stitching layer etc.</p>
<p>More about this can be read <a href="https://hotchocolate.io/docs/parser">here</a>.</p>
<h2 id="graphql-spec-state" style="position:relative;"><a href="#graphql-spec-state" aria-label="graphql spec state permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>GraphQL Spec State</h2>
<p>With version 0.7.0 we have added support for repeatable directives. This feature is slated for the next GraphQL spec version and allows to pipeline directives like the following:</p>
<p>{
a @fetch @replace('a' 'b') @replace('b' 'c')
}</p>
<p>This behavior feels really awesome when you use executable directives, since with this you can build the field resolver pipeline by stacking directives together.</p>
<p><em>Directives are per default non-repeatable.</em></p>
<h2 id="error-filter" style="position:relative;"><a href="#error-filter" aria-label="error filter permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Error Filter</h2>
<p>One of the regular questions users had was about how to handle custom exceptions with Hot Chocolate.</p>
<p>With exception filters we now provide you with a simple way to do just this.</p>
<p>The execution engine will transform any exception thrown into a generic GraphQL error.</p>
<p>With exception filters you can then rewrite those errors for certain exceptions in order to provide more useful information.</p>
<p>More about this can be read <a href="https://hotchocolate.io/docs/errors">here</a>.</p>
<h2 id="schema-stitching" style="position:relative;"><a href="#schema-stitching" aria-label="schema stitching permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Schema Stitching</h2>
<p>On top of the execution improvements we built our new schema stitching capabilities. With those you are able to easily fuse service endpoints together.</p>
<p>More about this can be read <a href="2019-01-24-schema-stitching.md">here</a>.</p>
<h2 id="apollo-tracing" style="position:relative;"><a href="#apollo-tracing" aria-label="apollo tracing permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Apollo Tracing</h2>
<p>With version 0.7.0 we have introduced diagnostic sources that can be used to add custom tracing and diagnostic solutions.</p>
<p>Furthermore, we now support <a href="https://github.com/apollographql/apollo-tracing">Apollo Tracing</a>. Apollo Tracing can be opted in by setting the tracing preference on the execution options. We recommend to switch it to on-demand, which allows you to send a header when ever you want to get performance performance information about a call.</p>
<h2 id="relay-and-paging" style="position:relative;"><a href="#relay-and-paging" aria-label="relay and paging permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Relay and Paging</h2>
<p>We made creating relay compliant schemas a lot easier with this release. We introduced the paging structures as well as the node interface.</p>
<p>Relay compliant paging can be done with one line of code if your data is provided by <code class="language-text">IQueryable&lt;T&gt;</code>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="28284499326073954000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`descriptor
  .Field(t => t.GetCustomers)
  .UsePaging<CustomerType>();`, `28284499326073954000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">descriptor
  <span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>GetCustomers<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UsePaging</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CustomerType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Moreover, we have introduced a middleware that makes your IDs schema unique like required by the relay server specs without you having to implement any of that.</p>
<p>We will follow up this post with a post on how to best build schemas for relay.</p>
<p>More about paging can be found <a href="https://hotchocolate.io/docs/pagination">here</a>.</p>
<h2 id="type-conversion" style="position:relative;"><a href="#type-conversion" aria-label="type conversion permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Type Conversion</h2>
<p>Until now the type conversion logic of Hot Chocolate was not accessible by the developer. This caused a lot of frustration since we were not able to add custom type conversions in a transparent way. So, basically the user had to add this code into his/her resolver logic. This felt like clutter that should not be there.</p>
<p>We have now introduced a new type conversion API.</p>
<p>Let us say you are working with mongo and you want to add an <code class="language-text">ObjectId</code> conversion that basically converts <code class="language-text">string</code> to <code class="language-text">ObjectId</code> and <code class="language-text">ObjectId</code> to <code class="language-text">string</code>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="95675524488314980000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`TypeConversion.Default.Register<string, ObjectId>(from => ObjectId.Parse(from));
TypeConversion.Default.Register<ObjectId, string>(from => from.ToString());`, `95675524488314980000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">TypeConversion<span class="token punctuation">.</span>Default<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> ObjectId<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token keyword">from</span> <span class="token operator">=></span> ObjectId<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token keyword">from</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
TypeConversion<span class="token punctuation">.</span>Default<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ObjectId<span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token keyword">from</span> <span class="token operator">=></span> <span class="token keyword">from</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>So, that basically settles it. Two lines of code an you are done. You can also implement <code class="language-text">ITypeConverter</code> in order to accommodate more complex code or just because you want to have your converters in class form.</p>
<p>Furthermore, we can create a new <code class="language-text">TypeConversion</code> instance that only contains our specified conversion logic and none of our default converters in order to have tight control over them.</p>
<p>In this case we add the <code class="language-text">TypeConversion</code> instance to our dependency injection and the execution engine will prefer the one provided via dependency injection over <code class="language-text">TypeConversion.Default</code>.</p>
<h2 id="dataloader" style="position:relative;"><a href="#dataloader" aria-label="dataloader permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>DataLoader</h2>
<p>We already provided an API for writing <em>DataLoader</em> but due to feedback from the community we rewrote our implementation to make it easier to use. You can now write <em>DataLoader</em> with a single line of code by providing us with a delegate that fetches your data.</p>
<p>An example project that shows the new <em>DataLoader</em> can be found <a href="https://github.com/ChilliCream/hotchocolate-examples/tree/master/DataLoader">here</a>.</p>
<p>Or head over to our documentation <a href="https://hotchocolate.io/docs/dataloaders">here</a>.</p>
<h2 id="scalar-types" style="position:relative;"><a href="#scalar-types" aria-label="scalar types permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Scalar Types</h2>
<p>We removed our extended scalars from the base setup. This means that you now have to tell your schema to use these.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="72478127715013300000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`Schema.Create(c =>
{
    c.RegisterExtendedScalarTypes();
});`, `72478127715013300000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">Schema<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
<span class="token punctuation">{</span>
    c<span class="token punctuation">.</span><span class="token function">RegisterExtendedScalarTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This gives you more control about your type system and allows you to implement your own version of long etc.</p>
<p>More about scalar types can be found <a href="https://hotchocolate.io/docs/custom-scalar-types">here</a>.</p>
<h2 id="generic-interfacetype-and-uniontype" style="position:relative;"><a href="#generic-interfacetype-and-uniontype" aria-label="generic interfacetype and uniontype permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Generic InterfaceType and UnionType</h2>
<p>The generic <code class="language-text">InterfaceType</code> allows you to assign a .Net interface to a GraphQL interface. All object types that then have a .Net type associated will automatically implement this interface if the .Net type implements the .Net interface. Confused :)</p>
<p>Let`s see some code:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="9930340389378034000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class FooType : InterfaceType<IFoo>
{

}`, `9930340389378034000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FooType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">InterfaceType<span class="token punctuation">&lt;</span>IFoo<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>

<span class="token punctuation">}</span></code></pre></div>
<p>If we would do nothing else we will infer the fields from the interface.</p>
<p>If we now had the following type:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="52042199943848714000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class Bar : IFoo { }

public class BarType : ObjectType<Bar>
{

}`, `52042199943848714000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bar</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IFoo</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BarType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType<span class="token punctuation">&lt;</span>Bar<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>

<span class="token punctuation">}</span></code></pre></div>
<p>Then we do not explicitly need to point to the interface anymore since we can infer the usage of the interface.</p>
<p>The same works for generic union types where you now can use marker interfaces to assign types to a set. For our purists that only want to you .Net types the following works now to:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="31184134796246553000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`Schema.Create(c =>
{
    c.RegisterType<IFoo>();
    c.RegisterType<Bar>();
});`, `31184134796246553000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">Schema<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
<span class="token punctuation">{</span>
    c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFoo<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Bar<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2 id="source-code-link" style="position:relative;"><a href="#source-code-link" aria-label="source code link permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Source Code Link</h2>
<p>We now support NuGet source code link. This means that you can debug into the Hot Chocolate source. This is often a great help when you are struggling with a bug or do want to check whats happening.</p>
<h2 id="whats-comming-next" style="position:relative;"><a href="#whats-comming-next" aria-label="whats comming next permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>What`s comming next</h2>
<p>Version 7 was a big release with a lot of new features that make it very easy to setup a GraphQL schema in .Net. With this release out we now focus on Version 8 which will focus on schema stitching. We will introduce capabilities like auto-stitching and auto-mocking. We already started working on the new schema stitching stories and if you think you would like to contribute ideas or code or documentation just feel free to talk to us. We are quite happy for any help.</p>
<p>After the schema stitching enhancements we will focus on the new schema builder with Version 9. The schema builder will bring in completely new capabilities that let you extend the schema building process. We are basically opening up the schema building process like we did with the execution engine.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GraphQL .NET Instrumentation API and Apollo Tracing]]></title>
            <link>https://chillicream.com/blog/2019/02/04/instrumentation-and-apollo-tracing</link>
            <guid>/blog/2019/02/04/instrumentation-and-apollo-tracing</guid>
            <pubDate>Mon, 04 Feb 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Today we have released Hot Chocolate , containing one cool new feature,
we wanne talk about here, namely Apollo Tracing which is extremely…]]></description>
            <content:encoded><![CDATA[<p>Today we have released Hot Chocolate <code class="language-text">0.7.0</code>, containing one cool new feature,
we wanne talk about here, namely <em>Apollo Tracing</em> which is extremely powerful in
identifing things like performance bottlenecks in our <em>GraphQL</em> <em>APIs</em> for
example. As a result, we had to enhance our general instrumentation layer, which
we all benefit from. For instance, now it's way easier to register a
<em>DiagnosticObserver</em> and bring in your own tracing framework, respectively. In
this blog article we will focus on these two topics.</p>
<h2 id="apollo-tracing" style="position:relative;"><a href="#apollo-tracing" aria-label="apollo tracing permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Apollo Tracing</h2>
<p><em>Apollo Tracing</em> is a <a href="https://github.com/apollographql/apollo-tracing">performance tracing specification</a> for <em>GraphQL</em> servers.
It's not part of the actual <em>GraphQL</em> <a href="https://facebook.github.io/graphql">specification</a> itself, but there is a
common agreement in the <em>GraphQL</em> community that this should be supported by
all <em>GraphQL</em> servers.</p>
<p>So, we decided to introduce built-in <em>Apollo Tracing</em> support with this version.
In order to enable <em>Apollo Tracing</em> we just need to provide our own instance of
<code class="language-text">QueryExecutionOptions</code> to the <code class="language-text">AddGraphQL</code> extension method and set the
<code class="language-text">TracingPreference</code> option to either <code class="language-text">TracingPreference.Always</code> or
<code class="language-text">TracingPreference.OnDemand</code>. The difference between these two options is
whether tracing should be enabled always which means for each request or on
demand which means per request. But for now, enough words, let's see how this
would look like in code.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="22481393226865553000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddGraphQL(sp => Schema.Create(c =>
{
    // Here goes the schema definition which is omitted for brevity purpose
}),
new QueryExecutionOptions
{
    TracingPreference = TracingPreference.Always
});`, `22481393226865553000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>sp <span class="token operator">=></span> Schema<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
<span class="token punctuation">{</span>
    <span class="token comment">// Here goes the schema definition which is omitted for brevity purpose</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">new</span> <span class="token constructor-invocation class-name">QueryExecutionOptions</span>
<span class="token punctuation">{</span>
    TracingPreference <span class="token operator">=</span> TracingPreference<span class="token punctuation">.</span>Always
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>There it is. Very simple and straightforward, right? For more information head
over <a href="https://hotchocolate.io/docs/apollo-tracing">here</a>. Now, let's jump over to
the next topic.</p>
<h2 id="instrumentation-api" style="position:relative;"><a href="#instrumentation-api" aria-label="instrumentation api permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Instrumentation API</h2>
<p>In this version we did some heavy lifting in form of refactorings regarding the
query execution pipeline. This really helped us enhancing the
<em>Instrumentation</em> <em>API</em> which has been evolved in two ways. First, we increased
the amount of available diagnostic events for more fine-grained tracing
scenarios. Second, we simplified the registering of <em>DiagnosticObservers</em> by
using <em>Dependancy Injection</em> infrastructure. In the next example we can see how
to register a custom <em>DiagnosticObservers</em>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="77005025161550120000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddGraphQL(sp => Schema.Create(c =>
{
    // Here goes the schema definition which is omitted for brevity purpose
}),
builder =>
{
    return builder
        .UseDefaultPipeline()
        .AddDiagnosticObserver<CustomDiagnosticObserver>();
});`, `77005025161550120000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddGraphQL</span><span class="token punctuation">(</span>sp <span class="token operator">=></span> Schema<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
<span class="token punctuation">{</span>
    <span class="token comment">// Here goes the schema definition which is omitted for brevity purpose</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
builder <span class="token operator">=></span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> builder
        <span class="token punctuation">.</span><span class="token function">UseDefaultPipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDiagnosticObserver</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CustomDiagnosticObserver<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>So far so good. Writing a custom <em>DiagnosticObservers</em> is not difficult. Let's
see how we could achieve this.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="82311811209505030000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`using HotChocolate.Execution;
using Microsoft.Extensions.DiagnosticAdapter;

namespace CustomNamespace
{
    internal class CustomDiagnosticObserver
        : IDiagnosticObserver
    {
        [DiagnosticName(&quot;HotChocolate.Execution.Query&quot;)]
        public void QueryExecute()
        {
            // This method is required to enable recording &quot;Query.Start&quot; and
            // &quot;Query.Stop&quot; diagnostic events. Do not write code in here.
        }

        [DiagnosticName(&quot;HotChocolate.Execution.Query.Start&quot;)]
        public void BeginQueryExecute(IQueryContext context)
        {
            // Here goes your code to trace begin query execution events.
        }

        [DiagnosticName(&quot;HotChocolate.Execution.Query.Stop&quot;)]
        public void EndQueryExecute(
            IQueryContext context,
            IExecutionResult result)
        {
            // Here goes your code to trace end query execution events.
        }
    }
}`, `82311811209505030000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">HotChocolate<span class="token punctuation">.</span>Execution</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>DiagnosticAdapter</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">CustomNamespace</span>
<span class="token punctuation">{</span>
    <span class="token keyword">internal</span> <span class="token keyword">class</span> <span class="token class-name">CustomDiagnosticObserver</span>
        <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IDiagnosticObserver</span></span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DiagnosticName</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Query"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">QueryExecute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// This method is required to enable recording "Query.Start" and</span>
            <span class="token comment">// "Query.Stop" diagnostic events. Do not write code in here.</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DiagnosticName</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Query.Start"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">BeginQueryExecute</span><span class="token punctuation">(</span><span class="token class-name">IQueryContext</span> context<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// Here goes your code to trace begin query execution events.</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DiagnosticName</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Query.Stop"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">EndQueryExecute</span><span class="token punctuation">(</span>
            <span class="token class-name">IQueryContext</span> context<span class="token punctuation">,</span>
            <span class="token class-name">IExecutionResult</span> result<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// Here goes your code to trace end query execution events.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In the above example we showed you just a few diagnostic events. Head over
<a href="https://hotchocolate.io/docs/instrumentation">here</a> for a complete list of
diagnostic events.</p>
<p>We hope you enjoyed reading and be welcome to let us know what you think about
it in the comments section. Thank you!</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GraphQL - Schema Stitching]]></title>
            <link>https://chillicream.com/blog/2019/01/24/schema-stitching</link>
            <guid>/blog/2019/01/24/schema-stitching</guid>
            <pubDate>Thu, 24 Jan 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[What is schema stitching actually? Schema stitching is the capability to merge multiple GraphQL schemas into one schema on which queries can…]]></description>
            <content:encoded><![CDATA[<p>What is schema stitching actually? Schema stitching is the capability to merge multiple GraphQL schemas into one schema on which queries can be queried.</p>
<h2 id="introduction" style="position:relative;"><a href="#introduction" aria-label="introduction permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Introduction</h2>
<p>So, for what is that useful? In our case we have lots of specialized services that serve data for a specific problem domain. Some of these services are GraphQL services, some of them are REST services and yes sadly a little portion of those are still SOAP services.</p>
<p>Also, think about this, you cannot always start fresh and with schema stitching you can now create the schema of your <strong>dreams</strong> and merge all those other services into that new glorified schema.</p>
<p>Apart from that UI teams tend to <strong>NOT</strong> want to know about all those domain services and their specifics. They want to be able to fetch the data they need with one call, no under- or over-fetching and most importantly no repeated fetching because you first needed to fetch that special id with which you now can fetch this other thing. No, what we really want here is to have one source of truth and one call to get exactly what we want. That's what GraphQL is all about.</p>
<p>Furthermore, we believe the schemas should be consistent and provide a way that is easily to consume.</p>
<p>With the preview version 0.7.0-preview.35 we are now introducing schema stitching capabilities to <a href="https://hotchocolate.io/"><em>Hot Chocolate</em></a>.</p>
<p>In this post I will walk you through how you can use schema stitching, what will be available with version 0.7.0 and what features come with the next releases.</p>
<h2 id="getting-started" style="position:relative;"><a href="#getting-started" aria-label="getting started permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Getting Started</h2>
<p>Assume we have two schemas one dealing with the customer data, basically the data that would be located in a CRM system of a company, the other representing insurance data about the customer, basically the technical domain specific data that gives you all the insights into the customers insurance contracts.</p>
<p>The stitching layer is not limited to two schemas, you can actually stitch together how many schemas you want. But for our example we use those two mentioned schemas about customers and their contracts.</p>
<p>So, let's say our customer schema looks something like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="37394825005097450000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  customer(id: ID!): Customer
  consultant(id: ID!): Consultant
}

type Customer {
  id: ID!
  name: String!
  consultant: Consultant
}

type Consultant {
  id: ID!
  name: String!
}`, `37394825005097450000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">customer</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Customer
  <span class="token attr-name">consultant</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Consultant
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Customer</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">consultant</span><span class="token punctuation">:</span> Consultant
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Consultant</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In real life this schema would boast a lot more information about our customer but this will surfice for our little demo.</p>
<p>And our second schema dealing with the insurance contracts looks like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="26994702596804944000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  contract(contractId: ID!): Contract
  contracts(customerId: ID!): [Contract!]
}

interface Contract {
  id: ID!
}

type LifeInsuranceContract implements Contract {
  id: ID!
  premium: Float
}

type SomeOtherContract implements Contract {
  id: ID!
  expiryDate: DateTime
}`, `26994702596804944000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">contract</span><span class="token punctuation">(</span><span class="token attr-name">contractId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Contract
  <span class="token attr-name">contracts</span><span class="token punctuation">(</span><span class="token attr-name">customerId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Contract<span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Contract</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">LifeInsuranceContract</span> <span class="token keyword">implements</span> <span class="token class-name">Contract</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">premium</span><span class="token punctuation">:</span> Float
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">SomeOtherContract</span> <span class="token keyword">implements</span> <span class="token class-name">Contract</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">expiryDate</span><span class="token punctuation">:</span> DateTime
<span class="token punctuation">}</span></code></pre></div>
<p>Imagine we have two servers serving up those schemas. The schema that we actually want for our UI team should look like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="16863861006963620000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  customer(id: ID!): Customer
}

type Customer {
  id: ID!
  name: String!
  consultant: Consultant
  contracts: [Contract!]
}

type Consultant {
  id: ID!
  name: String!
}

interface Contract {
  id: ID!
}

type LifeInsuranceContract implements Contract {
  id: ID!
  premium: Float
}

type SomeOtherContract implements Contract {
  id: ID!
  expiryDate: DateTime
}`, `16863861006963620000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">customer</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Customer
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Customer</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">consultant</span><span class="token punctuation">:</span> Consultant
  <span class="token attr-name">contracts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Contract<span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Consultant</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Contract</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">LifeInsuranceContract</span> <span class="token keyword">implements</span> <span class="token class-name">Contract</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">premium</span><span class="token punctuation">:</span> Float
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">SomeOtherContract</span> <span class="token keyword">implements</span> <span class="token class-name">Contract</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">expiryDate</span><span class="token punctuation">:</span> DateTime
<span class="token punctuation">}</span></code></pre></div>
<p>In order to make that happen you do not have to write actual code, we have create some directives that will tell the stitching layer what to do.</p>
<p>Before we start, we have to give our schemas some names, these names will be used to direct remote queries to the right endpoint.</p>
<p>Let's name the customer schema <code class="language-text">customers</code> and the contract schema <code class="language-text">contracts</code>. With that let's decorate our desired schema.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="74809799422603790000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  customer(id: ID!): Customer @schema(name: &quot;customer&quot;) @delegate
}

type Customer {
  id: ID!
  name: String!
  consultant: Consultant
  contracts: [Contract!]
  @schema(name: &quot;contract&quot;)
  @delegate(path: &quot;contracts(customerId:\$fields:id)&quot;)
}

type Consultant {
  id: ID!
  name: String!
}

interface Contract {
  id: ID!
}

type LifeInsuranceContract implements Contract {
  id: ID!
  premium: Float
}

type SomeOtherContract implements Contract {
  id: ID!
  expiryDate: DateTime
}`, `74809799422603790000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">customer</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Customer <span class="token directive function">@schema</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token string">"customer"</span><span class="token punctuation">)</span> <span class="token directive function">@delegate</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Customer</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">consultant</span><span class="token punctuation">:</span> Consultant
  <span class="token attr-name">contracts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Contract<span class="token operator">!</span><span class="token punctuation">]</span>
  <span class="token directive function">@schema</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token string">"contract"</span><span class="token punctuation">)</span>
  <span class="token directive function">@delegate</span><span class="token punctuation">(</span><span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token string">"contracts(customerId:$fields:id)"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Consultant</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Contract</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">LifeInsuranceContract</span> <span class="token keyword">implements</span> <span class="token class-name">Contract</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">premium</span><span class="token punctuation">:</span> Float
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">SomeOtherContract</span> <span class="token keyword">implements</span> <span class="token class-name">Contract</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">expiryDate</span><span class="token punctuation">:</span> DateTime
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">@schema</code> basically points to the source schema, so the stitching middleware will redirect calls to a schema with the name that is specified by this directive.</p>
<p><code class="language-text">@delegate</code> specifies how the data is fetched. If <code class="language-text">@delegate</code> does not have any path specified than the middleware expects that the field on the target schema has the same specification.</p>
<p>If we look at the <code class="language-text">customer</code> field then the middleware will assume that the source schema has the same customer field as root field as our stitched schema.</p>
<p>The <code class="language-text">contracts</code> field on the other hand specifies a delegation path <code class="language-text">contracts(customerId:$fields:id)</code>. The delegation path specifies the field that is called and where the arguments get their input from.</p>
<p>Let us assume you have a deeper field from which you want to fetch data like the following.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="11862189088234242000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`foo(id:123) {
  bar {
    baz(top:1) {
      qux
    }
  }
}`, `11862189088234242000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql">foo<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span><span class="token number">123</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  bar <span class="token punctuation">{</span>
    baz<span class="token punctuation">(</span><span class="token attr-name">top</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      qux
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Since, we did not want to cram a query like this into one string we allow this to be done with a flat path.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">foo(id:$arguments:arg1).bar.baz(top:1)</code></pre></div>
<p>The argument assignment in the path can be done with GraphQL literals or with scope variables. The scope variables basically can refer to the fields of the declaring type (in case of our contracts field the declaring type is customer) and to the arguments of the field, in our case contracts has no arguments in the stitched schema.</p>
<h2 id="server-configuration" style="position:relative;"><a href="#server-configuration" aria-label="server configuration permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Server Configuration</h2>
<p>Now that we have configured our schema let's create our server. The fastest way to do that is to use our server template.</p>
<p>Install the server template to your dotnet CLI:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="60194185179321490000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`dotnet new -i HotChocolate.Templates.Server`, `60194185179321490000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dotnet new -i HotChocolate.Templates.Server</code></pre></div>
<p>Now let's create our server:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="27386078348560884000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`mkdir stitching
dotnet new graphql-server`, `27386078348560884000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">mkdir</span> stitching
dotnet new graphql-server</code></pre></div>
<p>Open the server in the editor of your choice and upgrade the packages to 0.7.0-preview.35.</p>
<p>Go to the Startup.cs and add the HTTP clients that shall access the remote schema endpoints like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="96211566510869540000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`services.AddHttpClient(&quot;customer&quot;, client =>
{
    client.BaseAddress = new Uri(&quot;http://127.0.0.1:5050&quot;);
});

services.AddHttpClient(&quot;contract&quot;, client =>
{
    client.BaseAddress = new Uri(&quot;http://127.0.0.1:5051&quot;);
});`, `96211566510869540000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">services<span class="token punctuation">.</span><span class="token function">AddHttpClient</span><span class="token punctuation">(</span><span class="token string">"customer"</span><span class="token punctuation">,</span> client <span class="token operator">=></span>
<span class="token punctuation">{</span>
    client<span class="token punctuation">.</span>BaseAddress <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1:5050"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

services<span class="token punctuation">.</span><span class="token function">AddHttpClient</span><span class="token punctuation">(</span><span class="token string">"contract"</span><span class="token punctuation">,</span> client <span class="token operator">=></span>
<span class="token punctuation">{</span>
    client<span class="token punctuation">.</span>BaseAddress <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1:5051"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Note that this is also the place where you would add authentication and header properties in order to access your remote schema endpoint.</p>
<p>The clients must be named clients and have to use the schema name that we used in our schema directive earlier.</p>
<p>Next let's setup our remote schemas. Remote schemas are actually local schemas representing the remote schemas and allowing us to treat the remote schema as if it were a usual schema written with <em>Hot Chocolate</em>.</p>
<p>This also allows us to create middleware components and other things on such a schema althogh the schema does not actually live in our process.</p>
<p>So let us start with the customer schema, the customer schema does only use scalars defined in the spec. This means we do not have to declare any extra scalars to our stitching layer.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="28025626759344500000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`serviceCollection.AddRemoteQueryExecutor(b => b
    .SetSchemaName(&quot;customer&quot;)
    .SetSchema(File.ReadAllText(&quot;Customer.graphql&quot;)));`, `28025626759344500000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">serviceCollection<span class="token punctuation">.</span><span class="token function">AddRemoteQueryExecutor</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token punctuation">.</span><span class="token function">SetSchemaName</span><span class="token punctuation">(</span><span class="token string">"customer"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">SetSchema</span><span class="token punctuation">(</span>File<span class="token punctuation">.</span><span class="token function">ReadAllText</span><span class="token punctuation">(</span><span class="token string">"Customer.graphql"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Again we use our schema name that we used earlier and we are loading a schema file describing the remote schema into the remote executor. We are basically building with that a schema the way you would with the schema-first approach.</p>
<p>Next, let's setup our contracts schema. The contracts schema uses a <code class="language-text">DateTime</code> scalar, this one is not specified in the spec so we have to tell our schema to use this one. Since <em>Hot Chocolate</em> specified a bunch of extended scalars we can import one of those. If we do not have a scalar matching the one of the remote schema we would need to implement this one by extending the class <code class="language-text">ScalarType</code>.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="27559732994673934000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`serviceCollection.AddRemoteQueryExecutor(b => b
    .SetSchemaName(&quot;contract&quot;)
    .SetSchema(FileResource.Open(&quot;Contract.graphql&quot;))
    .AddScalarType<DateTimeType>());`, `27559732994673934000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">serviceCollection<span class="token punctuation">.</span><span class="token function">AddRemoteQueryExecutor</span><span class="token punctuation">(</span>b <span class="token operator">=></span> b
    <span class="token punctuation">.</span><span class="token function">SetSchemaName</span><span class="token punctuation">(</span><span class="token string">"contract"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">SetSchema</span><span class="token punctuation">(</span>FileResource<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">"Contract.graphql"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScalarType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DateTimeType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Now that we have setup our remote schema let's stitch everything together by providing our prepared stitched schema file:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="58451373342886100000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`serviceCollection.AddStitchedSchema(
    FileResource.Open(&quot;Stitching.graphql&quot;),
    c => c.RegisterType<DateTimeType>());`, `58451373342886100000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">serviceCollection<span class="token punctuation">.</span><span class="token function">AddStitchedSchema</span><span class="token punctuation">(</span>
    FileResource<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">"Stitching.graphql"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    c <span class="token operator">=></span> c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DateTimeType<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Again like before we have to provide the extended scalar type that we used for the contracts schema.</p>
<p>Now, we are basically done and can fire up our server.</p>
<h2 id="further-thoughts" style="position:relative;"><a href="#further-thoughts" aria-label="further thoughts permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Further Thoughts</h2>
<p>Since, remote schemas have a local schema representation in our process and the stitching layer is working on those local schemas we can also use native <em>Hot Chocolate</em> schemas to further extend a stitched schema.</p>
<p>So, all what I have described so far is included in the current preview release. We are still not done and are heavy at work getting our schema stitching even better.</p>
<p>With the next view preview builds we will introduce a batching layer to the schema stitching.</p>
<p>Think <em>DataLoader</em>. We will basically batch all request to a schema in one go. Imagine we had two delegated query for one remote schema:</p>
<p>Query A:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="33654445644166107000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  a {
    b
  }
}`, `33654445644166107000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  a <span class="token punctuation">{</span>
    b
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Query B:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="12753127661008667000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  c {
    d
  }
}`, `12753127661008667000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  c <span class="token punctuation">{</span>
    d
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The batching layer will rewrite those queries into one and send just one request to your remote endpoint:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="68872733252622890"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  __1: a {
    b
  }

  __2: c {
    d
  }
}`, `68872733252622890`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  <span class="token attr-name">__1</span><span class="token punctuation">:</span> a <span class="token punctuation">{</span>
    b
  <span class="token punctuation">}</span>

  <span class="token attr-name">__2</span><span class="token punctuation">:</span> c <span class="token punctuation">{</span>
    d
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This way we have just one call and your remote endpoint can better optimize the data fetching with <em>DataLoader</em> and so on.</p>
<h2 id="comming-with-080" style="position:relative;"><a href="#comming-with-080" aria-label="comming with 080 permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Comming with 0.8.0</h2>
<p>Furthermore, we will introduce the ability to rename types. This is useful when you either want to make names more clear or if you have naming collisions. So, with the next releases we will introduce '@name' as a way to rename types and fields.</p>
<p>Also, the ability to auto-stitch schemas and auto-fetch the a remote schema via introspection is on our todo list.</p>
<p>In the beginning of this post I talked about stitching SOAP and REST, we are currently working on a feature that is called HTTP directives.</p>
<p>HTTP directives let you decorate a schema SDL and thus let you map REST services onto a GraphQL schema. This schema can also be included into a stitched schema. We will tell you more about that once we have a stable version ready to go.</p>
<p>Moreover, we will introduce a cast feature to our delegation path. This will basically allow you to use fragments without having to write the code.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">foo.bar&lt;baz&gt;(a:1).qux(b:1)</code></pre></div>
<p>This transalates basically to:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="98147819740363820000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  foo {
    bar(a: 1) {
      ... on baz {
        qux(b: 1)
      }
    }
  }
}`, `98147819740363820000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  foo <span class="token punctuation">{</span>
    bar<span class="token punctuation">(</span><span class="token attr-name">a</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span> <span class="token keyword">on</span> <span class="token class-name">baz</span> <span class="token punctuation">{</span>
        qux<span class="token punctuation">(</span><span class="token attr-name">b</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="wrapping-things-up" style="position:relative;"><a href="#wrapping-things-up" aria-label="wrapping things up permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Wrapping things up</h2>
<p>We have uploaded the above example to the following GitHub repo so you can see a working example of the schema stitching.</p>
<p><a href="https://github.com/ChilliCream/hotchocolate-examples">Stitching Example</a></p>
<p>If you are using the example start the two remote schemas by switching to their respective directory and call <code class="language-text">dotnet run</code>.</p>
<p>After both schemas are running start the stitching layer. The stitching layer has <code class="language-text">Apollo Tracing</code> enabled. Start the stitching layer also with <code class="language-text">dotnet run</code> since the debugger slows the performance significantly down.</p>
<p>The first call on the stitched schema takes a little longer (maybe 300 ~ 500 ms) since we are compiling the resolvers into a in-memory assembly. All further calls are fast (4 ~ 8 ms) in our example. The real life performance depends on how fast your connection to the stitched remote schemas is and how many data you are fetching. With the new batching layer that is coming soon the performance of the schema stitching should further improve.</p>
<p>Open playground on <a href="http://localhost:5000/playground">http://localhost:5000/playground</a> in order to fire up some requests agains our stitched schema and checkout the tracing tab for performance insights.</p>
<p>The following query might be a good starting point since it will expose the ids of our objects.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="27068349632642460000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  customers {
    id
    contracts {
      id
    }
  }
}`, `27068349632642460000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  customers <span class="token punctuation">{</span>
    id
    contracts <span class="token punctuation">{</span>
      id
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>If you have further questions or need help you join our <a href="https://join.slack.com/t/hotchocolategraphql/shared_invite/enQtNTA4NjA0ODYwOTQ0LTViMzA2MTM4OWYwYjIxYzViYmM0YmZhYjdiNzBjOTg2ZmU1YmMwNDZiYjUyZWZlMzNiMTk1OWUxNWZhMzQwY2Q">slack channel</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Docusaurus - How to redirect requests to /docs to a default url instead of getting a 404 error]]></title>
            <link>https://chillicream.com/blog/2018/11/07/docusaurus-docs-redirect</link>
            <guid>/blog/2018/11/07/docusaurus-docs-redirect</guid>
            <pubDate>Wed, 07 Nov 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[I recently run into an HTTP 404 error when calling /docs on my Docusaurus websites. This isn't
actually nice, because I expected to land on…]]></description>
            <content:encoded><![CDATA[<p>I recently run into an HTTP 404 error when calling /docs on my <em>Docusaurus</em> websites. This isn't
actually nice, because I expected to land on my documentation entry page e.g. introduction. First I
thought, perhaps this is an issue with my setup. But I found out that even the <em>Docusaurus</em> website
itself is suffering from this issue as well. So I tried to find a solution on the internet. But
I couldn't find anything except an issue on github describing the same behavior. So, with this article
I try to help everyone saving their time and making the experience with <em>Docusaurus</em> even better.</p>
<p>So here is my solution.</p>
<ol>
<li>Go to your <code class="language-text">website\siteConfig.js</code> file and update the entry doc link in the <code class="language-text">headerLinks</code>
section by adding <code class="language-text">href: &quot;/docs&quot;</code> to it.</li>
</ol>
<p><strong>Before</strong></p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="7455357029546761000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  // code omitted for brevity
  headerLinks: [
    {
      doc: &quot;your-entry-doc&quot;,
      label: &quot;Docs&quot;,
    },
  ];
}`, `7455357029546761000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
  <span class="token comment">// code omitted for brevity</span>
  headerLinks<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      doc<span class="token operator">:</span> <span class="token string">"your-entry-doc"</span><span class="token punctuation">,</span>
      label<span class="token operator">:</span> <span class="token string">"Docs"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><strong>After</strong></p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="89013799547373910000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  // code omitted for brevity
  headerLinks: [
    {
      doc: &quot;your-entry-doc&quot;,
      href: &quot;/docs&quot;,
      label: &quot;Docs&quot;,
    },
  ];
}`, `89013799547373910000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
  <span class="token comment">// code omitted for brevity</span>
  headerLinks<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      doc<span class="token operator">:</span> <span class="token string">"your-entry-doc"</span><span class="token punctuation">,</span>
      href<span class="token operator">:</span> <span class="token string">"/docs"</span><span class="token punctuation">,</span>
      label<span class="token operator">:</span> <span class="token string">"Docs"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<ol start="2">
<li>Create a new file called <code class="language-text">docs.js</code> under the <code class="language-text">website\pages\en</code> path and insert the following
code.</li>
</ol>
<div
              class="gatsby-code-button-container"
              data-toaster-id="50382643195797930000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`/**
 * Copyright (c) 2017-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

const React = require(&quot;react&quot;);
const Redirect = require(&quot;../../core/Redirect.js&quot;);

const siteConfig = require(process.cwd() + &quot;/siteConfig.js&quot;);

function docUrl(doc, language) {
  return (
    siteConfig.baseUrl +
    &quot;docs/&quot; +
    (language ? language + &quot;/&quot; : &quot;&quot;) +
    doc +
    &quot;.html&quot;
  );
}

class Docs extends React.Component {
  render() {
    return (
      <Redirect
        redirect={docUrl(&quot;your-entry-doc&quot;, this.props.language)}
        config={siteConfig}
      />
    );
  }
}

module.exports = Docs;`, `50382643195797930000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">/**
 * Copyright (c) 2017-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */</span>

<span class="token keyword">const</span> React <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"react"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Redirect <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"../../core/Redirect.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> siteConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/siteConfig.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">docUrl</span><span class="token punctuation">(</span><span class="token parameter">doc<span class="token punctuation">,</span> language</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    siteConfig<span class="token punctuation">.</span>baseUrl <span class="token operator">+</span>
    <span class="token string">"docs/"</span> <span class="token operator">+</span>
    <span class="token punctuation">(</span>language <span class="token operator">?</span> language <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">+</span>
    doc <span class="token operator">+</span>
    <span class="token string">".html"</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Docs</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Redirect
        redirect<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">docUrl</span><span class="token punctuation">(</span><span class="token string">"your-entry-doc"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>language<span class="token punctuation">)</span><span class="token punctuation">}</span>
        config<span class="token operator">=</span><span class="token punctuation">{</span>siteConfig<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Docs<span class="token punctuation">;</span></code></pre></div>
<p>This code is just doing a redirect to <code class="language-text">/docs/your-entry-doc</code>. Don't forget to replace
<code class="language-text">your-entry-doc</code> with your own value.</p>
<p>Perfect! With this little change, our <em>Docusaurus</em> website is now able to handle requests to the
<code class="language-text">/docs</code> root path.</p>
<p>One little thing: I have tested it with <em>Docusaurus</em> version <code class="language-text">1.5.1</code>. However, just try it!</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GraphQL - Hot Chocolate 0.4.5]]></title>
            <link>https://chillicream.com/blog/2018/09/02/hot-chocolate-0.4.5</link>
            <guid>/blog/2018/09/02/hot-chocolate-0.4.5</guid>
            <pubDate>Sun, 02 Sep 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[With version 0.4.5 we closed a lot of spec gaps and refined the schema configuration API. We now are finished with implementing the query…]]></description>
            <content:encoded><![CDATA[<p>With version 0.4.5 we closed a lot of spec gaps and refined the schema configuration API.</p>
<p>We now are finished with implementing the query validation rules. The following rules were added since version 0.4.0:</p>
<ul>
<li>Argument Names <a href="https://github.com/ChilliCream/hotchocolate/issues/111">111</a></li>
<li>Fragments Must Be Used <a href="https://github.com/ChilliCream/hotchocolate/issues/116">116</a></li>
<li>Fragment Name Uniqueness <a href="https://github.com/ChilliCream/hotchocolate/issues/113">113</a></li>
<li>Leaf Field Selections <a href="https://github.com/ChilliCream/hotchocolate/issues/110">110</a></li>
<li>Fragments On Composite Types <a href="https://github.com/ChilliCream/hotchocolate/issues/115">115</a></li>
<li>Fragment spreads must not form cycles <a href="https://github.com/ChilliCream/hotchocolate/issues/118">118</a></li>
<li>Fragment spread target defined <a href="https://github.com/ChilliCream/hotchocolate/issues/117">117</a></li>
<li>Fragment spread is possible <a href="https://github.com/ChilliCream/hotchocolate/issues/119">119</a></li>
<li>Fragment Spread Type Existence <a href="https://github.com/ChilliCream/hotchocolate/issues/114">114</a></li>
<li>Input Object Field Names <a href="https://github.com/ChilliCream/hotchocolate/issues/121">121</a></li>
<li>Input Object Required Fields <a href="https://github.com/ChilliCream/hotchocolate/issues/123">123</a></li>
<li>Input Object Field Uniqueness <a href="https://github.com/ChilliCream/hotchocolate/issues/122">122</a></li>
<li>Directives Are Defined <a href="https://github.com/ChilliCream/hotchocolate/issues/124">124</a></li>
<li>Values of Correct Type <a href="https://github.com/ChilliCream/hotchocolate/issues/120">120</a></li>
</ul>
<p>We now also support the <code class="language-text">@deprectaed</code> directive when using schema-first.</p>
<p>Furthermore, we fixed a lot of bugs around schema-first. So, at the moment code-first is still the most viable way to create a schema,but we are working hard to get both flavours on par.</p>
<p>Apart from that we now allow for non-terminating errors within a field-resolver.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="50525508926243300000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public IEnumerable<ICharacter> GetCharacter(string[] characterIds, IResolverContext context)
{
    foreach (string characterId in characterIds)
    {
        ICharacter character = _repository.GetCharacter(characterId);
        if (character == null)
        {
            context.ReportError(
                &quot;Could not resolve a character for the &quot; +
                \$&quot;character-id {characterId}.&quot;);
        }
        else
        {
            yield return character;
        }
    }
}`, `50525508926243300000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>ICharacter<span class="token punctuation">></span></span> <span class="token function">GetCharacter</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> characterIds<span class="token punctuation">,</span> <span class="token class-name">IResolverContext</span> context<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> characterId <span class="token keyword">in</span> characterIds<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">ICharacter</span> character <span class="token operator">=</span> _repository<span class="token punctuation">.</span><span class="token function">GetCharacter</span><span class="token punctuation">(</span>characterId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>character <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            context<span class="token punctuation">.</span><span class="token function">ReportError</span><span class="token punctuation">(</span>
                <span class="token string">"Could not resolve a character for the "</span> <span class="token operator">+</span>
                <span class="token interpolation-string"><span class="token string">$"character-id </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">characterId</span><span class="token punctuation">}</span></span><span class="token string">."</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">yield</span> <span class="token keyword">return</span> character<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>If you want to share resolver logic between types in your schema you can now do that with shared resolvers which can be bound to fields:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="73607668178218440000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class PersonResolvers
{
    public Task<IEnumerable<Person>> GetFriends(Person person, [Service]IPersonRepository repository)
    {
        return repository.GetFriendsAsync(person.FriendIds);
    }
}

public class PersonType : ObjectType<Person>
{
    protected override void Configure(IObjectDescriptor<Person> desc)
    {
        desc.Field(t => t.FriendIds).Ignore();
        desc.Field<PersonResolver>(t => t.GetFriends(default, default));
    }
}`, `73607668178218440000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonResolvers</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IEnumerable<span class="token punctuation">&lt;</span>Person<span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">GetFriends</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">IPersonRepository</span> repository<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> repository<span class="token punctuation">.</span><span class="token function">GetFriendsAsync</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>FriendIds<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonType</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectType<span class="token punctuation">&lt;</span>Person<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IObjectDescriptor<span class="token punctuation">&lt;</span>Person<span class="token punctuation">></span></span> desc<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        desc<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>FriendIds<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Ignore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        desc<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Field</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>PersonResolver<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span><span class="token function">GetFriends</span><span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="what-comes-next" style="position:relative;"><a href="#what-comes-next" aria-label="what comes next permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>What Comes Next</h2>
<p>With version 0.5 we will focus on subscriptions and custom directives.</p>
<p>Custom will allow for writing field resolver middlewares that alter or replace the default execution behaviour.</p>
<p>Subscriptions is one of our last spec gaps.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GraphQL - Hot Chocolate 0.4.0]]></title>
            <link>https://chillicream.com/blog/2018/07/31/hot-chocolate-0.4.0</link>
            <guid>/blog/2018/07/31/hot-chocolate-0.4.0</guid>
            <pubDate>Tue, 31 Jul 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[With this version we introduce support for DataLoaders and custom context objects. Data Loaders Here is a short introduction to DataLoaders…]]></description>
            <content:encoded><![CDATA[<p>With this version we introduce support for <em>DataLoaders</em> and custom context objects.</p>
<h2 id="data-loaders" style="position:relative;"><a href="#data-loaders" aria-label="data loaders permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Data Loaders</h2>
<p>Here is a short introduction to <em>DataLoaders</em>.</p>
<blockquote>
<p>A DataLoader is a generic utility to be used as part of your application's data fetching layer to
provide a consistent API over various backends and reduce requests to those backends via batching
and caching. -- facebook</p>
</blockquote>
<p>If you want to read more about <em>DataLoaders</em> in general, you can head over to Facebook's <a href="https://github.com/facebook/dataloader">GitHub repository</a>.</p>
<p>GraphQL is very flexible in the way you can request data. This flexibility also introduces new classes of problems called <em>n+1</em> issues for the GraphQL server developer.</p>
<p>In order to depict the issue that DataLoaders solve in this context, let me introduce a little GraphQL schema:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="46125007625844750000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`type Query {
  person(id: ID): Person
}

type Person {
  id: ID
  name: String
  friends: [Person]
}`, `46125007625844750000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">person</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token punctuation">)</span><span class="token punctuation">:</span> Person
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID
  <span class="token attr-name">name</span><span class="token punctuation">:</span> String
  <span class="token attr-name">friends</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Person<span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The above schema allows to fetch a person by its internal identifier and each person has a list of friends that is represented by a list of persons.</p>
<p>Since GraphQL requests are not fixed requests like REST requests, the developer really defines what data he/she wants. This avoids overfetching data that you do not need and also saves you unecessary roundtrips to the GraphQL backend.</p>
<p>So, a query against the above schema could look like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="53338514170991624000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  a: person(id: &quot;a&quot;) {
    name
  }

  b: person(id: &quot;b&quot;) {
    name
  }
}`, `53338514170991624000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  <span class="token attr-name">a</span><span class="token punctuation">:</span> person<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token string">"a"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
  <span class="token punctuation">}</span>

  <span class="token attr-name">b</span><span class="token punctuation">:</span> person<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token string">"b"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The above request fetches two persons in one go without the need to call the backend twice. The problem for the GraphQL backend is that field resolvers are atomic and do not have any knoledge about the query as a whole. So, a field resolver does not know that it will be called multiple times in parallel to fetch similar or equal data from the same data source.</p>
<p>This basically represents the first case where <em>DataLoaders</em> help us by batching requests against our database or backend service. Currently, we allow <em>DataLoaders</em> per request and globally.</p>
<p>So, let's look at some code in order to understand what they are doing. First, let's have a look at how we would write our field resolver without <em>DataLoaders</em>:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="11340628731681490000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public async Task<Person> GetPerson(string id, [Service]IPersonRepository repository)
{
    return await repository.GetPersonById(id);
}`, `11340628731681490000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>Person<span class="token punctuation">></span></span> <span class="token function">GetPerson</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> id<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">IPersonRepository</span> repository<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> repository<span class="token punctuation">.</span><span class="token function">GetPersonById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The above example would result in two calls to the person repository that would than fetch the persons one by one from our data source.</p>
<p>If you think that through you can see that each GraphQL request would cause multiple requests to our data source resulting in slugish performance and uneccessary roundtrips to our data source.</p>
<p>This, means that we reduced the roundtrips from our client to our server with GraphQL but multiplied the roundtrips between the data sources and the service layer.</p>
<p>With <em>DataLoaders</em> we can now centralise our person fetching and reduce the number of round trips to our data source.</p>
<p>First, we have to create a <em>DataLoader</em> that now acts as intermediary between a field resolver and the data source.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="17204865512206723000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public class PersonDataLoader
    : DataLoaderBase<string, Person>
{
    private readonly IPersonRepository _repository;

    public PersonDataLoader(IPersonRepository repository)
        : base(new DataLoaderOptions<string>())
    {
        _repository = repository;
    }

    protected override Task<IReadOnlyList<Result<string>>> Fetch(
        IReadOnlyList<string> keys)
    {
        return _repository.GetPersonBatch(keys);
    }
}`, `17204865512206723000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonDataLoader</span>
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">DataLoaderBase<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> Person<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">IPersonRepository</span> _repository<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">PersonDataLoader</span><span class="token punctuation">(</span><span class="token class-name">IPersonRepository</span> repository<span class="token punctuation">)</span>
        <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">DataLoaderOptions<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _repository <span class="token operator">=</span> repository<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IReadOnlyList<span class="token punctuation">&lt;</span>Result<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">Fetch</span><span class="token punctuation">(</span>
        <span class="token class-name">IReadOnlyList<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span> keys<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> _repository<span class="token punctuation">.</span><span class="token function">GetPersonBatch</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The <em>DataLoader</em> is now injected by the execution engine as a field resolver argument.</p>
<p><em>DataLoaders</em> have to be injected at field resolver argument level and <strong>NOT</strong> as constructor arguments since the lifetime of a <em>DataLoader</em> is in many cases shorter than the class containing the field resolvers.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="57099934070410170000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public Task<Person> GetPerson(string id, [DataLoader]PersonDataLoader personLoader)
{
    return personLoader.LoadAsync(id);
}`, `57099934070410170000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>Person<span class="token punctuation">></span></span> <span class="token function">GetPerson</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> id<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DataLoader</span></span><span class="token punctuation">]</span><span class="token class-name">PersonDataLoader</span> personLoader<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> personLoader<span class="token punctuation">.</span><span class="token function">LoadAsync</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Next, we have to register our <em>DataLoader</em> with the schema. By default, <em>DataLoaders</em> are registerd as per-request meaning that the execution engine will create one instance of each <em>DataLoader</em> per-request <strong>if</strong> a field resolver has requested a <em>DataLoader</em>. This ensures that, <em>DataLoaders</em> that are not beeing requested are not instantiated unnecessarily.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="3481491972272299000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`Schema.Create(c =>
{
    // your other code...

    c.RegisterDataLoader<PersonDataLoader>();
});`, `3481491972272299000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">Schema<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
<span class="token punctuation">{</span>
    <span class="token comment">// your other code...</span>

    c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterDataLoader</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>PersonDataLoader<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Now, person requests in a single execution batch will be batched to the data source.</p>
<p>But there are still some more issues ahead that <em>DataLoaders</em> will help us with. For that we should amend our query a little bit.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="82750884121095570000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  a: person(id: &quot;a&quot;) {
    name
    friends {
      name
    }
  }

  b: person(id: &quot;b&quot;) {
    name
    friends {
      name
    }
  }
}`, `82750884121095570000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  <span class="token attr-name">a</span><span class="token punctuation">:</span> person<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token string">"a"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
    friends <span class="token punctuation">{</span>
      name
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token attr-name">b</span><span class="token punctuation">:</span> person<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token string">"b"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
    friends <span class="token punctuation">{</span>
      name
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The above query now drills down into the friends property, which again yields persons.</p>
<p>Let's, say our person object is located in a mongo database and the document would look something like the following:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="31243664993516140000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`{
  &quot;id&quot;:&quot;a&quot;
  &quot;name&quot;:&quot;Foo&quot;
  &quot;friends&quot;: [
    &quot;b&quot;,
    &quot;c&quot;,
    &quot;d&quot;
  ]
}

{
  &quot;id&quot;:&quot;b&quot;
  &quot;name&quot;:&quot;Bar&quot;
  &quot;friends&quot;: [
    &quot;a&quot;,
    &quot;c&quot;,
    &quot;e&quot;
  ]
}`, `31243664993516140000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"a"</span>
  <span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Foo"</span>
  <span class="token property">"friends"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"b"</span><span class="token punctuation">,</span>
    <span class="token string">"c"</span><span class="token punctuation">,</span>
    <span class="token string">"d"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token punctuation">{</span>
  <span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"b"</span>
  <span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Bar"</span>
  <span class="token property">"friends"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"a"</span><span class="token punctuation">,</span>
    <span class="token string">"c"</span><span class="token punctuation">,</span>
    <span class="token string">"e"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The person with ID <code class="language-text">a</code> is also friends with person <code class="language-text">b</code>. Moreover, <code class="language-text">a</code> is also friends with <code class="language-text">c</code> and <code class="language-text">d</code>. Furthermore, <code class="language-text">b</code> is friends with <code class="language-text">a</code> and also friends with <code class="language-text">c</code> and <code class="language-text">e</code>.
The best case now would be that we only fetch <code class="language-text">c</code>, <code class="language-text">d</code> and <code class="language-text">e</code> since we have already fetched <code class="language-text">a</code> and <code class="language-text">b</code>.</p>
<p>This is the second problem class the <em>DataLoader</em> utility helps us with since the <em>DataLoader</em> contains a cache and holds the resolved instances by default for the duration of your request.</p>
<p>For more information about our <em>DataLoader</em> implementation head over to our <em>DataLoader</em> <a href="https://github.com/ChilliCream/greendonut">GitHub repository</a>.</p>
<p>As a side note, you are not bound to our <em>DataLoader</em> implementation. If you want to create your own implementation of <em>DataLoaders</em> or if you already have a <em>DataLoader</em> implementation then you can hook this up to our execution engine as well. I will explain this in the <em>DataLoader</em> documentation once I have finalised it.</p>
<h2 id="custom-context-objects" style="position:relative;"><a href="#custom-context-objects" aria-label="custom context objects permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Custom Context Objects</h2>
<p>Custom context objects are basically custom .net objects that you can declare with the GraphQL engine and access throughout your request execution. Custom context objects can use dependency injection and have the same scoping as the <em>DataLoaders</em>.</p>
<p>For example you could declare a class that handles authorithation for your service like an IPrincipal and access this in each resolver.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="28624961777619310000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public Task<ResolverResult<Person>> GetPerson(string id, [State]MyPrincipal principal)
{
    if(principal.IsInRole(&quot;foo&quot;))
    {
      return new ResolverResult<Person>(personLoader.LoadAsync(id));
    }
    return new ResolverResult<Person>(
      &quot;You do not have the access role to access this person.&quot;);
}`, `28624961777619310000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>ResolverResult<span class="token punctuation">&lt;</span>Person<span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">GetPerson</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> id<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">State</span></span><span class="token punctuation">]</span><span class="token class-name">MyPrincipal</span> principal<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>principal<span class="token punctuation">.</span><span class="token function">IsInRole</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ResolverResult<span class="token punctuation">&lt;</span>Person<span class="token punctuation">></span></span><span class="token punctuation">(</span>personLoader<span class="token punctuation">.</span><span class="token function">LoadAsync</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ResolverResult<span class="token punctuation">&lt;</span>Person<span class="token punctuation">></span></span><span class="token punctuation">(</span>
      <span class="token string">"You do not have the access role to access this person."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Moreover, you can use this custom context to store states in or caches during execution time. This will become especially usefull with our next version when we allow the writing of custom schema directives and field resolver middlewares.</p>
<p>Custom context objects are registerd like <em>DataLoaders</em>:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="78648946430463920000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`Schema.Create(c =>
{
    // your other code...

    c.RegisterCustomContext<MyPrincipal>();
});`, `78648946430463920000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">Schema<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>c <span class="token operator">=></span>
<span class="token punctuation">{</span>
    <span class="token comment">// your other code...</span>

    c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterCustomContext</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyPrincipal<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Like with <em>DataLoaders</em> we have muliple <code class="language-text">RegisterCustomContext</code> overloads that allow for more control over how the object is created.</p>
<h2 id="query-validation" style="position:relative;"><a href="#query-validation" aria-label="query validation permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Query Validation</h2>
<p>With this release we have also implemented the following query validation rules:</p>
<ul>
<li><a href="http://facebook.github.io/graphql/June2018/#sec-All-Variables-Used">All Variables Used</a></li>
<li><a href="http://facebook.github.io/graphql/June2018/#sec-All-Variable-Uses-Defined">All Variable Uses Defined</a></li>
<li><a href="http://facebook.github.io/graphql/June2018/#sec-Directives-Are-In-Valid-Locations">Directives Are In Valid Locations</a></li>
<li><a href="http://facebook.github.io/graphql/June2018/#sec-Directives-Are-Unique-Per-Location">Directives Are Unique Per Location</a></li>
<li><a href="http://facebook.github.io/graphql/June2018/#sec-Variables-Are-Input-Types">Variables Are Input Types</a></li>
<li><a href="http://facebook.github.io/graphql/June2018/#sec-Field-Selection-Merging">Field Selection Merging</a></li>
</ul>
<p>You can follow our progress on which rule is implemented <a href="https://github.com/ChilliCream/hotchocolate/projects/3">here</a>.</p>
<p>We plan for full compliance with the June 2018 spec version with version 0.6.0.</p>
<h2 id="dependency-injection" style="position:relative;"><a href="#dependency-injection" aria-label="dependency injection permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Dependency Injection</h2>
<p>We reworked out dependency injection approach and have now integreaded the request services during request execution. Meaning you are now able to access HttpContext directly as a field resolver argument.</p>
<p>This was already possible with the old version through the accessor as a constructor injection.</p>
<p>Generally speaking, you can now let the execution engine inject any service as a field resolver argument.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="73929384226156310000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`public async Task<Person> Example1(string id, [Service]IPersonRepository repository)
{
    return await repository.GetPersonById(id);
}


public async Task<Person> Example2(string id, [Service]HttpContext context)
{
    return await repository.GetPersonById(id);
}`, `73929384226156310000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>Person<span class="token punctuation">></span></span> <span class="token function">Example1</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> id<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">IPersonRepository</span> repository<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> repository<span class="token punctuation">.</span><span class="token function">GetPersonById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>Person<span class="token punctuation">></span></span> <span class="token function">Example2</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> id<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Service</span></span><span class="token punctuation">]</span><span class="token class-name">HttpContext</span> context<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> repository<span class="token punctuation">.</span><span class="token function">GetPersonById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>It is important to know that http related services are only available if the execution engine runs integrated into ASP.net core. So, basically if you are using our middleware.</p>
<p>From a design standpoint you should avoid accessing this directly and think about a custom context object which would provide some abstraction.</p>
<p>I will write some more on dependency injection sometime later this week.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Green Donut 0.2.0]]></title>
            <link>https://chillicream.com/blog/2018/07/30/green-donut-0.2.0</link>
            <guid>/blog/2018/07/30/green-donut-0.2.0</guid>
            <pubDate>Mon, 30 Jul 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[Today we proudly released the first version of Green Donut -- a DataLoader implementation for .net core and classic. Additional Features…]]></description>
            <content:encoded><![CDATA[<p>Today we proudly released the first version of <em>Green Donut</em> -- a <em>DataLoader</em> implementation for <em>.net core</em> and <em>classic</em>.</p>
<p><strong>Additional Features</strong></p>
<ul>
<li><em>Sliding Expiration</em> for caching (default is set to zero which means that the entries in the cache will never expire)</li>
<li><em>Manual Dispatching</em> for dispatching programmatically</li>
</ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[React Rasta 1.0.0]]></title>
            <link>https://chillicream.com/blog/2018/05/03/react-rasta-1.0.0</link>
            <guid>/blog/2018/05/03/react-rasta-1.0.0</guid>
            <pubDate>Thu, 03 May 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[Today we proudly released the first version of React Rasta. React Rasta is a responsive 12 column grid system which offers a lot of features…]]></description>
            <content:encoded><![CDATA[<p>Today we proudly released the first version of <em>React Rasta</em>.</p>
<p><em>React Rasta</em> is a responsive 12 column grid system which offers a lot of features and flexibility.
Its <em>API</em> is clean and simple to ease development. <em>React Rasta</em> is also well tested to guarantee
high quality. We hope <em>React Rasta</em> will support you by creating great application. Have fun!</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[How to create a Form Wizard using jQuery Steps]]></title>
            <link>https://chillicream.com/blog/2013/09/12/jquery-steps-form-wizard</link>
            <guid>/blog/2013/09/12/jquery-steps-form-wizard</guid>
            <pubDate>Thu, 12 Sep 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[This blog article was previously published on http://www.rafaelstaib.com/post/How-to-create-a-Form-Wizard-using-jQuery-Steps. Motivation…]]></description>
            <content:encoded><![CDATA[<p>This blog article was previously published on <a href="http://www.rafaelstaib.com/post/How-to-create-a-Form-Wizard-using-jQuery-Steps">http://www.rafaelstaib.com/post/How-to-create-a-Form-Wizard-using-jQuery-Steps</a>.</p>
<h2 id="motivation" style="position:relative;"><a href="#motivation" aria-label="motivation permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Motivation</h2>
<p>Sometimes it's better to separate a large or complex form into different sections. It’s because your form looks much cleaner and less difficult. Despite that fact people want to be guided through complex processes without understanding those deeply.</p>
<h2 id="situation" style="position:relative;"><a href="#situation" aria-label="situation permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Situation</h2>
<p>There are many options to realize such a form wizard. You could use for example just static HTML files for each step one and link them together. But this, actually, could be really frustrating for you and the people visiting your site. Think of maintaining an existing wizard (e.g. adding a new step or changing links) then you have to touch in worst case all the existing steps that are involved. On the other hand your visitors get frustrated because of the many page requests and their accompanying latency time. However, all this isn’t probably new for you. Therefore, let’s step over!</p>
<h2 id="solution" style="position:relative;"><a href="#solution" aria-label="solution permalink" class="anchor before"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Solution</h2>
<p>Let me explain you how I usually solve this problem. I prefer using <strong>jQuery Steps</strong> a jQuery UI plugin because of its simplicity and feature-richness. And most important it’s free (open source). Just grab and use it!</p>
<p>But for now enough words - let’s get our hands dirty!</p>
<p>First of all, we will download <strong>jQuery Steps</strong> from <a href="http://www.jquery-steps.com">here</a> and take the basic example markup from <a href="http://www.jquery-steps.com/GettingStarted#basic">there</a> – done. Not really but it isn’t far away from being done.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="33880259221585265000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`<!DOCTYPE html>
<html>
  <head>
    <title>Demo</title>
    <meta charset=&quot;utf-8&quot; />
    <script src=&quot;jquery.js&quot;></script>
    <script src=&quot;jquery.steps.js&quot;></script>
    <link href=&quot;jquery.steps.css&quot; rel=&quot;stylesheet&quot; />
  </head>
  <body>
    <script>
      \$(&quot;#wizard&quot;).steps();
    </script>
    <div id=&quot;wizard&quot;></div>
  </body>
</html>`, `33880259221585265000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jquery.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jquery.steps.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jquery.steps.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
      <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#wizard"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">steps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wizard<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre></div>
<p>What else? We have to replace this <code class="language-text">&lt;div id=&quot;wizard&quot;&gt;&lt;/div&gt;</code> part by our own form markup and override the bodyTag property on initialization.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="40964847949968560000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`<form id=&quot;form-3&quot; action=&quot;#&quot;>
  <h1>Account</h1>
  <fieldset>
    <legend>Account Information</legend>

    <label for=&quot;userName&quot;>User name *</label>
    <input id=&quot;userName&quot; name=&quot;userName&quot; type=&quot;text&quot; class=&quot;required&quot; />
    <label for=&quot;password&quot;>Password *</label>
    <input id=&quot;password&quot; name=&quot;password&quot; type=&quot;text&quot; class=&quot;required&quot; />
    <label for=&quot;confirm&quot;>Confirm Password *</label>
    <input id=&quot;confirm&quot; name=&quot;confirm&quot; type=&quot;text&quot; class=&quot;required&quot; />
    <p>(*) Mandatory</p>
  </fieldset>

  <h1>Profile</h1>
  <fieldset>
    <legend>Profile Information</legend>

    <label for=&quot;name&quot;>First name *</label>
    <input id=&quot;name&quot; name=&quot;name&quot; type=&quot;text&quot; class=&quot;required&quot; />
    <label for=&quot;surname&quot;>Last name *</label>
    <input id=&quot;surname&quot; name=&quot;surname&quot; type=&quot;text&quot; class=&quot;required&quot; />
    <label for=&quot;email&quot;>Email *</label>
    <input id=&quot;email&quot; name=&quot;email&quot; type=&quot;text&quot; class=&quot;required email&quot; />
    <label for=&quot;address&quot;>Address</label>
    <input id=&quot;address&quot; name=&quot;address&quot; type=&quot;text&quot; />
    <label for=&quot;age&quot;
      >Age (The warning step will show up if age is less than 18) *</label
    >
    <input id=&quot;age&quot; name=&quot;age&quot; type=&quot;text&quot; class=&quot;required number&quot; />
    <p>(*) Mandatory</p>
  </fieldset>

  <h1>Warning</h1>
  <fieldset>
    <legend>You are to young</legend>

    <p>Please go away ;-)</p>
  </fieldset>

  <h1>Finish</h1>
  <fieldset>
    <legend>Terms and Conditions</legend>

    <input
      id=&quot;acceptTerms&quot;
      name=&quot;acceptTerms&quot;
      type=&quot;checkbox&quot;
      class=&quot;required&quot;
    />
    <label for=&quot;acceptTerms&quot;>I agree with the Terms and Conditions.</label>
  </fieldset>
</form>`, `40964847949968560000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-3<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Account<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>legend</span><span class="token punctuation">></span></span>Account Information<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>legend</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>User name *<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userName<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userName<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>required<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Password *<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>required<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>confirm<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Confirm Password *<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>confirm<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>confirm<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>required<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>(*) Mandatory<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Profile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>legend</span><span class="token punctuation">></span></span>Profile Information<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>legend</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>First name *<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>required<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>surname<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Last name *<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>surname<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>surname<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>required<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Email *<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>required email<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>address<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>address<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>address<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>age<span class="token punctuation">"</span></span>
      <span class="token punctuation">></span></span>Age (The warning step will show up if age is less than 18) *<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span>
    <span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>age<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>age<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>required number<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>(*) Mandatory<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Warning<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>legend</span><span class="token punctuation">></span></span>You are to young<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>legend</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Please go away ;-)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Finish<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>legend</span><span class="token punctuation">></span></span>Terms and Conditions<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>legend</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
      <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>acceptTerms<span class="token punctuation">"</span></span>
      <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>acceptTerms<span class="token punctuation">"</span></span>
      <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>required<span class="token punctuation">"</span></span>
    <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>acceptTerms<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>I agree with the Terms and Conditions.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre></div>
<p>This is just a normal form which you should be familiar with. The small difference <a href="http://www.jquery-steps.com/Examples#advanced-form">here</a> is that we use a h1 tag on top of each fieldset tag. <strong>jQuery Steps</strong> needs that to build the wizard navigation. I grabbed that from here and there you can also see how it works in action.</p>
<p>The following code shows how to override the bodyTag property in order to tell <strong>jQuery Steps</strong> to use the fieldset tag as body container instead of div.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="26544231063124760000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`\$(&quot;#wizard&quot;).steps({
  bodyTag: &quot;fieldset&quot;,
});`, `26544231063124760000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#wizard"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">steps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  bodyTag<span class="token operator">:</span> <span class="token string">"fieldset"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Actually, we are done but to offer users a rich and intuitive experience we will add an additional jQuery plugin which all of you very probably already know; <strong>jQuery Validation</strong> (for more Information see <a href="http://jqueryvalidation.org/">here</a>). It's a plugin for doing form input validation. Furthermore, we will attach four event handler functions containing some extra magic. Finally, we will initialize <strong>jQuery Validation</strong>. Since both plugins are built on top of <strong>jQuery</strong>, we can make use of chaining (e.g. <code class="language-text">$(&quot;#form&quot;).steps().validate()</code>). Okay, before we start adding more code take a brief look on the following table that explains the four events we will shortly add.</p>
<table>
<thead>
<tr>
<th>Event</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="language-text">onStepChanging</code></td>
<td>Fires before the step changes and can be used to prevent step changing by returning <code class="language-text">false</code>. Very useful for form validation or checking preconditions.</td>
</tr>
<tr>
<td><code class="language-text">onStepChanged</code></td>
<td>Fires after the step has change.</td>
</tr>
<tr>
<td><code class="language-text">onFinishing</code></td>
<td>Fires before finishing and can be used to prevent completion by returning <code class="language-text">false</code>. Very useful for form validation or checking preconditions.</td>
</tr>
<tr>
<td><code class="language-text">onFinished</code></td>
<td>Fires after completion.</td>
</tr>
</tbody>
</table>
<p>These useful events will help us realizing pretty neat functionality. So the events ending on -ing will be invoked right after an user interaction but before any internal logic gets executed. Those events will be very helpful to prevent step changing and submission. The events ending with -ed will happen after everything is executed and let us execute custom logic (e.g. skipping a step and submitting a form via AJAX).</p>
<p>Internally, it's implemented like this:</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="25143079993619223000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`if (wizard.triggerHandler(&quot;stepChanging&quot;, [state.currentIndex, index])) {
  // Internal logic

  wizard.triggerHandler(&quot;stepChanged&quot;, [index, oldIndex]);
}`, `25143079993619223000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>wizard<span class="token punctuation">.</span><span class="token function">triggerHandler</span><span class="token punctuation">(</span><span class="token string">"stepChanging"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>state<span class="token punctuation">.</span>currentIndex<span class="token punctuation">,</span> index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Internal logic</span>

  wizard<span class="token punctuation">.</span><span class="token function">triggerHandler</span><span class="token punctuation">(</span><span class="token string">"stepChanged"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>index<span class="token punctuation">,</span> oldIndex<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>With that in mind you know how it works. The first event function we are going to add to the settings is <code class="language-text">onStepChanging</code>. This Implementation allows us to react before things are going to change.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="50888890118091650000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`onStepChanging: function (event, currentIndex, newIndex)
{
    // Always allow going backward even if the current step contains invalid fields!
    if (currentIndex > newIndex)
    {
        return true;
    }

    // Forbid suppressing &quot;Warning&quot; step if the user is to young
    if (newIndex === 3 && Number(\$(&quot;#age&quot;).val()) < 18)
    {
        return false;
    }

    var form = \$(this);

    // Clean up if user went backward before
    if (currentIndex < newIndex)
    {
        // To remove error styles
        \$(&quot;.body:eq(&quot; + newIndex + &quot;) label.error&quot;, form).remove();
        \$(&quot;.body:eq(&quot; + newIndex + &quot;) .error&quot;, form).removeClass(&quot;error&quot;);
    }

    // Disable validation on fields that are disabled or hidden.
    form.validate().settings.ignore = &quot;:disabled,:hidden&quot;;

    // Start validation; Prevent going forward if false
    return form.valid();
}`, `50888890118091650000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function-variable function">onStepChanging</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> currentIndex<span class="token punctuation">,</span> newIndex</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Always allow going backward even if the current step contains invalid fields!</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentIndex <span class="token operator">></span> newIndex<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Forbid suppressing "Warning" step if the user is to young</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newIndex <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#age"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">18</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> form <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Clean up if user went backward before</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentIndex <span class="token operator">&lt;</span> newIndex<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// To remove error styles</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".body:eq("</span> <span class="token operator">+</span> newIndex <span class="token operator">+</span> <span class="token string">") label.error"</span><span class="token punctuation">,</span> form<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".body:eq("</span> <span class="token operator">+</span> newIndex <span class="token operator">+</span> <span class="token string">") .error"</span><span class="token punctuation">,</span> form<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Disable validation on fields that are disabled or hidden.</span>
    form<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>settings<span class="token punctuation">.</span>ignore <span class="token operator">=</span> <span class="token string">":disabled,:hidden"</span><span class="token punctuation">;</span>

    <span class="token comment">// Start validation; Prevent going forward if false</span>
    <span class="token keyword">return</span> form<span class="token punctuation">.</span><span class="token function">valid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The second event function contains some logic to skip the warning step we added before.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="16614769798531738000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`onStepChanged: function (event, currentIndex, priorIndex)
{
    // Suppress (skip) &quot;Warning&quot; step if the user is old enough and wants to the previous step.
    if (currentIndex === 2 && priorIndex === 3)
    {
        \$(this).steps(&quot;previous&quot;);
        return;
    }

    // Suppress (skip) &quot;Warning&quot; step if the user is old enough.
    if (currentIndex === 2 && Number(\$(&quot;#age&quot;).val()) >= 18)
    {
        \$(this).steps(&quot;next&quot;);
    }
}`, `16614769798531738000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function-variable function">onStepChanged</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> currentIndex<span class="token punctuation">,</span> priorIndex</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Suppress (skip) "Warning" step if the user is old enough and wants to the previous step.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentIndex <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> priorIndex <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">steps</span><span class="token punctuation">(</span><span class="token string">"previous"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Suppress (skip) "Warning" step if the user is old enough.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentIndex <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#age"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">18</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">steps</span><span class="token punctuation">(</span><span class="token string">"next"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The next two event functions allow us to handle submission and submission prevention.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="52898421122150466000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`onFinishing: function (event, currentIndex)
{
    var form = \$(this);

    // Disable validation on fields that are disabled.
    // At this point it's recommended to do an overall check (mean ignoring only disabled fields)
    form.validate().settings.ignore = &quot;:disabled&quot;;

    // Start validation; Prevent form submission if false
    return form.valid();
}`, `52898421122150466000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function-variable function">onFinishing</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> currentIndex</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">var</span> form <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Disable validation on fields that are disabled.</span>
    <span class="token comment">// At this point it's recommended to do an overall check (mean ignoring only disabled fields)</span>
    form<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>settings<span class="token punctuation">.</span>ignore <span class="token operator">=</span> <span class="token string">":disabled"</span><span class="token punctuation">;</span>

    <span class="token comment">// Start validation; Prevent form submission if false</span>
    <span class="token keyword">return</span> form<span class="token punctuation">.</span><span class="token function">valid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The latter event function is required for form submission.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="970312189124911100"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`onFinished: function (event, currentIndex)
{
    var form = \$(this);

    // Submit form input
    form.submit();
}`, `970312189124911100`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function-variable function">onFinished</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> currentIndex</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">var</span> form <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Submit form input</span>
    form<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The final JavaScript code looks like this after we stick everything together.</p>
<div
              class="gatsby-code-button-container"
              data-toaster-id="35518787800845210000"
              data-toaster-class="gatsby-code-button-toaster"
              data-toaster-text-class="gatsby-code-button-toaster-text"
              data-toaster-text="Copied code example"
              data-toaster-duration="3500"
              onClick="copyToClipboard(`\$(&quot;#form&quot;)
  .steps({
    bodyTag: &quot;fieldset&quot;,
    onStepChanging: function (event, currentIndex, newIndex) {
      // Always allow going backward even if the current step contains invalid fields!
      if (currentIndex > newIndex) {
        return true;
      }

      // Forbid suppressing &quot;Warning&quot; step if the user is to young
      if (newIndex === 3 && Number(\$(&quot;#age&quot;).val()) < 18) {
        return false;
      }

      var form = \$(this);

      // Clean up if user went backward before
      if (currentIndex < newIndex) {
        // To remove error styles
        \$(&quot;.body:eq(&quot; + newIndex + &quot;) label.error&quot;, form).remove();
        \$(&quot;.body:eq(&quot; + newIndex + &quot;) .error&quot;, form).removeClass(&quot;error&quot;);
      }

      // Disable validation on fields that are disabled or hidden.
      form.validate().settings.ignore = &quot;:disabled,:hidden&quot;;

      // Start validation; Prevent going forward if false
      return form.valid();
    },
    onStepChanged: function (event, currentIndex, priorIndex) {
      // Suppress (skip) &quot;Warning&quot; step if the user is old enough and wants to the previous step.
      if (currentIndex === 2 && priorIndex === 3) {
        \$(this).steps(&quot;previous&quot;);
        return;
      }

      // Suppress (skip) &quot;Warning&quot; step if the user is old enough.
      if (currentIndex === 2 && Number(\$(&quot;#age&quot;).val()) >= 18) {
        \$(this).steps(&quot;next&quot;);
      }
    },
    onFinishing: function (event, currentIndex) {
      var form = \$(this);

      // Disable validation on fields that are disabled.
      // At this point it's recommended to do an overall check (mean ignoring only disabled fields)
      form.validate().settings.ignore = &quot;:disabled&quot;;

      // Start validation; Prevent form submission if false
      return form.valid();
    },
    onFinished: function (event, currentIndex) {
      var form = \$(this);

      // Submit form input
      form.submit();
    },
  })
  .validate({
    errorPlacement: function (error, element) {
      element.before(error);
    },
    rules: {
      confirm: {
        equalTo: &quot;#password&quot;,
      },
    },
  });`, `35518787800845210000`)"
            >
              <div
                class="gatsby-code-button"
                data-tooltip="Copy"
              >
                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>
              </div>
            </div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#form"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">steps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    bodyTag<span class="token operator">:</span> <span class="token string">"fieldset"</span><span class="token punctuation">,</span>
    <span class="token function-variable function">onStepChanging</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> currentIndex<span class="token punctuation">,</span> newIndex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Always allow going backward even if the current step contains invalid fields!</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentIndex <span class="token operator">></span> newIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// Forbid suppressing "Warning" step if the user is to young</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>newIndex <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#age"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">18</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">var</span> form <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Clean up if user went backward before</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentIndex <span class="token operator">&lt;</span> newIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// To remove error styles</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".body:eq("</span> <span class="token operator">+</span> newIndex <span class="token operator">+</span> <span class="token string">") label.error"</span><span class="token punctuation">,</span> form<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".body:eq("</span> <span class="token operator">+</span> newIndex <span class="token operator">+</span> <span class="token string">") .error"</span><span class="token punctuation">,</span> form<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// Disable validation on fields that are disabled or hidden.</span>
      form<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>settings<span class="token punctuation">.</span>ignore <span class="token operator">=</span> <span class="token string">":disabled,:hidden"</span><span class="token punctuation">;</span>

      <span class="token comment">// Start validation; Prevent going forward if false</span>
      <span class="token keyword">return</span> form<span class="token punctuation">.</span><span class="token function">valid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">onStepChanged</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> currentIndex<span class="token punctuation">,</span> priorIndex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Suppress (skip) "Warning" step if the user is old enough and wants to the previous step.</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentIndex <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> priorIndex <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">steps</span><span class="token punctuation">(</span><span class="token string">"previous"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// Suppress (skip) "Warning" step if the user is old enough.</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentIndex <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#age"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">18</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">steps</span><span class="token punctuation">(</span><span class="token string">"next"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">onFinishing</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> currentIndex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> form <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Disable validation on fields that are disabled.</span>
      <span class="token comment">// At this point it's recommended to do an overall check (mean ignoring only disabled fields)</span>
      form<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>settings<span class="token punctuation">.</span>ignore <span class="token operator">=</span> <span class="token string">":disabled"</span><span class="token punctuation">;</span>

      <span class="token comment">// Start validation; Prevent form submission if false</span>
      <span class="token keyword">return</span> form<span class="token punctuation">.</span><span class="token function">valid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">onFinished</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> currentIndex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> form <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Submit form input</span>
      form<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">errorPlacement</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      element<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rules<span class="token operator">:</span> <span class="token punctuation">{</span>
      confirm<span class="token operator">:</span> <span class="token punctuation">{</span>
        equalTo<span class="token operator">:</span> <span class="token string">"#password"</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Any questions or comments are very welcome!</p>]]></content:encoded>
        </item>
    </channel>
</rss>
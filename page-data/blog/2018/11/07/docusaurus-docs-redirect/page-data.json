{"componentChunkName":"component---src-templates-blog-article-template-tsx","path":"/blog/2018/11/07/docusaurus-docs-redirect","result":{"data":{"markdownRemark":{"frontmatter":{"featuredImage":null,"path":"/blog/2018/11/07/docusaurus-docs-redirect","title":"Docusaurus - How to redirect requests to /docs to a default url instead of getting a 404 error","tags":["docusaurus"],"author":"Rafael Staib","authorImageUrl":"https://avatars0.githubusercontent.com/u/4325318?s=100&v=4","authorUrl":"https://github.com/rstaib","date":"November 07, 2018"},"html":"<p>I recently run into an HTTP 404 error when calling /docs on my <em>Docusaurus</em> websites. This isn't\nactually nice, because I expected to land on my documentation entry page e.g. introduction. First I\nthought, perhaps this is an issue with my setup. But I found out that even the <em>Docusaurus</em> website\nitself is suffering from this issue as well. So I tried to find a solution on the internet. But\nI couldn't find anything except an issue on github describing the same behavior. So, with this article\nI try to help everyone saving their time and making the experience with <em>Docusaurus</em> even better.</p>\n<p>So here is my solution.</p>\n<ol>\n<li>Go to your <code class=\"language-text\">website\\siteConfig.js</code> file and update the entry doc link in the <code class=\"language-text\">headerLinks</code>\nsection by adding <code class=\"language-text\">href: &quot;/docs&quot;</code> to it.</li>\n</ol>\n<p><strong>Before</strong></p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"69991003578467060000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied code example\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`{\n  // code omitted for brevity\n  headerLinks: [\n    {\n      doc: &quot;your-entry-doc&quot;,\n      label: &quot;Docs&quot;,\n    },\n  ];\n}`, `69991003578467060000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// code omitted for brevity</span>\n  headerLinks<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      doc<span class=\"token operator\">:</span> <span class=\"token string\">\"your-entry-doc\"</span><span class=\"token punctuation\">,</span>\n      label<span class=\"token operator\">:</span> <span class=\"token string\">\"Docs\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>After</strong></p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"29140053007547474000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied code example\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`{\n  // code omitted for brevity\n  headerLinks: [\n    {\n      doc: &quot;your-entry-doc&quot;,\n      href: &quot;/docs&quot;,\n      label: &quot;Docs&quot;,\n    },\n  ];\n}`, `29140053007547474000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// code omitted for brevity</span>\n  headerLinks<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      doc<span class=\"token operator\">:</span> <span class=\"token string\">\"your-entry-doc\"</span><span class=\"token punctuation\">,</span>\n      href<span class=\"token operator\">:</span> <span class=\"token string\">\"/docs\"</span><span class=\"token punctuation\">,</span>\n      label<span class=\"token operator\">:</span> <span class=\"token string\">\"Docs\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"2\">\n<li>Create a new file called <code class=\"language-text\">docs.js</code> under the <code class=\"language-text\">website\\pages\\en</code> path and insert the following\ncode.</li>\n</ol>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"63506917429899090000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"Copied code example\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`/**\n * Copyright (c) 2017-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst React = require(&quot;react&quot;);\nconst Redirect = require(&quot;../../core/Redirect.js&quot;);\n\nconst siteConfig = require(process.cwd() + &quot;/siteConfig.js&quot;);\n\nfunction docUrl(doc, language) {\n  return (\n    siteConfig.baseUrl +\n    &quot;docs/&quot; +\n    (language ? language + &quot;/&quot; : &quot;&quot;) +\n    doc +\n    &quot;.html&quot;\n  );\n}\n\nclass Docs extends React.Component {\n  render() {\n    return (\n      <Redirect\n        redirect={docUrl(&quot;your-entry-doc&quot;, this.props.language)}\n        config={siteConfig}\n      />\n    );\n  }\n}\n\nmodule.exports = Docs;`, `63506917429899090000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"Copy\"\n              >\n                <svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/**\n * Copyright (c) 2017-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */</span>\n\n<span class=\"token keyword\">const</span> React <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"react\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> Redirect <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"../../core/Redirect.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> siteConfig <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"/siteConfig.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">docUrl</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">doc<span class=\"token punctuation\">,</span> language</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    siteConfig<span class=\"token punctuation\">.</span>baseUrl <span class=\"token operator\">+</span>\n    <span class=\"token string\">\"docs/\"</span> <span class=\"token operator\">+</span>\n    <span class=\"token punctuation\">(</span>language <span class=\"token operator\">?</span> language <span class=\"token operator\">+</span> <span class=\"token string\">\"/\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    doc <span class=\"token operator\">+</span>\n    <span class=\"token string\">\".html\"</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Docs</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>Redirect\n        redirect<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">docUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"your-entry-doc\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>language<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        config<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>siteConfig<span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> Docs<span class=\"token punctuation\">;</span></code></pre></div>\n<p>This code is just doing a redirect to <code class=\"language-text\">/docs/your-entry-doc</code>. Don't forget to replace\n<code class=\"language-text\">your-entry-doc</code> with your own value.</p>\n<p>Perfect! With this little change, our <em>Docusaurus</em> website is now able to handle requests to the\n<code class=\"language-text\">/docs</code> root path.</p>\n<p>One little thing: I have tested it with <em>Docusaurus</em> version <code class=\"language-text\">1.5.1</code>. However, just try it!</p>","fields":{"readingTime":{"text":"2 min read"}}},"site":{"siteMetadata":{"siteUrl":"https://chillicream.com","author":"Chilli_Cream"}}},"pageContext":{}}}
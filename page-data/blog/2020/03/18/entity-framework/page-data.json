{"componentChunkName":"component---src-templates-blog-article-template-tsx","path":"/blog/2020/03/18/entity-framework","result":{"data":{"mdx":{"excerpt":"In this post I will walk you through how to build a GraphQL Server using Hot Chocolate and  Entity Framework . Entity Framework  is an ORâ€¦","frontmatter":{"featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACR0lEQVQoz43Ty08TURTHcf4L/wpduDfGtZoYVyaSGDe6NVE37EQXJm6aKC408bXRhEgjr6QqhdoWBKEltAwtnbYz0+ljykzbmc6DmTucn7dUFgQS+Qc+Ofec7x3ZFnZQ3C2hXKlCVmqoNxrQ2m0YnQ5M0yLbcSgMAhiMUdp2KWXuY6nr00J7H7FWgPkGw3QtRFQ6wGSZMPIfEEeg5PuUsl2kTY8ShoefJhDTGOZV/3SwVK6iKiuo1Rtoam3sGRy0LHJsB4Hr07bnDSZE0g1p0QMlBBWxpo/ZLk6CBQ6qigS9qWKv1URPb8M2u+j1THKZBxOMNkKXll0fv8Uara3kIF+4hHTkI75na5ip7nOQhmBuewdSRcSbRBG3P2UwsyXjc76FSFqlgNnkCibstxplyz1KARAmPlDhaQSl66NYffQMqw/GMVswMaUAk+IBRsRSEdFUHpdfr2Psh4jzrzZx7X0O0WwDDA45cR3s3Bbl1g1wkDKJNci37kG4/xjZG3ew/OQlvulAtMKGE4q7RXxN5vAlJUBS63gxl8dksoC+2SX+ZLiBS0XbodXAxjIHhYl3pF28gvzYc2Ru3kXm6ihmKh6m5H8T5vkOy2XxcIeKosDUNVhdg3SjQxa/co9feTN06I/nYsX2eDYefrVt5B+OYzGexRyfblpmJ48yuLLEs1HU4ZX1Tof6HNQ8hzaC4+CSFSJe7/NseIfN8EwdEgf5sy2SfJs2mAMOEgcxAAcdLhhsGHb9bGHTYdi8wwI7Bh79FCzs+af+lL+yAwpdbUF4SAAAAABJRU5ErkJggg==","aspectRatio":1.9047619047619047,"src":"/static/1187c5d634010aea953e8fcc1ebbfdb8/0514f/banner-entityframework.png","srcSet":"/static/1187c5d634010aea953e8fcc1ebbfdb8/3cf40/banner-entityframework.png 200w,\n/static/1187c5d634010aea953e8fcc1ebbfdb8/bc001/banner-entityframework.png 400w,\n/static/1187c5d634010aea953e8fcc1ebbfdb8/0514f/banner-entityframework.png 800w,\n/static/1187c5d634010aea953e8fcc1ebbfdb8/43fe9/banner-entityframework.png 1200w","sizes":"(max-width: 800px) 100vw, 800px"}}},"path":"/blog/2020/03/18/entity-framework","title":"Get started with Hot Chocolate and Entity Framework","tags":["hotchocolate","graphql","dotnet","entityframework","aspnetcore"],"author":"Michael Staib","authorImageUrl":"https://avatars1.githubusercontent.com/u/9714350?s=100&v=4","authorUrl":"https://github.com/michaelstaib","date":"March 18, 2020"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"path\": \"/blog/2020/03/18/entity-framework\",\n  \"date\": \"2020-03-18\",\n  \"title\": \"Get started with Hot Chocolate and Entity Framework\",\n  \"tags\": [\"hotchocolate\", \"graphql\", \"dotnet\", \"entityframework\", \"aspnetcore\"],\n  \"featuredImage\": \"banner-entityframework.png\",\n  \"author\": \"Michael Staib\",\n  \"authorUrl\": \"https://github.com/michaelstaib\",\n  \"authorImageUrl\": \"https://avatars1.githubusercontent.com/u/9714350?s=100&v=4\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In this post I will walk you through how to build a GraphQL Server using Hot Chocolate and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Entity Framework\"), \".\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Entity Framework\"), \" is an OR-mapper from Microsoft that implements the unit-of-work pattern. This basically means that with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Entity Framework\"), \" we work against a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DbContext\"), \" and once in a while commit changes aggregated on that context to the database by invoking \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SaveChanges\"), \".\"), mdx(\"p\", null, \"With \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Entity Framework\"), \" we can write database queries with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"LINQ\"), \" and do not have to deal with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"SQL\"), \" directly. This means that we can compile our database queries and can detect query errors before we run our code.\"), mdx(\"h2\", null, \"Introduction\"), mdx(\"p\", null, \"This blog post is based on the Contoso University example application used by Microsoft to demonstrate the usage of \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Entity Framework\"), \" with ASP.NET Core.\"), mdx(\"p\", null, \"In this blog post we will take that example and build with it a simple GraphQL server for the university website. With it, we can query students, courses, and instructor information.\"), mdx(\"p\", null, \"Before we get started let us setup our server project.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"mkdir ContosoUniversity\\ndotnet new web\\n\")), mdx(\"p\", null, \"Next wee need to add \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Entity Framework\"), \" to our project.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"dotnet add package Microsoft.EntityFrameworkCore\\n\")), mdx(\"p\", null, \"Last but not least we are adding the SQLLite \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Entity Framework\"), \" provided in order to have a lightweight database.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"dotnet add package Microsoft.EntityFrameworkCore.Sqlite\\n\")), mdx(\"p\", null, \"For our data we have three models representing the student, the enrollments and the courses.\"), mdx(\"p\", null, \"The student entity has some basic data about the student like the first name, the last name or the date when the student first enrolled into the university.\"), mdx(\"p\", null, \"The enrollment entity represents the enrollment of a student to a specific course. The enrollment entity not only represents the relationship between the student and the course but also holds the Grade that a student achieved in that course.\"), mdx(\"p\", null, \"Last but not least we have the course to which many students are enrolled to. The course has a title and a property defining the credit that a student can achieve in that course.\"), mdx(\"p\", null, \"Let\\u2019s copy our models into our project.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"using System;\\nusing System.Collections.Generic;\\nusing System.ComponentModel.DataAnnotations;\\nusing System.ComponentModel.DataAnnotations.Schema;\\n\\nnamespace ContosoUniversity\\n{\\n    public class Student\\n    {\\n        [Key]\\n        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]\\n        public int Id { get; set; }\\n        public string LastName { get; set; }\\n        public string FirstMidName { get; set; }\\n        public DateTime EnrollmentDate { get; set; }\\n\\n        public virtual ICollection<Enrollment> Enrollments { get; set; }\\n    }\\n\\n    public enum Grade\\n    {\\n        A, B, C, D, F\\n    }\\n\\n    public class Enrollment\\n    {\\n        [Key]\\n        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]\\n        public int EnrollmentId { get; set; }\\n        public int CourseId { get; set; }\\n        public int StudentId { get; set; }\\n        public Grade? Grade { get; set; }\\n\\n        public virtual Course Course { get; set; }\\n        public virtual Student Student { get; set; }\\n    }\\n\\n    public class Course\\n    {\\n        [Key]\\n        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]\\n        public int CourseId { get; set; }\\n        public string Title { get; set; }\\n        public int Credits { get; set; }\\n\\n        public virtual ICollection<Enrollment> Enrollments { get; set; }\\n    }\\n}\\n\")), mdx(\"p\", null, \"For our models we do need a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DbContext\"), \" against which we can interact with our database.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"using Microsoft.EntityFrameworkCore;\\n\\nnamespace ContosoUniversity\\n{\\n    public class SchoolContext : DbContext\\n    {\\n        public DbSet<Student> Students { get; set; }\\n        public DbSet<Enrollment> Enrollments { get; set; }\\n        public DbSet<Course> Courses { get; set; }\\n\\n        protected override void OnConfiguring(DbContextOptionsBuilder options)\\n        {\\n            options.UseSqlite(\\\"Data Source=uni.db\\\");\\n        }\\n\\n        protected override void OnModelCreating(ModelBuilder modelBuilder)\\n        {\\n            modelBuilder.Entity<Student>()\\n                .HasMany(t => t.Enrollments)\\n                .WithOne(t => t.Student)\\n                .HasForeignKey(t => t.StudentId);\\n\\n            modelBuilder.Entity<Enrollment>()\\n                .HasIndex(t => new { t.StudentId, t.CourseId })\\n                .IsUnique();\\n\\n            modelBuilder.Entity<Course>()\\n                .HasMany(t => t.Enrollments)\\n                .WithOne(t => t.Course)\\n                .HasForeignKey(t => t.CourseId);\\n        }\\n    }\\n}\\n\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SchoolContext\"), \" exposes access to our entities through \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DbSet\"), \". We can query a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DbSet<T>\"), \" with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"LINQ\"), \" or add new entities to it. Moreover, our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ShoolContext\"), \" has some configuration that defines the relations between our entities.\"), mdx(\"p\", null, \"Copy the context as well to our project.\"), mdx(\"p\", null, \"Next, we need to register our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SchoolContext\"), \" with the dependency injection so that our GraphQL server can request instances of it. For that lets open our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Startup.cs\"), \" and replace the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ConfigureServices\"), \" method with the following code.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"public void ConfigureServices(IServiceCollection services)\\n{\\n    services.AddDbContext<SchoolContext>();\\n}\\n\")), mdx(\"p\", null, \"There is one last thing to finish up our preparations with the database and to get into GraphQL.\"), mdx(\"p\", null, \"We somehow need to create our database. Since we are in this post only exploring how we can query data with entity framework and GraphQL we will also need to seed some data.\"), mdx(\"p\", null, \"Add the following method to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Startup.cs\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"private static void InitializeDatabase(IApplicationBuilder app)\\n{\\n    using (var serviceScope = app.ApplicationServices.GetService<IServiceScopeFactory>().CreateScope())\\n    {\\n        var context = serviceScope.ServiceProvider.GetRequiredService<SchoolContext>();\\n        if (context.Database.EnsureCreated())\\n        {\\n            var course = new Course { Credits = 10, Title = \\\"Object Oriented Programming 1\\\" };\\n\\n            context.Enrollments.Add(new Enrollment\\n            {\\n                Course = course,\\n                Student = new Student { FirstMidName = \\\"Rafael\\\", LastName = \\\"Foo\\\", EnrollmentDate = DateTime.UtcNow }\\n            });\\n            context.Enrollments.Add(new Enrollment\\n            {\\n                Course = course,\\n                Student = new Student { FirstMidName = \\\"Pascal\\\", LastName = \\\"Bar\\\", EnrollmentDate = DateTime.UtcNow }\\n            });\\n            context.Enrollments.Add(new Enrollment\\n            {\\n                Course = course,\\n                Student = new Student { FirstMidName = \\\"Michael\\\", LastName = \\\"Baz\\\", EnrollmentDate = DateTime.UtcNow }\\n            });\\n            context.SaveChangesAsync();\\n        }\\n    }\\n}\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"InitializeDatabase\"), \" ensures that our database is created and seeds some initial data so that we can do some queries.\"), mdx(\"p\", null, \"Next call \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"InitializeDatabase\"), \" in the first line of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Configure\"), \" method in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Startup.cs\"), \". The updated \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Configure\"), \" method should look like the following:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"public void Configure(IApplicationBuilder app, IWebHostEnvironment env)\\n{\\n    InitializeDatabase(app);\\n\\n    if (env.IsDevelopment())\\n    {\\n        app.UseDeveloperExceptionPage();\\n    }\\n\\n    app.UseRouting();\\n\\n    app.UseEndpoints(endpoints =>\\n    {\\n        endpoints.MapGet(\\\"/\\\", async context =>\\n        {\\n            await context.Response.WriteAsync(\\\"Hello World!\\\");\\n        });\\n    });\\n}\\n\")), mdx(\"p\", null, \"We are basically done with our preparations. So far, we have defined our models, created our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ShoolContext\"), \" through which we can query the database. We also registered the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ShoolContext\"), \" with the dependency injection container and added some initialization logic so that our database is created with some initial data. With that settled let us move on and talk about GraphQL.\"), mdx(\"h2\", null, \"GraphQL Schema\"), mdx(\"p\", null, \"Everything in GraphQL resolves around a schema. The schema defines the types that are available and the data that our GraphQL server exposes.\"), mdx(\"p\", null, \"In GraphQL we interact with the data through root types. In this post we will only query data which means that we only need to define the query root type.\"), mdx(\"p\", null, \"The query root type exposes fields which are called root fields. The root fields define how we can query for data. For our university GraphQL server we want to be able to query the students and then drill deeper into what courses a student is enrolled to or what grade he/she has in a specific course.\"), mdx(\"p\", null, \"Before we actually can put some GraphQL types in our project we again need to add some packages. This time we need to add the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"HotChocolate.AspNetCore\"), \" package to enable the core GraphQL server functionality. Also we need the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"HotChocolate.Types.Selections\"), \" package to be able to use \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Entity Framework\"), \" projections.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"dotnet add package HotChocolate.AspNetCore\\ndotnet add package HotChocolate.Types.Selections\\n\")), mdx(\"p\", null, \"With Hot Chocolate and the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"pure code-first\"), \" approach the query root type is represented by a simple class. Public methods or public properties on that type are inferred as fields of our GraphQL type.\"), mdx(\"p\", null, \"The following class:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"public class Query\\n{\\n    /// <summary>\\n    /// Gets all students.\\n    /// </summary>\\n    public IQueryable<Student> GetStudents() => throw new NotImplementedException();\\n}\\n\")), mdx(\"p\", null, \"Is translated to the following GraphQL type:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"type Query {\\n  \\\"\\\"\\\"\\n  Gets all students\\n  \\\"\\\"\\\"\\n  students: [Student]\\n}\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Hot Chocolate will apply GraphQL conventions to inferred types which will remove the verb \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Get\"), \" for instance from the method or if it is an async method the postfix \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"async\"), \" will be removed. These conventions can be configured.\")), mdx(\"p\", null, \"In GraphQL we call the method \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GetStudents\"), \" a resolver since it resolves for us some data. Resolvers are executed independent from one another and each resolver has dependencies on different resources. Everything that a resolver needs can be injected as a method parameter. Our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GetStudents\"), \" resolver for instance needs the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ShoolContext\"), \" to fetch some data. By using argument injection the execution engine can better optimize how to execute a query.\"), mdx(\"p\", null, \"OK, with this knowledge lets implement our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Query\"), \" class.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"public class Query\\n{\\n    /// <summary>\\n    /// Gets all students.\\n    /// </summary>\\n    public IQueryable<Student> GetStudents([Service]SchoolContext schoolContext) =>\\n        schoolContext.Students;\\n}\\n\")), mdx(\"p\", null, \"Our query class up there would already work. But only for the first level. It basically would resolve all students but we could not drill deeper. The enrollments would always be empty. In Hot Chocolate we have a concept of field middleware that can alter the execution pipeline of our field resolver.\"), mdx(\"p\", null, \"The middleware order is important since multiple middleware form a field execution pipeline.\"), mdx(\"p\", null, \"In our case we want \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Entity Framework\"), \" projections to work so that we can drill into data in our GraphQL query. For this we can add the selection middleware. Middleware in \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"pure code-first\"), \" are represented by simple attributes. Since middleware order is important the order of these middleware attributes is important too. Middleware attributes always start with the verb \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Use\"), \". So, for our selections middleware we add \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[UseSelection]\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"using System.Linq;\\nusing HotChocolate;\\nusing HotChocolate.Types;\\n\\nnamespace ContosoUniversity\\n{\\n    public class Query\\n    {\\n        /// <summary>\\n        /// Gets all students.\\n        /// </summary>\\n        [UseSelection]\\n        public IQueryable<Student> GetStudents([Service]SchoolContext schoolContext) =>\\n            schoolContext.Students;\\n    }\\n}\\n\")), mdx(\"p\", null, \"Let\\u2019s paste this file into our project.\"), mdx(\"p\", null, \"I pointed out that in GraphQL everything resolves around a schema. In order to get our GraphQL server up and running we need to create and host a GraphQL schema in our server. In Hot Chocolate we define a schema with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SchemaBuilder\"), \".\"), mdx(\"p\", null, \"Open the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Startup.cs\"), \" again and then let us add a simple schema with our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Query\"), \" type.\"), mdx(\"p\", null, \"For that replace the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ConfigureServices\"), \" method with the following code.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"public void ConfigureServices(IServiceCollection services)\\n{\\n    services.AddDbContext<SchoolContext>();\\n\\n    services.AddGraphQL(\\n        SchemaBuilder.New()\\n            .AddQueryType<Query>()\\n            .Create(),\\n        new QueryExecutionOptions { ForceSerialExecution = true });\\n}\\n\")), mdx(\"p\", null, \"The above code registers a GraphQL schema with the dependency injection container.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"SchemaBuilder.New()\\n    .AddQueryType<Query>()\\n    .Create()\\n\")), mdx(\"p\", null, \"The schema builder registers our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Query\"), \" class as GraphQL \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Query\"), \" root type.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"new QueryExecutionOptions { ForceSerialExecution = true }\\n\")), mdx(\"p\", null, \"Also, we are defining that the execution engine shall be forced to execute serially since \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DbContext\"), \" is not thread-safe.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"The upcoming version 11 of Hot Chocolate uses \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DbContext\"), \" pooling to use multiple \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DbContext\"), \" instances in one request. This allows version 11 to parallelize data fetching better with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Entity Framework\"), \".\")), mdx(\"p\", null, \"In order to enable our ASP.NET Core server to process GraphQL requests we need to register the Hot Chocolate GraphQL middleware.\"), mdx(\"p\", null, \"For that we need to replace the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Configure\"), \" method of our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Startup.cs\"), \" with the following code.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"public void Configure(IApplicationBuilder app, IWebHostEnvironment env)\\n{\\n    InitializeDatabase(app);\\n\\n    if (env.IsDevelopment())\\n    {\\n        app.UseDeveloperExceptionPage();\\n    }\\n\\n    app.UseRouting();\\n\\n    app.UseGraphQL();\\n\\n    app.UseEndpoints(endpoints =>\\n    {\\n        endpoints.MapGet(\\\"/\\\", async context =>\\n        {\\n            await context.Response.WriteAsync(\\\"Hello World!\\\");\\n        });\\n    });\\n}\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"app.UseGraphQL();\"), \" registers the GraphQL middleware with the server. Since we did not specify any path the middleware will run on the root of our server. Like with field middleware the order of ASP.NET Core middleware is important.\"), mdx(\"h2\", null, \"Testing a GraphQL Server\"), mdx(\"p\", null, \"In order to now query our GraphQL server we need a GraphQL IDE to formulate queries and explore the schema. If you want a deluxe GraphQL IDE as an application, you can get our very own Banana Cakepop which can be downloaded \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/bananacakepop\"\n  }), \"here\"), \".\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"800px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/83aff166a4b32131eb13063c3d9f7a17/142af/banana-cake-pop.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"61%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAC/klEQVQoz2VSW2tUVxQ+T1IoQh+Ugj/CvhgQFa+tEqtGTFpvRYlGRydUWiOEDKgv6Q+wdPakYxRBUBAsKuKDikSqSaPWSSaZJFp1xslczlySOWfOmXPdZ3+uPWoQu+Bjrb323t9e39pLadnUsXL9j12Da9uPR1dsO8xW7+pm2/eFWNueQ2zLrp/Yth8OsB27D7Ku7l/Zn/FB1rG/k635djvbsLWdrWttZxu/72Dfte2NtnYcGNyyc98qZcmarp/PsmsYeTqG+4+e4uFIAuNT/2FsYhrjY0lMTk4hlZpGOp2GaZp49SaD8dQMkslJPPk3idHnk3iWnEGCzt+8fecXZVnrqSOXb4/AqKpOIZ/z6tq8LyD8wLF9iMAHxQD+D+77QcOSsUdwCHj58sUx5YuWztAfV++iUszxV6/fiEKhAMt24HGOIAgQCLEAQXA9D5brwW00CBYEvUgbRO9jYmIirCxa0RmKXrmHcj7Lp6anRSaTgWHZmK/OwdY12I4Nw22g4VrkTRh2A5bjwiP5AQ/eEwKcjNqQDCtfrjwaYtceoFZV+dtsVqiqCpMIuSeVfDB5S4hm6NNFmwh9y4Lvc5lfIEylUmFl8apwKH79IVyrzotqSVQqlSahZlpwpCzXhs0daplHZBI+PrMmoWxPk/CrtSdC5//6G7ap8UJRFeVyGVrdgGGY8L33BI7rwLHtprfJG/U6LKrQdV04jiPIc7lOJBJhZcnGk6HBG48XCCvlspirzAtdrwuSIV8XpmHKh0StVhOZbE5kZ2cFkQrDNIVhGILGiWuahuHh4bDy9ebeoxdv/UPydK9YKvG5SoXPzes8r6ry57iUQ1XxarXK65rGn6czvKzr3KUcVdUE7XsNas/o6OhxmsNI94WbwzBqVczm8ijS2GRzBbxOZ6DrOuokT36U/P18Pi9nrbmWe7Iq6SVKpRKGhoZOKEtbdi8P9/52+tLF830sFusbGBiI/H7uXIQxFonFYpFoNNqMP0Lm4vH4p5B3+vr7+8/09PR88w7wDheNOWaCuAAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Hot Chocolate\",\n    \"title\": \"Hot Chocolate\",\n    \"src\": \"/static/83aff166a4b32131eb13063c3d9f7a17/7842b/banana-cake-pop.png\",\n    \"srcSet\": [\"/static/83aff166a4b32131eb13063c3d9f7a17/f8f3a/banana-cake-pop.png 200w\", \"/static/83aff166a4b32131eb13063c3d9f7a17/6a8a8/banana-cake-pop.png 400w\", \"/static/83aff166a4b32131eb13063c3d9f7a17/7842b/banana-cake-pop.png 800w\", \"/static/83aff166a4b32131eb13063c3d9f7a17/142af/banana-cake-pop.png 1082w\"],\n    \"sizes\": \"(max-width: 800px) 100vw, 800px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"But you can also opt for \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Playground\"), \" and host a simple GraphQL IDE as a middleware with the server. If you want to use playground add the following package to the project:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"dotnet add package HotChocolate.AspNetCore.Playground\\n\")), mdx(\"p\", null, \"After that we need to register the playground middleware. For that add \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"app.UsePlayground();\"), \" after \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"app.UseGraphQL()\"), \". By default, playground is hosted on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/playground\"), \" meaning in our case \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:5000/playground\"), \".\"), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Configure\"), \" method should now look like the following:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"public void Configure(IApplicationBuilder app, IWebHostEnvironment env)\\n{\\n    InitializeDatabase(app);\\n\\n    if (env.IsDevelopment())\\n    {\\n        app.UseDeveloperExceptionPage();\\n    }\\n\\n    app.UseRouting();\\n\\n    app.UseGraphQL();\\n    app.UsePlayground();\\n\\n    app.UseEndpoints(endpoints =>\\n    {\\n        endpoints.MapGet(\\\"/\\\", async context =>\\n        {\\n            await context.Response.WriteAsync(\\\"Hello World!\\\");\\n        });\\n    });\\n}\\n\")), mdx(\"p\", null, \"Let\\u2019s test our GraphQL server.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"dotnet run --urls http://localhost:5000\\n\")), mdx(\"h3\", null, \"Testing with Banana Cakepop\"), mdx(\"p\", null, \"If you have chosen \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Banana Cakepop\"), \" to test and explore the GraphQL Schema open it now.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Banana Cakepop\"), \" will open with an empty tab. In the address bar type in the URL of our GraphQL server \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:5000\"), \" and hit \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"enter\"), \".\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"800px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/69e0f04fc210498531ec8707b5e18cd5/2b13e/banana-cake-pop-address.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"38.5%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABLElEQVQoz63QzU7CQBAH8H0jvw4qxg+MHBC9+AJIvCokHoxSS9CLD+AT+GClEERCm9JK+rG77fJ3dsMJSIyJk/wyszuT3W3Zw6MF2+6gbdnodl9QqV1hY/cYpXIVR5VLHJ7VcHB6TqpUX2CnVMYm9bf2lp1ge78M5n56mPgBviY+uJB4e/9AvdXFzf0rGq0OsXF9Z6F+2yZPpm40tedVNMt4liGOY+jI0hRBECAKQ4RESoG/BouiCJrv+8Z0OsVgMDAcx8FoNMJ4PIbruuj3++j1ehgOh2bW87wVjHOOOM0wm30jzyXJkdJLtSRJkNEX6Bldp8Rk6gkhIGh/GZN0QEL/jguOXM2NYg5DmUxrKtRirRY9vbcO0y8qlEKmb8gLyEJB6vybYj1z4H/GD/8CLbHE9Z09AAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Hot Chocolate\",\n    \"title\": \"Hot Chocolate\",\n    \"src\": \"/static/69e0f04fc210498531ec8707b5e18cd5/7842b/banana-cake-pop-address.png\",\n    \"srcSet\": [\"/static/69e0f04fc210498531ec8707b5e18cd5/f8f3a/banana-cake-pop-address.png 200w\", \"/static/69e0f04fc210498531ec8707b5e18cd5/6a8a8/banana-cake-pop-address.png 400w\", \"/static/69e0f04fc210498531ec8707b5e18cd5/7842b/banana-cake-pop-address.png 800w\", \"/static/69e0f04fc210498531ec8707b5e18cd5/5ece7/banana-cake-pop-address.png 1200w\", \"/static/69e0f04fc210498531ec8707b5e18cd5/2b13e/banana-cake-pop-address.png 1425w\"],\n    \"sizes\": \"(max-width: 800px) 100vw, 800px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Once our GraphQL IDE has fetched the schema we can start exploring it. On the left-hand side click on the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Book\"), \" button. The left-hand side now shows us the root types and the root fields.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"681px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/943d3b068d10d321830906928d7ac4ef/ad007/banana-cake-pop-root-types.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"74%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACy0lEQVQ4y5WSWU8TURiG5ycQwZgY0sYKYjRIEBekpIUCrSytVIogkWBKTLwAIRDElhYoi6gQl9gCKheQKKgYozdGiNx454WR1C50o6QL7Uxb+Ad9PTPUprh78eSc+b6Z53zvyVAaWVW8Vy1CXVtxXNxQAqGwDEJxKYrFEhSJSiEUSbi9WFKeoIKj5EfKdqAElV3gyTrj/LOd7Ir8ei1ONOpwrE6D0039KGjQIU+lgaCqC1k1PTik6MXhWi2O1umQe2EAeY1DyG8aRUHzLZxsGQeVKR+IZ9ePIls1Ek+XanFKfQ+iq0YUtt6HSjuL+r45SDumkVauQbqsjyNDpsPeSj32VQ9iv2IYmcqb4KvuQNBwF1SOagiydiOON99GkXockwtLePD0HYzz72EkexML2U+/WMbU81SWEixzvUcvP+Dx4sqOUEqEB5UGKLomwYT8WLN9xbrHCav5C7xuByLhIOhQgPR+DZ0CxZPrcaB2ABnSG5B3muB0umCz2eF2kNVqg8PphMezDqfLzfWcrj9D8RX9ECgHOeG57ikEAwEE/AF89rmxtuEh09rhcDjg9/sRDAZ/y+bmJrxeL6is8wZUtD3EkYZREnkKNB1GmDQttA+WoBcWs5lMbCN1Gtvb24hEIojFYtja2krC1ljYQykembBQPYEc1TAnjJIGE2EQDYQRXV3nXnKS2Ha7ncPn88FFolmtVu6ZXQMkFStke1RmdR94ch3SJD1c5AiR0QxDpgyBtm3A7XbDTKa0WCzcx2wsVsg+f6/vEha1z0CmXcCZjllcMjzjIjPMjpSORRCNRpPR2Kjshz/W2PdZOKFy5A0m3q7i2sxHtIwtgg4nhOTOGAL9jySFcsNr6Oc/odW4gstjr4gwlBQmpQy9q5Yq+UlYcMWEwrYnyG014WL/HCdITpiI8jd2CXk1evDJz72n/Dpqu6e5O0o99X+F3wBDXZOfcpeefwAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Hot Chocolate\",\n    \"title\": \"Hot Chocolate\",\n    \"src\": \"/static/943d3b068d10d321830906928d7ac4ef/ad007/banana-cake-pop-root-types.png\",\n    \"srcSet\": [\"/static/943d3b068d10d321830906928d7ac4ef/f8f3a/banana-cake-pop-root-types.png 200w\", \"/static/943d3b068d10d321830906928d7ac4ef/6a8a8/banana-cake-pop-root-types.png 400w\", \"/static/943d3b068d10d321830906928d7ac4ef/ad007/banana-cake-pop-root-types.png 681w\"],\n    \"sizes\": \"(max-width: 681px) 100vw, 681px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"In our current schema we can see that we have a single root field called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"students\"), \". If we click on that the schema explorer opens and we can drill into our type. We can see what fields we can request from our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Student\"), \" type. We also can see that we can drill in further and fetch the enrollments and from the enrollments the courses and so on.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"800px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/b17c3abc623fa0a309a1081444f013f9/b2484/banana-cake-pop-expanded-schema.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"63.5%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAADKklEQVQ4y2WRW2gcVRzG58UXpVAQClYfilu6Ei+tdWu6urObVE2b1Foo6oOvglIoKFhIBympqyhSC3koFIq0abY2mtJ0I7VKS0FjwBTUBl9CTNyEye5m7vfbztk9X89MNLV6OL/zweHP979xfQOH8jv3vT609YVDg1u6DwqZwpvCjuIBoStXFI6894EwPDws9Ow7KGR35IXs9t3C413PCZknc0LmqV3C1me6heyzBSG7kx/s2tU79HT3nn5uc+mdz98aPI2zY9dw6txVnDo/iUvVGxivfo/bv85CFFdQ/e4mLoxN4OL4JEa/ucqoYvTrCVSYVsarGJu4jsvf3sDI2MQVbsOLh0988dUtgASh79pxK3Bj4nlx7Huxp0uxYxoxgDUIiUEZnWD9r90hiYYMyNLqCLftjaHy8PgUPMtoN1Yl2mRokkItWaK6rlPP92kQhtTQdCqJIlOZoVLLsqiqalQ3TOq4LrEdB/Pz86PcA7m3y8fPTCJwrfaqJFFJlqEsr6CxsICVRh2mocGybTiaCWO5Bts2EbViRsSKsKGIdWrZVjvwPSwu/lXhHtz9bvnE2WsImaEkyVSSJFiaDts04QQRWq0WWnELoePDqovwXQsxISmR5yPpxrHUdhS4qC0tV7gNhSPl8pfX0wrXDS0LQRDA9zz4vr9OEIQIwghRGCJkGrNkFMlFO5lhs9mscBtL75c/OffDfYaGYcB1XbDZpOoxY+9f5kmyhCiKEh/KTmrYaDQq3MMvHS1/OnKTGZr3GTpsyHYyO6b/4P4nQRiG/zfc1Hfso88u3ILvmCRdCsNg23UcO8V1nHu4Dvu7B6syaZd2Oh3CTFGv10e5zfuPf3zy0hQi3+koqgZNVSHJDEWDrOopimakqDpblLNWYVLp3y0np5M8iqJc5B4b+HAomaHcFFts7WSpViMzv/1BfvzldzI1c4f8xJiamU3159uz5M+FRbK8tERqLE4URcJMCGs1mpubw/T09HnuoUeyjz6x/fnSnt6eQqlU4ovFEt+/92X+tf17+QMDfWv0r+mr/a/wvT09LKbIJ7GFQoHP5/N8LpcrZDKZEiNzF3pdNNxkS+7oAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Hot Chocolate\",\n    \"title\": \"Hot Chocolate\",\n    \"src\": \"/static/b17c3abc623fa0a309a1081444f013f9/7842b/banana-cake-pop-expanded-schema.png\",\n    \"srcSet\": [\"/static/b17c3abc623fa0a309a1081444f013f9/f8f3a/banana-cake-pop-expanded-schema.png 200w\", \"/static/b17c3abc623fa0a309a1081444f013f9/6a8a8/banana-cake-pop-expanded-schema.png 400w\", \"/static/b17c3abc623fa0a309a1081444f013f9/7842b/banana-cake-pop-expanded-schema.png 800w\", \"/static/b17c3abc623fa0a309a1081444f013f9/5ece7/banana-cake-pop-expanded-schema.png 1200w\", \"/static/b17c3abc623fa0a309a1081444f013f9/0d4f8/banana-cake-pop-expanded-schema.png 1600w\", \"/static/b17c3abc623fa0a309a1081444f013f9/b2484/banana-cake-pop-expanded-schema.png 2972w\"],\n    \"sizes\": \"(max-width: 800px) 100vw, 800px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Now close the schema tab again so that we can write some queries.\"), mdx(\"h3\", null, \"Testing with Playground\"), mdx(\"p\", null, \"If you have opted for \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Playground\"), \" open your browser and navigate to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:5000/playground\"), \".\"), mdx(\"p\", null, \"On the right-hand side click on the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Docs\"), \" button. A pane will slide out showing us the root types and root fields of our schema.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"800px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/8eef1f07104c1474c76431a653209c7b/29524/playground-root-types.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"83.50000000000001%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAC7UlEQVQ4y6WTzU/UQBTA9+ZBT2I4IB6IkqAmEgIJ33AyDWe9iQaWQMKXimK84D9gQOVrV4EF9ODZmxJkSfCoiTEgIOAWym4/t+1uW7a7bDvPNyUkghoJvOSXeZ12fn2TeeO7ei7vTGFBLnOl+DJTVlrG5F/IZ4qKipjKykqmvLycqaioYKprqpmamhovr6quYkrLSpm883keJSUlTG1tLVNcfK0hJ+dsrq+rubXyVXAIJqZDMDk1Dc9fDMJoIAihqSmYCE3COELnp16/gfGJkDc3NjYB/QPP4Gn/AASCL3F+EgaHR6C9o/OOb2hktG5zWwBRVl0uKhBelMl2TCQsF/OguayoRFF1wksKkaQ42RIEolkmSad3ibWTIjsp2zGtFLz/MNPiGxoarovGeJCUuCugTFbiRJIVIuJiQZKJqulkI7JJvi4ue/MyCle4CFFMjbhZB6U2cTCy2V2YnZ31+4LBYJ1lWZDOZEg6kyZ2Og2UtDfa4LouLK2uwUz4E5j4XSJhACcLICdVQCE4rkPwG2d3Nwtzc3N+XwCFScOAlG1j6bT8FBwG30EiaUBc08BMmPB29SOwKgeQyaDUIgDEoT8Oh8N/CuniffZldNQTCRTqnvDdygLELAVoYHEohINC4whCTd8TJnQDFtd+gJ4yPSHB2BfOz88fXagnkp7USJqwLmyBZhsnE9LqeFECQZBhiV07uVAQeeC4CPBRDr5v4paPL6QnbYMY/Qmx9c8gRb7B6voXFCb/Lfxf2+BtAEESYZuP4ZYlWObW/7pl75SxsWsN06TN7KDUxdGD5vug1OVF0d2OxVxBEN3lrQ1XSyVdr2sw0JnFy7InHA0E6jVdByqlldJcxQa2dnYOoKgqiIoC8bjqnbLl2HA4FhYWWn311xvKmjt6tpra77NN7T3s7ba7bGNrN+vvfMj6u34Dn5uRlq5etrHjHtv24DHb/egJ29nbR4l0Perjb95qvuHDOIUUIIXIpWNC115ETv8CN84suHH3hiIAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Hot Chocolate\",\n    \"title\": \"Hot Chocolate\",\n    \"src\": \"/static/8eef1f07104c1474c76431a653209c7b/7842b/playground-root-types.png\",\n    \"srcSet\": [\"/static/8eef1f07104c1474c76431a653209c7b/f8f3a/playground-root-types.png 200w\", \"/static/8eef1f07104c1474c76431a653209c7b/6a8a8/playground-root-types.png 400w\", \"/static/8eef1f07104c1474c76431a653209c7b/7842b/playground-root-types.png 800w\", \"/static/8eef1f07104c1474c76431a653209c7b/5ece7/playground-root-types.png 1200w\", \"/static/8eef1f07104c1474c76431a653209c7b/0d4f8/playground-root-types.png 1600w\", \"/static/8eef1f07104c1474c76431a653209c7b/29524/playground-root-types.png 2272w\"],\n    \"sizes\": \"(max-width: 800px) 100vw, 800px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"In our current schema we can see that we have a single root field called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"students\"), \". If we click on that the schema explorer opens and we can drill into our type. We can see what fields we can request from our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Student\"), \" type. We also can see that we can drill in further and fetch the enrollments and from the enrollments the courses and so on.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"800px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/2e821a00db4e89f7a5ecb6efab42e845/d7166/playground-expanded-schema.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"67.5%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACfUlEQVQ4y6WSz08TQRTH96L8DXCSACbAxYPQEhO5SAKS0KoxtuVgIjFx9Y/TFKlQC+HIxYuRgAeiFGil3R/tbHd+zzxfd0sDiQeNk7zMzvvxmfe+s07u8YPXT58/e7u6uvpmbn7Ofbi46BaKRfdFoeAW0EqlkvtqY8Mtoq9QxPP6uvtoacnNZLNuJpNx+3XFUund8vLyS8dxbjvlzTLs7u/DzuddKG9tw8fKJ9ip1qBa20PfXuKv1nZxr6WGsa3KNmxuVRKrbFehijnvP5TVfCY76pzUz2i93dQyjiRoogBAGWMUCwNlWKCsFsqiDyTuiibxoXGOfqwDDYyL1pN8bszxw1D8uDyFyKtbGXtWSGkF5zYOm1bSjtVKWq215ZRaQXv2aimlLCNdqzg1CIc4jv1cbm3M+XJxLA6ahwDS2iTSv1obYL0YJOeglAYEQkQFFvUArAbkJTmE9MBIlpRRBK6tIfDr6XdxUD+CthfZuNMAwSJsX4LnBwgNQQiB0woIuhGEQRt43AHGKAipICQRKBEPO0yAF42mOLlsQJdEVnJMkDK5vRPFgMImHaOGgLrih8HuUo82FrpRBKhr2iEdAL3QFxfEB6P62qdDG6wiPdpPToF4tikJBsTkbFL/AEhRQ3yUduCLBmkjUF/F8HbUkDEwWibdDIHXwNf2m8B+hz9RG00DfLp4+ChSMOywN4T9AXRlN4Et3+O/ekEyqbFm+FsMhrN/sfQA6CXAgHSULwj875JShvl8fsz5dnRIjs9OJOkSFoYhD4KAt1qtfzHmeZ45Pz9vrKysjDp3xsfvT92dWpidnc3OzMxkp6ensxMTE/9qC5OTk/dGRkZu/QZLuJm56BPfOAAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Hot Chocolate\",\n    \"title\": \"Hot Chocolate\",\n    \"src\": \"/static/2e821a00db4e89f7a5ecb6efab42e845/7842b/playground-expanded-schema.png\",\n    \"srcSet\": [\"/static/2e821a00db4e89f7a5ecb6efab42e845/f8f3a/playground-expanded-schema.png 200w\", \"/static/2e821a00db4e89f7a5ecb6efab42e845/6a8a8/playground-expanded-schema.png 400w\", \"/static/2e821a00db4e89f7a5ecb6efab42e845/7842b/playground-expanded-schema.png 800w\", \"/static/2e821a00db4e89f7a5ecb6efab42e845/5ece7/playground-expanded-schema.png 1200w\", \"/static/2e821a00db4e89f7a5ecb6efab42e845/0d4f8/playground-expanded-schema.png 1600w\", \"/static/2e821a00db4e89f7a5ecb6efab42e845/d7166/playground-expanded-schema.png 2796w\"],\n    \"sizes\": \"(max-width: 800px) 100vw, 800px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Now click onto \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Docs\"), \" again so that the schema tab slides back in again. We are now ready to write our first query.\"), mdx(\"h3\", null, \"Recap\"), mdx(\"p\", null, \"While we just added one field that exposes the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Student\"), \" entity to Hot Chocolate, Hot Chocolate explored what data is reachable from that entity. In conjunction with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UseSelection\"), \" middleware we can now query all that data and drill into our graph.\"), mdx(\"p\", null, \"We have explored tooling with which we can explore the schema before issuing the first request.\"), mdx(\"p\", null, \"If we would print our schema it would now look like the following.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"The schema SDL can be downloaded from http://localhost:5000/schema.\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"schema {\\n  query: Query\\n}\\n\\ntype Query {\\n  students: [Student]\\n}\\n\\ntype Student {\\n  enrollmentDate: DateTime!\\n  enrollments: [Enrollment]\\n  firstMidName: String\\n  id: Int!\\n  lastName: String\\n}\\n\\ntype Course {\\n  courseId: Int!\\n  credits: Int!\\n  enrollments: [Enrollment]\\n  title: String\\n}\\n\\ntype Enrollment {\\n  course: Course\\n  courseId: Int!\\n  enrollmentId: Int!\\n  grade: Grade\\n  student: Student\\n  studentId: Int!\\n}\\n\\nenum Grade {\\n  A\\n  B\\n  C\\n  D\\n  F\\n}\\n\\n\\\"The `DateTime` scalar represents an ISO-8601 compliant date time type.\\\"\\nscalar DateTime\\n\\n\\\"The `Int` scalar type represents non-fractional signed whole numeric values. Int can represent values between -(2^31) and 2^31 - 1.\\\"\\nscalar Int\\n\\n\\\"The `String` scalar type represents textual data, represented as UTF-8 character sequences. The String type is most often used by GraphQL to represent free-form human-readable text.\\\"\\nscalar String\\n\")), mdx(\"h3\", null, \"Writing Queries\"), mdx(\"p\", null, \"In both GraphQL IDEs we can type in the GraphQL queries on the left-hand pane. If we click on the play button the result will be displayed on the right-hand side pane.\"), mdx(\"p\", null, \"Let us start with a simple query in which we ask for the first name of all students that we have in our database.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"query {\\n  students {\\n    firstMidName\\n  }\\n}\\n\")), mdx(\"p\", null, \"The above query resolves correctly the data from our database, and we get the following result:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"{\\n  \\\"data\\\": {\\n    \\\"students\\\": [\\n      {\\n        \\\"firstMidName\\\": \\\"Rafael\\\"\\n      },\\n      {\\n        \\\"firstMidName\\\": \\\"Pascal\\\"\\n      },\\n      {\\n        \\\"firstMidName\\\": \\\"Michael\\\"\\n      }\\n    ]\\n  }\\n}\\n\")), mdx(\"p\", null, \"What is interesting is that the GraphQL engine rewrites the incoming GraphQL request to an expression tree that is applied onto the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"IQueryable<Student>\"), \" our root field resolver returns. The expression will only query for data from the database that was needed to fulfill our request.\"), mdx(\"p\", null, \"The SQL query in this case will look like the following:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"SELECT \\\"s\\\".\\\"FirstMidName\\\" FROM \\\"Students\\\" AS \\\"s\\\"\\n\")), mdx(\"p\", null, \"Let us drill into the data a little more and fetch additionally to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"firstMidName\"), \" also the title of the course the students are enlisted to.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"query {\\n  students {\\n    firstMidName\\n    enrollments {\\n      course {\\n        title\\n      }\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, \"The above query returns:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"{\\n  \\\"data\\\": {\\n    \\\"students\\\": [\\n      {\\n        \\\"firstMidName\\\": \\\"Rafael\\\",\\n        \\\"enrollments\\\": [\\n          {\\n            \\\"course\\\": {\\n              \\\"title\\\": \\\"Object Oriented Programming 1\\\"\\n            }\\n          }\\n        ]\\n      },\\n      {\\n        \\\"firstMidName\\\": \\\"Pascal\\\",\\n        \\\"enrollments\\\": [\\n          {\\n            \\\"course\\\": {\\n              \\\"title\\\": \\\"Object Oriented Programming 1\\\"\\n            }\\n          }\\n        ]\\n      },\\n      {\\n        \\\"firstMidName\\\": \\\"Michael\\\",\\n        \\\"enrollments\\\": [\\n          {\\n            \\\"course\\\": {\\n              \\\"title\\\": \\\"Object Oriented Programming 1\\\"\\n            }\\n          }\\n        ]\\n      }\\n    ]\\n  }\\n}\\n\")), mdx(\"p\", null, \"In order to fetch the data, the GraphQL query is rewritten to the following SQL:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"SELECT \\\"s\\\".\\\"FirstMidName\\\",\\n       \\\"s\\\".\\\"Id\\\",\\n       \\\"t\\\".\\\"Title\\\",\\n       \\\"t\\\".\\\"EnrollmentId\\\",\\n       \\\"t\\\".\\\"CourseId\\\"\\n    FROM \\\"Students\\\" AS \\\"s\\\"\\n    LEFT JOIN (\\n        SELECT \\\"c\\\".\\\"Title\\\",\\n               \\\"e\\\".\\\"EnrollmentId\\\",\\n               \\\"c\\\".\\\"CourseId\\\",\\n               \\\"e\\\".\\\"StudentId\\\"\\n        FROM \\\"Enrollments\\\" AS \\\"e\\\"\\n        INNER JOIN \\\"Courses\\\" AS \\\"c\\\"\\n              ON \\\"e\\\".\\\"CourseId\\\" = \\\"c\\\".\\\"CourseId\\\"\\n    ) AS \\\"t\\\" ON \\\"s\\\".\\\"Id\\\" = \\\"t\\\".\\\"StudentId\\\"\\n    ORDER BY \\\"s\\\".\\\"Id\\\", \\\"t\\\".\\\"EnrollmentId\\\", \\\"t\\\".\\\"CourseId\\\"\\n\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UseSelection\"), \" middleware allows us by just attributing it to a field resolver that returns an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"IQueryable<T>\"), \" to drill into that data set.\"), mdx(\"p\", null, \"Without a lot of code, we already have a working GraphQL server that returns all the students. We are already able to drill into our data and the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UseSelection\"), \" middleware rewrites GraphQL selections into \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"IQueryable<T>\"), \" projections that ensures that we only select the data that we need from the database.\"), mdx(\"p\", null, \"Think about it, we really just added entity framework and exposed a single root field that basically just returns the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DbSet<Student>\"), \".\"), mdx(\"h2\", null, \"Filtering\"), mdx(\"p\", null, \"Let us go further with this. We actually can do more here and Hot Chocolate provides you with a filter and sorting middleware to really give you the power to query your data with complex expressions.\"), mdx(\"p\", null, \"First, we need to add two more packages that will add the sorting and filtering middleware.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"dotnet add package HotChocolate.Types.Filters\\ndotnet add package HotChocolate.Types.Sorting\\n\")), mdx(\"p\", null, \"With these new packages in place let us rewrite our query type in order to enable proper filtering support.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"using System.Linq;\\nusing HotChocolate;\\nusing HotChocolate.Types;\\n\\nnamespace ContosoUniversity\\n{\\n    public class Query\\n    {\\n        [UseSelection]\\n        [UseFiltering]\\n        [UseSorting]\\n        public IQueryable<Student> GetStudents([Service]SchoolContext context) =>\\n            context.Students;\\n    }\\n}\\n\")), mdx(\"p\", null, \"The above query type has now two new attributes \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UseFiltering\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UseSorting\"), \". Let me again state that the order of middleware is important.\"), mdx(\"p\", null, \"In order to understand how a field pipeline with middleware works have a look at the following sequence diagram which depicts our data pipeline applied to the above resolver.\"), mdx(\"div\", {\n    \"className\": \"mermaid\",\n    \"data-processed\": \"true\"\n  }, mdx(\"svg\", _extends({\n    parentName: \"div\"\n  }, {\n    \"id\": \"mermaid-1617795555605\",\n    \"width\": \"100%\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"height\": \"513\",\n    \"style\": {\n      \"maxWidth\": \"1050px\"\n    },\n    \"viewBox\": \"-50 -10 1050 513\"\n  }), mdx(\"style\", {\n    parentName: \"svg\"\n  }, \"#mermaid-1617795555605{font-family:sans-serif;font-size:16px;fill:#333;}#mermaid-1617795555605 .error-icon{fill:#552222;}#mermaid-1617795555605 .error-text{fill:#552222;stroke:#552222;}#mermaid-1617795555605 .edge-thickness-normal{stroke-width:2px;}#mermaid-1617795555605 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1617795555605 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1617795555605 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1617795555605 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1617795555605 .marker{fill:#333333;}#mermaid-1617795555605 .marker.cross{stroke:#333333;}#mermaid-1617795555605 svg{font-family:sans-serif;font-size:16px;}#mermaid-1617795555605 .actor{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1617795555605 text.actor > tspan{fill:black;stroke:none;}#mermaid-1617795555605 .actor-line{stroke:grey;}#mermaid-1617795555605 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-1617795555605 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-1617795555605 #arrowhead path{fill:#333;stroke:#333;}#mermaid-1617795555605 .sequenceNumber{fill:white;}#mermaid-1617795555605 #sequencenumber{fill:#333;}#mermaid-1617795555605 #crosshead path{fill:#333;stroke:#333;}#mermaid-1617795555605 .messageText{fill:#333;stroke:#333;}#mermaid-1617795555605 .labelBox{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1617795555605 .labelText,#mermaid-1617795555605 .labelText > tspan{fill:black;stroke:none;}#mermaid-1617795555605 .loopText,#mermaid-1617795555605 .loopText > tspan{fill:black;stroke:none;}#mermaid-1617795555605 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:hsl(259.6261682243,59.7765363128%,87.9019607843%);}#mermaid-1617795555605 .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-1617795555605 .noteText,#mermaid-1617795555605 .noteText > tspan{fill:black;stroke:none;}#mermaid-1617795555605 .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-1617795555605 .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-1617795555605 .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-1617795555605:root{--mermaid-font-family:sans-serif;}#mermaid-1617795555605 sequence{fill:apa;}\"), mdx(\"g\", {\n    parentName: \"svg\"\n  }), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"actor0\",\n    \"x1\": \"75\",\n    \"y1\": \"5\",\n    \"x2\": \"75\",\n    \"y2\": \"502\",\n    \"className\": \"actor-line\",\n    \"strokeWidth\": \"0.5px\",\n    \"stroke\": \"#999\"\n  })), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"0\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"75\",\n    \"y\": \"32.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"75\",\n    \"dy\": \"0\"\n  }), \"UsePaging\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"actor1\",\n    \"x1\": \"275\",\n    \"y1\": \"5\",\n    \"x2\": \"275\",\n    \"y2\": \"502\",\n    \"className\": \"actor-line\",\n    \"strokeWidth\": \"0.5px\",\n    \"stroke\": \"#999\"\n  })), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"200\",\n    \"y\": \"0\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"275\",\n    \"y\": \"32.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"275\",\n    \"dy\": \"0\"\n  }), \"UseSelection\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"actor2\",\n    \"x1\": \"475\",\n    \"y1\": \"5\",\n    \"x2\": \"475\",\n    \"y2\": \"502\",\n    \"className\": \"actor-line\",\n    \"strokeWidth\": \"0.5px\",\n    \"stroke\": \"#999\"\n  })), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"400\",\n    \"y\": \"0\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"475\",\n    \"y\": \"32.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"475\",\n    \"dy\": \"0\"\n  }), \"UseFiltering\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"actor3\",\n    \"x1\": \"675\",\n    \"y1\": \"5\",\n    \"x2\": \"675\",\n    \"y2\": \"502\",\n    \"className\": \"actor-line\",\n    \"strokeWidth\": \"0.5px\",\n    \"stroke\": \"#999\"\n  })), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"600\",\n    \"y\": \"0\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"675\",\n    \"y\": \"32.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"675\",\n    \"dy\": \"0\"\n  }), \"UseSorting\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"actor4\",\n    \"x1\": \"875\",\n    \"y1\": \"5\",\n    \"x2\": \"875\",\n    \"y2\": \"502\",\n    \"className\": \"actor-line\",\n    \"strokeWidth\": \"0.5px\",\n    \"stroke\": \"#999\"\n  })), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"800\",\n    \"y\": \"0\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"875\",\n    \"y\": \"32.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"875\",\n    \"dy\": \"0\"\n  }), \"Resolver\"))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"arrowhead\",\n    \"refX\": \"5\",\n    \"refY\": \"2\",\n    \"markerWidth\": \"6\",\n    \"markerHeight\": \"4\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 0,0 V 4 L6,2 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"crosshead\",\n    \"markerWidth\": \"15\",\n    \"markerHeight\": \"8\",\n    \"orient\": \"auto\",\n    \"refX\": \"16\",\n    \"refY\": \"4\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"fill\": \"black\",\n    \"stroke\": \"#000000\",\n    \"strokeWidth\": \"1px\",\n    \"d\": \"M 9,2 V 6 L16,4 Z\",\n    \"style\": {\n      \"strokeDasharray\": \"0, 0\"\n    }\n  })), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"strokeWidth\": \"1px\",\n    \"d\": \"M 0,1 L 6,7 M 6,1 L 0,7\",\n    \"style\": {\n      \"strokeDasharray\": \"0, 0\"\n    }\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"sequencenumber\",\n    \"refX\": \"15\",\n    \"refY\": \"15\",\n    \"markerWidth\": \"60\",\n    \"markerHeight\": \"40\",\n    \"orient\": \"auto\"\n  }), mdx(\"circle\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"cx\": \"15\",\n    \"cy\": \"15\",\n    \"r\": \"6\"\n  })))), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"175\",\n    \"y\": \"80\",\n    \"textAnchor\": \"middle\",\n    \"dominantBaseline\": \"middle\",\n    \"alignmentBaseline\": \"middle\",\n    \"className\": \"messageText\",\n    \"dy\": \"1em\",\n    \"style\": {\n      \"fontFamily\": \"\\\"trebuchet ms\\\", verdana, arial\",\n      \"fontSize\": \"16px\",\n      \"fontWeight\": \"400\"\n    }\n  }), \"next(context)\"), mdx(\"line\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x1\": \"75\",\n    \"y1\": \"109\",\n    \"x2\": \"275\",\n    \"y2\": \"109\",\n    \"className\": \"messageLine0\",\n    \"strokeWidth\": \"2\",\n    \"stroke\": \"none\",\n    \"markerEnd\": \"url(#arrowhead)\",\n    \"markerStart\": \"url(#sequencenumber)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  })), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"75\",\n    \"y\": \"113\",\n    \"fontFamily\": \"sans-serif\",\n    \"fontSize\": \"12px\",\n    \"textAnchor\": \"middle\",\n    \"textLength\": \"16px\",\n    \"className\": \"sequenceNumber\"\n  }), \"1\"), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"270\",\n    \"y\": \"109\",\n    \"fill\": \"#EDF2AE\",\n    \"stroke\": \"#666\",\n    \"width\": \"10\",\n    \"height\": \"308\",\n    \"rx\": \"0\",\n    \"ry\": \"0\",\n    \"className\": \"activation0\"\n  }))), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"378\",\n    \"y\": \"124\",\n    \"textAnchor\": \"middle\",\n    \"dominantBaseline\": \"middle\",\n    \"alignmentBaseline\": \"middle\",\n    \"className\": \"messageText\",\n    \"dy\": \"1em\",\n    \"style\": {\n      \"fontFamily\": \"\\\"trebuchet ms\\\", verdana, arial\",\n      \"fontSize\": \"16px\",\n      \"fontWeight\": \"400\"\n    }\n  }), \"next(context)\"), mdx(\"line\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x1\": \"280\",\n    \"y1\": \"153\",\n    \"x2\": \"475\",\n    \"y2\": \"153\",\n    \"className\": \"messageLine0\",\n    \"strokeWidth\": \"2\",\n    \"stroke\": \"none\",\n    \"markerEnd\": \"url(#arrowhead)\",\n    \"markerStart\": \"url(#sequencenumber)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  })), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"280\",\n    \"y\": \"157\",\n    \"fontFamily\": \"sans-serif\",\n    \"fontSize\": \"12px\",\n    \"textAnchor\": \"middle\",\n    \"textLength\": \"16px\",\n    \"className\": \"sequenceNumber\"\n  }), \"2\"), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"470\",\n    \"y\": \"155\",\n    \"fill\": \"#EDF2AE\",\n    \"stroke\": \"#666\",\n    \"width\": \"10\",\n    \"height\": \"218\",\n    \"rx\": \"0\",\n    \"ry\": \"0\",\n    \"className\": \"activation0\"\n  }))), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"578\",\n    \"y\": \"168\",\n    \"textAnchor\": \"middle\",\n    \"dominantBaseline\": \"middle\",\n    \"alignmentBaseline\": \"middle\",\n    \"className\": \"messageText\",\n    \"dy\": \"1em\",\n    \"style\": {\n      \"fontFamily\": \"\\\"trebuchet ms\\\", verdana, arial\",\n      \"fontSize\": \"16px\",\n      \"fontWeight\": \"400\"\n    }\n  }), \"next(context)\"), mdx(\"line\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x1\": \"480\",\n    \"y1\": \"197\",\n    \"x2\": \"675\",\n    \"y2\": \"197\",\n    \"className\": \"messageLine0\",\n    \"strokeWidth\": \"2\",\n    \"stroke\": \"none\",\n    \"markerEnd\": \"url(#arrowhead)\",\n    \"markerStart\": \"url(#sequencenumber)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  })), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"480\",\n    \"y\": \"201\",\n    \"fontFamily\": \"sans-serif\",\n    \"fontSize\": \"12px\",\n    \"textAnchor\": \"middle\",\n    \"textLength\": \"16px\",\n    \"className\": \"sequenceNumber\"\n  }), \"3\"), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"670\",\n    \"y\": \"199\",\n    \"fill\": \"#EDF2AE\",\n    \"stroke\": \"#666\",\n    \"width\": \"10\",\n    \"height\": \"130\",\n    \"rx\": \"0\",\n    \"ry\": \"0\",\n    \"className\": \"activation0\"\n  }))), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"778\",\n    \"y\": \"212\",\n    \"textAnchor\": \"middle\",\n    \"dominantBaseline\": \"middle\",\n    \"alignmentBaseline\": \"middle\",\n    \"className\": \"messageText\",\n    \"dy\": \"1em\",\n    \"style\": {\n      \"fontFamily\": \"\\\"trebuchet ms\\\", verdana, arial\",\n      \"fontSize\": \"16px\",\n      \"fontWeight\": \"400\"\n    }\n  }), \"next(context)\"), mdx(\"line\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x1\": \"680\",\n    \"y1\": \"241\",\n    \"x2\": \"875\",\n    \"y2\": \"241\",\n    \"className\": \"messageLine0\",\n    \"strokeWidth\": \"2\",\n    \"stroke\": \"none\",\n    \"markerEnd\": \"url(#arrowhead)\",\n    \"markerStart\": \"url(#sequencenumber)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  })), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"680\",\n    \"y\": \"245\",\n    \"fontFamily\": \"sans-serif\",\n    \"fontSize\": \"12px\",\n    \"textAnchor\": \"middle\",\n    \"textLength\": \"16px\",\n    \"className\": \"sequenceNumber\"\n  }), \"4\"), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"870\",\n    \"y\": \"243\",\n    \"fill\": \"#EDF2AE\",\n    \"stroke\": \"#666\",\n    \"width\": \"10\",\n    \"height\": \"42\",\n    \"rx\": \"0\",\n    \"ry\": \"0\",\n    \"className\": \"activation0\"\n  }))), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"775\",\n    \"y\": \"256\",\n    \"textAnchor\": \"middle\",\n    \"dominantBaseline\": \"middle\",\n    \"alignmentBaseline\": \"middle\",\n    \"className\": \"messageText\",\n    \"dy\": \"1em\",\n    \"style\": {\n      \"fontFamily\": \"\\\"trebuchet ms\\\", verdana, arial\",\n      \"fontSize\": \"16px\",\n      \"fontWeight\": \"400\"\n    }\n  }), \"apply sorting\"), mdx(\"line\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x1\": \"870\",\n    \"y1\": \"285\",\n    \"x2\": \"680\",\n    \"y2\": \"285\",\n    \"className\": \"messageLine1\",\n    \"strokeWidth\": \"2\",\n    \"stroke\": \"none\",\n    \"markerEnd\": \"url(#arrowhead)\",\n    \"markerStart\": \"url(#sequencenumber)\",\n    \"style\": {\n      \"strokeDasharray\": \"3, 3\",\n      \"fill\": \"none\"\n    }\n  })), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"870\",\n    \"y\": \"289\",\n    \"fontFamily\": \"sans-serif\",\n    \"fontSize\": \"12px\",\n    \"textAnchor\": \"middle\",\n    \"textLength\": \"16px\",\n    \"className\": \"sequenceNumber\"\n  }), \"5\"), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"575\",\n    \"y\": \"300\",\n    \"textAnchor\": \"middle\",\n    \"dominantBaseline\": \"middle\",\n    \"alignmentBaseline\": \"middle\",\n    \"className\": \"messageText\",\n    \"dy\": \"1em\",\n    \"style\": {\n      \"fontFamily\": \"\\\"trebuchet ms\\\", verdana, arial\",\n      \"fontSize\": \"16px\",\n      \"fontWeight\": \"400\"\n    }\n  }), \"apply filters\"), mdx(\"line\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x1\": \"670\",\n    \"y1\": \"329\",\n    \"x2\": \"480\",\n    \"y2\": \"329\",\n    \"className\": \"messageLine1\",\n    \"strokeWidth\": \"2\",\n    \"stroke\": \"none\",\n    \"markerEnd\": \"url(#arrowhead)\",\n    \"markerStart\": \"url(#sequencenumber)\",\n    \"style\": {\n      \"strokeDasharray\": \"3, 3\",\n      \"fill\": \"none\"\n    }\n  })), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"670\",\n    \"y\": \"333\",\n    \"fontFamily\": \"sans-serif\",\n    \"fontSize\": \"12px\",\n    \"textAnchor\": \"middle\",\n    \"textLength\": \"16px\",\n    \"className\": \"sequenceNumber\"\n  }), \"6\"), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"375\",\n    \"y\": \"344\",\n    \"textAnchor\": \"middle\",\n    \"dominantBaseline\": \"middle\",\n    \"alignmentBaseline\": \"middle\",\n    \"className\": \"messageText\",\n    \"dy\": \"1em\",\n    \"style\": {\n      \"fontFamily\": \"\\\"trebuchet ms\\\", verdana, arial\",\n      \"fontSize\": \"16px\",\n      \"fontWeight\": \"400\"\n    }\n  }), \"apply projections\"), mdx(\"line\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x1\": \"470\",\n    \"y1\": \"373\",\n    \"x2\": \"280\",\n    \"y2\": \"373\",\n    \"className\": \"messageLine1\",\n    \"strokeWidth\": \"2\",\n    \"stroke\": \"none\",\n    \"markerEnd\": \"url(#arrowhead)\",\n    \"markerStart\": \"url(#sequencenumber)\",\n    \"style\": {\n      \"strokeDasharray\": \"3, 3\",\n      \"fill\": \"none\"\n    }\n  })), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"470\",\n    \"y\": \"377\",\n    \"fontFamily\": \"sans-serif\",\n    \"fontSize\": \"12px\",\n    \"textAnchor\": \"middle\",\n    \"textLength\": \"16px\",\n    \"className\": \"sequenceNumber\"\n  }), \"7\"), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"173\",\n    \"y\": \"388\",\n    \"textAnchor\": \"middle\",\n    \"dominantBaseline\": \"middle\",\n    \"alignmentBaseline\": \"middle\",\n    \"className\": \"messageText\",\n    \"dy\": \"1em\",\n    \"style\": {\n      \"fontFamily\": \"\\\"trebuchet ms\\\", verdana, arial\",\n      \"fontSize\": \"16px\",\n      \"fontWeight\": \"400\"\n    }\n  }), \"apply paging\"), mdx(\"line\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x1\": \"270\",\n    \"y1\": \"417\",\n    \"x2\": \"75\",\n    \"y2\": \"417\",\n    \"className\": \"messageLine1\",\n    \"strokeWidth\": \"2\",\n    \"stroke\": \"none\",\n    \"markerEnd\": \"url(#arrowhead)\",\n    \"markerStart\": \"url(#sequencenumber)\",\n    \"style\": {\n      \"strokeDasharray\": \"3, 3\",\n      \"fill\": \"none\"\n    }\n  })), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"270\",\n    \"y\": \"421\",\n    \"fontFamily\": \"sans-serif\",\n    \"fontSize\": \"12px\",\n    \"textAnchor\": \"middle\",\n    \"textLength\": \"16px\",\n    \"className\": \"sequenceNumber\"\n  }), \"8\"), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"437\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"75\",\n    \"y\": \"469.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"75\",\n    \"dy\": \"0\"\n  }), \"UsePaging\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"200\",\n    \"y\": \"437\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"275\",\n    \"y\": \"469.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"275\",\n    \"dy\": \"0\"\n  }), \"UseSelection\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"400\",\n    \"y\": \"437\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"475\",\n    \"y\": \"469.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"475\",\n    \"dy\": \"0\"\n  }), \"UseFiltering\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"600\",\n    \"y\": \"437\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"675\",\n    \"y\": \"469.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"675\",\n    \"dy\": \"0\"\n  }), \"UseSorting\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"800\",\n    \"y\": \"437\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"875\",\n    \"y\": \"469.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"875\",\n    \"dy\": \"0\"\n  }), \"Resolver\"))))), mdx(\"p\", null, \"Each field middleware initially yields control to the next field middleware until the resolver is invoked. The resolver returns its result and the field middleware will now on the way back apply their functionality to the result. In our case the field middleware are applying expressions to the queryable to build up the database query.\"), mdx(\"p\", null, \"With that upgraded \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Query\"), \" type let us restart our server.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"dotnet run --urls http://localhost:5000\\n\")), mdx(\"p\", null, \"Now let us inspect our schema again. When we look at the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"students\"), \" field we can see that there are new arguments called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"where\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"orderBy\"), \".\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"800px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/2279da65617387b53c7d8447c66fbcec/b2484/banana-cake-pop-arguments.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"63.5%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC8klEQVQ4y4WRW2jTUByH8+KLMhAEwcuDWLEy71qd1azVCWNORBD1wVdBEQQFhRlEqlUUUaEPgiAy5zpXrVhXUfGCL7IXH3zwaQx6cVnbpEmaJj3NpUlz/p6TzXkFQ778TkL4zu+cw/T2Hwpv6TscW7Xz0MCKroNcgD3KbYoc4Dq3RrjTZ85xiUSC2913kAtuCnPBjTu4lZ1bucDaEBdYt41btaGLC25mueCW7oHObXti67t69jFLoyduHhu4C/dTr+DO4Au48zALo2PvIf3yHXz+8hV4fhqyrz/Ao1QGRtJZGH76gjAGw08ykCSZTI9BKvMGnr18D0OpzHOmY9epy7cffwRwTctAutMykeMi5Fhy1WlI046u1hzA2AEAB1yXjAmeOfNOaHsuTYsAVVEYYlYficUT6U/Q1NR2RRBxRRCwrmkYCQXsqFPYc1u47XlYVzUs8jxWFYkgY438I8sKrql13EDI1RsNmJycHGbmhY7HL93Lgom0tiCKWKxWQSoLoExPgVCVoa5pgJoIUE0DtVgAXa+D3XIINimhg8SXsKZrbdNoQi6XTzLzd5yMX77/CqxZYZUIZb4MlUIRyoIImqYCnR3VddBLPBhIA8d1feymAYoo4YYmt20TQaH4Lcl0sKfj8Qdv/IaiWMWiSCRKDXQyOzIssKwZTNMkkLRssP1vNjitFmCgN7TpHlYqlSSzMHo2fm3w7W9CtV6HZrMJiDZDyB9TDMPwmZGbYNs29WBy+cJyuZxkFu09H78+9IEI6z+FqgoNItN13c8fUPmvE9DmfwkX9164cuPRRzAaddc/FIKiKP4pUoj0N4h4DtKSLhd7nucSKZRKpWFm6f5LV2+NfgLbaHiSrIAsy35D2u4H/2pIc3bJ9PLoQ5KkEWZ5/8UY3cNqhW/l8nk3T8jlcm6hUPDHNP+kWCz6yfO8SyQuWao9MTEB4+PjD5kFS4LL1mzcHu3Zs5uNRqPd/yMSiczBsmx3OBzuDoVCbCAQiBIC3wGtoDW6erVRlAAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Hot Chocolate\",\n    \"title\": \"Hot Chocolate\",\n    \"src\": \"/static/2279da65617387b53c7d8447c66fbcec/7842b/banana-cake-pop-arguments.png\",\n    \"srcSet\": [\"/static/2279da65617387b53c7d8447c66fbcec/f8f3a/banana-cake-pop-arguments.png 200w\", \"/static/2279da65617387b53c7d8447c66fbcec/6a8a8/banana-cake-pop-arguments.png 400w\", \"/static/2279da65617387b53c7d8447c66fbcec/7842b/banana-cake-pop-arguments.png 800w\", \"/static/2279da65617387b53c7d8447c66fbcec/5ece7/banana-cake-pop-arguments.png 1200w\", \"/static/2279da65617387b53c7d8447c66fbcec/0d4f8/banana-cake-pop-arguments.png 1600w\", \"/static/2279da65617387b53c7d8447c66fbcec/b2484/banana-cake-pop-arguments.png 2972w\"],\n    \"sizes\": \"(max-width: 800px) 100vw, 800px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"For our first query let us fetch the students with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"lastName\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Bar\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Baz\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"query {\\n  students(where: { OR: [{ lastName: \\\"Bar\\\" }, { lastName: \\\"Baz\\\" }] }) {\\n    firstMidName\\n    lastName\\n    enrollments {\\n      course {\\n        title\\n      }\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, \"Which will return the following result:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"{\\n  \\\"data\\\": {\\n    \\\"students\\\": [\\n      {\\n        \\\"firstMidName\\\": \\\"Pascal\\\",\\n        \\\"lastName\\\": \\\"Bar\\\",\\n        \\\"enrollments\\\": [\\n          {\\n            \\\"course\\\": {\\n              \\\"title\\\": \\\"Object Oriented Programming 1\\\"\\n            }\\n          }\\n        ]\\n      },\\n      {\\n        \\\"firstMidName\\\": \\\"Michael\\\",\\n        \\\"lastName\\\": \\\"Baz\\\",\\n        \\\"enrollments\\\": [\\n          {\\n            \\\"course\\\": {\\n              \\\"title\\\": \\\"Object Oriented Programming 1\\\"\\n            }\\n          }\\n        ]\\n      }\\n    ]\\n  }\\n}\\n\")), mdx(\"p\", null, \"Again, we are rewriting the whole GraphQL query into one expression tree that translates into the following SQL.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"SELECT \\\"s\\\".\\\"FirstMidName\\\",\\n       \\\"s\\\".\\\"LastName\\\",\\n       \\\"s\\\".\\\"Id\\\",\\n       \\\"t\\\".\\\"Title\\\",\\n       \\\"t\\\".\\\"EnrollmentId\\\",\\n       \\\"t\\\".\\\"CourseId\\\"\\n    FROM \\\"Students\\\" AS \\\"s\\\"\\n    LEFT JOIN (\\n        SELECT \\\"c\\\".\\\"Title\\\",\\n               \\\"e\\\".\\\"EnrollmentId\\\",\\n               \\\"c\\\".\\\"CourseId\\\",\\n               \\\"e\\\".\\\"StudentId\\\"\\n        FROM \\\"Enrollments\\\" AS \\\"e\\\"\\n        INNER JOIN \\\"Courses\\\" AS \\\"c\\\"\\n              ON \\\"e\\\".\\\"CourseId\\\" = \\\"c\\\".\\\"CourseId\\\"\\n    ) AS \\\"t\\\" ON \\\"s\\\".\\\"Id\\\" = \\\"t\\\".\\\"StudentId\\\"\\n    WHERE (\\\"s\\\".\\\"LastName\\\" = 'Bar') OR (\\\"s\\\".\\\"LastName\\\" = 'Baz')\\n    ORDER BY \\\"s\\\".\\\"Id\\\", \\\"t\\\".\\\"EnrollmentId\\\", \\\"t\\\".\\\"CourseId\\\"\\n\")), mdx(\"p\", null, \"But we can go further and even allow more. Let\\u2019s say we want to allow the consumer of our API to search for specific grades in our student\\u2019s enrolment list.\"), mdx(\"p\", null, \"In order to allow filtering on the enrollments we can add the same \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UseFiltering\"), \" attribute in our entity on the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Enrollments\"), \" collection and this property becomes filterable.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"public class Student\\n{\\n    [Key]\\n    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]\\n    public int Id { get; set; }\\n    public string LastName { get; set; }\\n    public string FirstMidName { get; set; }\\n    public DateTime EnrollmentDate { get; set; }\\n\\n    [UseFiltering]\\n    public virtual ICollection<Enrollment> Enrollments { get; set; }\\n}\\n\")), mdx(\"p\", null, \"We don\", \"`\", \"t need to apply \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UseSelections\"), \" again. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UseSelections\"), \" really only has to be applied where the data is initially fetched. In this case we do only want to support filtering but no sorting on enrollments. I could again add both but decided to only use filtering here.\"), mdx(\"p\", null, \"Let us restart our server and modify our query further.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"dotnet run --urls http://localhost:5000\\n\")), mdx(\"p\", null, \"For the next query we will get all students with the last name \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Bar\"), \" that are enrolled in the course with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"courseId\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"1\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"query {\\n  students(where: { lastName: \\\"Bar\\\" }) {\\n    firstMidName\\n    lastName\\n    enrollments(where: { courseId: 1 }) {\\n      courseId\\n      course {\\n        title\\n      }\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, \"The following query translates again to a single SQL statement.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"SELECT \\\"s\\\".\\\"FirstMidName\\\",\\n       \\\"s\\\".\\\"LastName\\\",\\n       \\\"s\\\".\\\"Id\\\",\\n       \\\"t\\\".\\\"CourseId\\\",\\n       \\\"t\\\".\\\"Title\\\",\\n       \\\"t\\\".\\\"EnrollmentId\\\",\\n       \\\"t\\\".\\\"CourseId0\\\"\\n    FROM \\\"Students\\\" AS \\\"s\\\"\\n    LEFT JOIN (\\n        SELECT \\\"e\\\".\\\"CourseId\\\",\\n               \\\"c\\\".\\\"Title\\\",\\n               \\\"e\\\".\\\"EnrollmentId\\\".\\n               \\\"c\\\".\\\"CourseId\\\" AS \\\"CourseId0\\\",\\n               \\\"e\\\".\\\"StudentId\\\"\\n        FROM \\\"Enrollments\\\" AS \\\"e\\\"\\n        INNER JOIN \\\"Courses\\\" AS \\\"c\\\"\\n              ON \\\"e\\\".\\\"CourseId\\\" = \\\"c\\\".\\\"CourseId\\\"\\n        WHERE \\\"e\\\".\\\"CourseId\\\" = 1\\n    ) AS \\\"t\\\" ON \\\"s\\\".\\\"Id\\\" = \\\"t\\\".\\\"StudentId\\\"\\n    WHERE \\\"s\\\".\\\"LastName\\\" = 'Bar'\\n    ORDER BY \\\"s\\\".\\\"Id\\\", \\\"t\\\".\\\"EnrollmentId\\\", \\\"t\\\".\\\"CourseId0\\\"\\n\")), mdx(\"p\", null, \"With filtering and sorting we infer complex filters from our models without almost any code. This allows us to query our data with complex expressions while drilling into the data graph.\"), mdx(\"p\", null, \"Hot Chocolate supports complex expressions with a variety of query operators that can be enabled by just adding a simple attribute on your field resolver. We can also configure the filter capabilities which we want to allow. This means you can for instance disallow \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OR\"), \" combinations of filter clauses.\"), mdx(\"h2\", null, \"Paging\"), mdx(\"p\", null, \"But we still might get too much data back. What if we select all the students from a real university database? This is where our paging middleware comes in. The paging middleware implements the relay cursor pagination spec.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Since we cannot do a skip while with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Entity Framework\"), \", we actually use an indexed based pagination underneath. For convenience we are wrapping this as really cursor pagination. With mongoDB and other database provider we are supporting real cursor based pagination.\")), mdx(\"p\", null, \"Like with filtering, sorting and selection we just annotate the paging middleware and it just works. Again, middleware order is important, so we need to put the paging attribute on the top since the most top field middleware is actually applied last like shown in the diagram.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"using System.Linq;\\nusing HotChocolate;\\nusing HotChocolate.Types;\\nusing HotChocolate.Types.Relay;\\n\\nnamespace ContosoUniversity\\n{\\n    public class Query\\n    {\\n        [UsePaging]\\n        [UseSelection]\\n        [UseFiltering]\\n        [UseSorting]\\n        public IQueryable<Student> GetStudents([Service]SchoolContext context) =>\\n            context.Students;\\n    }\\n}\\n\")), mdx(\"p\", null, \"Since paging adds metadata for pagination like a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"totalCount\"), \" or a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pageInfo\"), \" the actual result structure now changes. Also, the paging middleware adds arguments to our field that we need to navigate between pages.\"), mdx(\"p\", null, \"Our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"students\"), \" field now returns a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"StudentConnection\"), \" which allows us to either fetch the actual \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Student\"), \" nodes of the current page or to ask for the pagination metadata.\"), mdx(\"p\", null, \"We could in fact just fetch the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"totalCount\"), \" of our data set.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"query {\\n  students(first: 1) {\\n    totalCount\\n  }\\n}\\n\")), mdx(\"p\", null, \"Which would again translate to a simple SQL.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"SELECT 1 FROM \\\"Students\\\" AS \\\"s\\\"\\n\")), mdx(\"p\", null, \"Next let us just fetch the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"lastName\"), \" of the first student.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"query {\\n  students(first: 1) {\\n    nodes {\\n      lastName\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, \"Which translates to a simple limit query for \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"SQLLite\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"SELECT \\\"s\\\".\\\"LastName\\\"\\n    FROM \\\"Students\\\" AS \\\"s\\\"\\n    LIMIT @__p_0\\n\")), mdx(\"p\", null, \"In order to navigate forward through pages we also need to get data from our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pageInfo\"), \" like if there is a next page and the last cursor of the current page.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"query {\\n  students(first: 1) {\\n    nodes {\\n      lastName\\n    }\\n    pageInfo {\\n      hasNextPage\\n      endCursor\\n    }\\n  }\\n}\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"{\\n  \\\"data\\\": {\\n    \\\"students\\\": {\\n      \\\"nodes\\\": [\\n        {\\n          \\\"lastName\\\": \\\"Foo\\\"\\n        }\\n      ],\\n      \\\"pageInfo\\\": {\\n        \\\"hasNextPage\\\": true,\\n        \\\"endCursor\\\": \\\"eyJfX3RvdGFsQ291bnQiOjMsIl9fcG9zaXRpb24iOjB9\\\"\\n      }\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, \"With the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"endCursor\"), \" of a page we can get the next page that comes after the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"endCursor\"), \" by feeding the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"endCursor\"), \" into the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"after\"), \" argument.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"query {\\n  students(first: 1, after: \\\"eyJfX3RvdGFsQ291bnQiOjMsIl9fcG9zaXRpb24iOjB9\\\") {\\n    nodes {\\n      lastName\\n    }\\n    pageInfo {\\n      hasNextPage\\n      endCursor\\n    }\\n  }\\n}\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"{\\n  \\\"data\\\": {\\n    \\\"students\\\": {\\n      \\\"nodes\\\": [\\n        {\\n          \\\"lastName\\\": \\\"Bar\\\"\\n        }\\n      ],\\n      \\\"pageInfo\\\": {\\n        \\\"hasNextPage\\\": true,\\n        \\\"endCursor\\\": \\\"eyJfX3RvdGFsQ291bnQiOjMsIl9fcG9zaXRpb24iOjF9\\\"\\n      }\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, \"This will then be translated into simple offset navigation when using \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Entity Framework\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"SELECT \\\"s\\\".\\\"LastName\\\"\\n    FROM \\\"Students\\\" AS \\\"s\\\"\\n    ORDER BY (SELECT 1)\\n    LIMIT @__p_0 OFFSET @__p_0\\n\")), mdx(\"p\", null, \"Again, without a lot of effort we were able to create a powerful GraphQL server with advanced filter and pagination capabilities by just writing basically one line of code with lots of attributes on top of that.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"using System.Linq;\\nusing HotChocolate;\\nusing HotChocolate.Types;\\nusing HotChocolate.Types.Relay;\\n\\nnamespace ContosoUniversity\\n{\\n    public class Query\\n    {\\n        [UsePaging]\\n        [UseSelection]\\n        [UseFiltering]\\n        [UseSorting]\\n        public IQueryable<Student> GetStudents([Service]SchoolContext context) =>\\n            context.Students;\\n    }\\n}\\n\")), mdx(\"p\", null, \"Each request in GraphQL translates into native SQL. Whenever possible we translate it into a single SQL request reducing the need to fetch multiple times from the database.\"), mdx(\"h2\", null, \"Single Selects\"), mdx(\"p\", null, \"We still can improve our query and allow to explore the data from different angles.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"using System.Linq;\\nusing HotChocolate;\\nusing HotChocolate.Types;\\nusing HotChocolate.Types.Relay;\\n\\nnamespace ContosoUniversity\\n{\\n    public class Query\\n    {\\n        [UsePaging]\\n        [UseSelection]\\n        [UseFiltering]\\n        [UseSorting]\\n        public IQueryable<Student> GetStudents([Service]SchoolContext context) =>\\n            context.Students;\\n\\n        [UsePaging]\\n        [UseSelection]\\n        [UseFiltering]\\n        [UseSorting]\\n        public IQueryable<Course> GetCourses([Service]SchoolContext context) =>\\n            context.Courses;\\n    }\\n}\\n\")), mdx(\"p\", null, \"With the above code we can now drill into the data from both sides. In order to get an even nicer API, we might also want to allow dedicated fetches maybe for a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Student\"), \" by the student ID.\"), mdx(\"p\", null, \"We could do something like the following and it would work.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"public Task<Student> GetStudentByIdAsync([Service]SchoolContext context, int studentId) =>\\n    context.Students.FirstOrDefaultAsync(t => t.Id == studentId);\\n\")), mdx(\"p\", null, \"If we did something like that with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Entity Framework\"), \" we actually would need to write a couple more resolvers to fetch the edges of the entity like the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Enrollments\"), \" since with this resolver there is no middleware that does the hard work for us. With the resolver above we are fully in control of the data fetching.\"), mdx(\"p\", null, \"Also doing it like that will lead into other problems since now we are causing multiple fetches to the database and we would no need to think about things like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DataLoader\"), \" to guarantee consistency between fetches in a single request.\"), mdx(\"p\", null, \"But we actually have a simple solution for this since we could use our selection middleware still and just tell the middleware pipeline that we actually just want a single result for that resolver.\"), mdx(\"p\", null, \"Let us rewrite the above resolver and look at it again.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-csharp\"\n  }), \"[UseFirstOrDefault]\\n[UseSelection]\\npublic IQueryable<Student> GetStudentById([Service]SchoolContext context, int studentId) =>\\n    context.Students.Where(t => t.Id == studentId);\\n\")), mdx(\"p\", null, \"This now looks like the initial resolvers that we wrote to fetch all students. We predefined the where clause and we added a new middleware called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UseFirstOrDefault\"), \". The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UseFirstOrDefault\"), \" middleware will rewrite the result type for the GraphQL schema from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[Student]\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Student\"), \" and ensure the we will only fetch a single entity from the database.\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UseFirstOrDefault\"), \" from a semantics perspective aligns to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FirstOrDefaultAsync\"), \" provided by the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Entity Framework\"), \". Hot Chocolate also provides you with a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UseSingleOrDefault\"), \" middleware that will produce a GraphQL field error whenever there is more than one result.\"), mdx(\"h2\", null, \"Conclusion and Outlook\"), mdx(\"p\", null, \"Hot Chocolate has a powerful execution model that allows to natively integrate with data sources of any kind.\"), mdx(\"p\", null, \"The middleware that we showed you here like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UseSelection\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UseFiltering\"), \" etc. do not only work with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Entity Framework\"), \" but also support other providers that support \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"IQueryable<T>\"), \" to express database queries.\"), mdx(\"p\", null, \"But even if you want to support native SQL without \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"IQueryable<T>\"), \" it is super simple to inherit from our query rewriter base classes and and add this translation.\"), mdx(\"p\", null, \"By just implementing such a query rewriter you are creating a native database provider for Hot Chocolate that integrates fully with the query engine.\"), mdx(\"p\", null, \"We also support the full features shown here with multiple other approaches like code-first with schema types or SDL first.\"), mdx(\"p\", null, \"With version 11 we are introducing a new more powerful query engine that will provide full query execution plan support. Version 11 will have even better filters and push what we showed here today to the limit.\"), mdx(\"p\", null, \"The example used in this post can be found \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ChilliCream/hotchocolate-examples/tree/master/blog/2020/2020-03-18-entity-framework/ContosoUni\"\n  }), \"here\"), \".\"), mdx(\"p\", null, \"We also have a more complex real-time GraphQL server example in multiple flavors and different database integrations \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ChilliCream/hotchocolate-examples/tree/master/workshop/src/Server\"\n  }), \"here\"), \".\"), mdx(\"p\", null, \"If you want to get into contact with us head over to our slack channel and join our community.\"));\n}\n;\nMDXContent.isMDXComponent = true;","fields":{"readingTime":{"text":"25 min read"}}},"site":{"siteMetadata":{"siteUrl":"https://chillicream.com","author":"Chilli_Cream"}}},"pageContext":{}},"staticQueryHashes":["1014893094","2890364758","4218812017"]}
[global::System.CodeDom.Compiler.GeneratedCode("StrawberryShake", "11.0.0")]
public partial class FooFromFooEntityMapper
    : IEntityMapper<FooEntity, Foo>
{
    private readonly IEntityStore _entityStore;
    private readonly IEntityMapper<BarEntity, Bar> _barFromBarEntityMapper;

    public FooFromFooEntityMapper(
        IEntityStore entityStore,
        IEntityMapper<BarEntity, Bar> barFromBarEntityMapper)
    {
        _entityStore = entityStore
             ?? throw new ArgumentNullException(nameof(entityStore));
        _barFromBarEntityMapper = barFromBarEntityMapper
             ?? throw new ArgumentNullException(nameof(barFromBarEntityMapper));
    }

    public Foo Map(FooEntity entity)
    {
        return new Foo(
            entity.SomeText,
            entityStore.GetEntities<BarEntity>(entity.BarReferenceList)
                .Select(referencedEntity => _barFromBarEntityMapper.Map(referencedEntity))
                .ToList(),
            _barFromBarEntityMapper.Map(entityStore.GetEntity<BarEntity>(entity.BarReference)),
            entity.SomeOtherText
        );
    }
}

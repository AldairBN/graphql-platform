namespace StarWarsClient
{
    [global::System.CodeDom.Compiler.GeneratedCode("StrawberryShake", "11.0.0")]
    public partial class GetHeroResultFactory
        : IOperationResultDataFactory<GetHeroResult>
    {
        private readonly IEntityStore _entityStore;
        private readonly IEntityMapper<HumanEntity, HumanHero> _humanFromHumanEntityMapper;
        private readonly IEntityMapper<DroidEntity, DroidHero> _droidFromDroidEntityMapper;

        public GetHeroResultFactory(
            IEntityStore entityStore,
            IEntityMapper<HumanEntity, HumanHero> humanFromHumanEntityMapper,
            IEntityMapper<DroidEntity, DroidHero> droidFromDroidEntityMapper)
        {
            _entityStore = entityStore
                 ?? throw new ArgumentNullException(nameof(entityStore));
            _humanFromHumanEntityMapper = humanFromHumanEntityMapper
                 ?? throw new ArgumentNullException(nameof(humanFromHumanEntityMapper));
            _droidFromDroidEntityMapper = droidFromDroidEntityMapper
                 ?? throw new ArgumentNullException(nameof(droidFromDroidEntityMapper));
        }

        public GetHeroResult Create(IOperationResultDataInfo dataInfo)
        {
            if (dataInfo is GetHeroResultInfo info)
            {
                IHero hero = default!;

                if (info.HeroId.Name.Equals(
                    "Human",
                    StringComparison.Ordinal
                ))
                {
                    hero = HumanFromHumanEntityMapper(_entityStore.GetEntity<HumanEntity>(info.HeroId));
                }

                if (info.HeroId.Name.Equals(
                    "Droid",
                    StringComparison.Ordinal
                ))
                {
                    hero = DroidFromDroidEntityMapper(_entityStore.GetEntity<DroidEntity>(info.HeroId));
                }

                return new GetHeroResult(
                    hero,
                    info.Version
                );
            }

            throw new ArgumentException("GetHeroResultInfo expected.");
        }
    }
}

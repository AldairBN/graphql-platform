namespace StarWarsClient
{
    [global::System.CodeDom.Compiler.GeneratedCode("StrawberryShake", "11.0.0")]
    public partial class GetHeroResultFactory
        : global::StrawberryShake.IOperationResultDataFactory<GetHeroResult>
    {
        private readonly global::StrawberryShake.IEntityStore _entityStore;
        private readonly global::StrawberryShake.IEntityMapper<HumanEntity, HumanHero> _humanHeroFromHumanEntityMapper;
        private readonly global::StrawberryShake.IEntityMapper<DroidEntity, DroidHero> _droidHeroFromDroidEntityMapper;

        public GetHeroResultFactory(
            global::StrawberryShake.IEntityStore entityStore,
            global::StrawberryShake.IEntityMapper<HumanEntity, HumanHero> humanHeroFromHumanEntityMapper,
            global::StrawberryShake.IEntityMapper<DroidEntity, DroidHero> droidHeroFromDroidEntityMapper)
        {
            _entityStore = entityStore
                 ?? throw new global::System.ArgumentNullException(nameof(entityStore));
            _humanHeroFromHumanEntityMapper = humanHeroFromHumanEntityMapper
                 ?? throw new global::System.ArgumentNullException(nameof(humanHeroFromHumanEntityMapper));
            _droidHeroFromDroidEntityMapper = droidHeroFromDroidEntityMapper
                 ?? throw new global::System.ArgumentNullException(nameof(droidHeroFromDroidEntityMapper));
        }

        public GetHeroResult Create(global::StrawberryShake.IOperationResultDataInfo dataInfo)
        {
            if (dataInfo is GetHeroResultInfo info)
            {
                IHero hero = default!;

                var heroInfo = info.Hero ?? throw new global::System.ArgumentNullException();
                if (heroInfo.Name.Equals(
                    "Human",
                    global::System.StringComparison.Ordinal
                ))
                {
                    hero = _humanHeroFromHumanEntityMapper.Map(_entityStore.GetEntity<HumanEntity>(heroInfo) ?? throw new global::System.ArgumentNullException());
                }

                if (heroInfo.Name.Equals(
                    "Droid",
                    global::System.StringComparison.Ordinal
                ))
                {
                    hero = _droidHeroFromDroidEntityMapper.Map(_entityStore.GetEntity<DroidEntity>(heroInfo) ?? throw new global::System.ArgumentNullException());
                }

                return new GetHeroResult(
                    hero,
                    info.Version
                );
            }

            throw new global::System.ArgumentException("GetHeroResultInfo expected.");
        }
    }
}
